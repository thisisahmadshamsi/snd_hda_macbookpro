New chat
Today
Ø±ÙØ¹ Ù…Ø´Ú©Ù„ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ MacBook CS8409
Fixing Wireless Network Adapter Conflicts
Yesterday
Fixing GPG Key Error in Kali Linux
7 Days
Ø±ÙØ¹ Ù…Ø´Ú©Ù„ ØªØ´Ø®ÛŒØµ ÙˆØ§ÛŒâ€ŒÙØ§ÛŒ Ø¯Ø± Ú©Ø§Ù„ÛŒ
ÙˆÛŒÙ†Ø¯ÙˆØ² Û±Û± Ùˆ Ø´Ø±Ø§ÛŒØ· Ø³Ø®Øªâ€ŒØ§ÙØ²Ø§Ø±ÛŒ Ù…Ù†Ø§Ø³Ø¨
Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ† Ø§Ø®Ø¨Ø§Ø± Ø¨ÛŒØªâ€ŒÚ©ÙˆÛŒÙ† Ùˆ ØªØ­Ù„ÛŒÙ„ Ø¨Ø§Ø²Ø§Ø±
Ø±ÙØ¹ Ù…Ø´Ú©Ù„ Ø¨ÙˆÙ‚ Ù…Ù…ØªØ¯ Ù‚Ø¨Ù„ Ø§Ø² Ø¨Ø§Ù„Ø§ Ø¢Ù…Ø¯Ù† ÙˆÛŒÙ†Ø¯ÙˆØ²
ØªØ­ÙŠØ© ÙˆØ¯ÙŠØ© ÙˆØ·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
ØªÙØ§ÙˆØª MBR Ùˆ GPT Ø¯Ø± Ù¾Ø§Ø±ØªÛŒØ´Ù†â€ŒØ¨Ù†Ø¯ÛŒ
Ø§ÙØ²ÙˆØ¯Ù† Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¯Ø± ÙØ±Ù…
Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù‚Ø§Ù„Ø¨ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù…ÙˆØ¯Ù…
Ø§ÛŒÙ† Ù‚Ø§Ù„Ø¨ Ø±Ùˆ ØªØ¨Ø¯ÛŒÙ„ Ú©Ù† Ø¨Ù‡ ÛŒÚ© Ù‚Ø§Ù„Ø¨
ØªØ±Ø¬Ù…Ù‡ Ø¹Ø¨Ø§Ø±Øª Ú©Ø§Ø± Ø³Ø®Øª ØªØ§ Ø®Ø± Ù…Ø±Ú¯
Ù¾ÛŒØ´Ø±ÙØª Ø¨Ø§ Ø®Ø³ØªÚ¯ÛŒ Ùˆ ØªØ±Ø³ Ø´Ú©Ø³Øª
Extracting Day from Jalali Date String
Display Only Day from Jalali Date
Updated Blog Posts with Slick Carousel
Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§Ù†Ú¯ÙˆÙ„Ø§Ø± Ø¨Ø§ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ©
Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø³Ù„Ø§ÛŒØ¯Ø± ÙˆØ¨Ù„Ø§Ú¯ Ø¨Ø§ Bootstrap 5
Ù…ÛŒØ®ÙˆØ§Ù… Ø§ÛŒÙ† Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ø¨Ù„Ø§Ú¯ Ù‡Ø§ Ø±Ùˆ Ø¨Ø§
Ù…ÛŒØ®ÙˆØ§Ù… Ø§ÛŒÙ† Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ø¨Ù„Ø§Ú¯ Ù‡Ø§ Ø±Ùˆ Ø¨Ø§
Ù…Ø´Ú©Ù„ Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ùˆ Ø±ÙØ¹ Ø¢Ù†
Greeting and Offer of Assistance
Ù…Ø´Ú©Ù„ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÙ†Ø§Ù…ÛŒÚ©ÛŒ Ø¯Ø± Slick Slider
Angular Service for Blog Posts with Slick
Angular Service for Blog Posts with Slick Carousel
base on schema.py give me a angu
ØªØºÛŒÛŒØ± Ù†Ø§Ù… Ú©ÙˆØ¦Ø±ÛŒ Ø¯Ø± GraphQL
Ù…Ø´Ú©Ù„ Ø§Ø³Ú©ÛŒÙ…Ø§ Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† CategoryQuery
Ú©ÙˆØ±ÛŒ Ú©Ø§Ø± Ù…ÛŒÚ©Ù†Ù‡ Ø§Ù…Ø§ Ø¯Ø± Ø§Ù†Ú¯ÙˆÙ„Ø§Ø± Ø¯Ø±
i got this error query { allMe
Fix Dynamic Slick Carousel in Angular
Ø§ØµÙ„Ø§Ø­ Ú©Ø¯ Ø¨Ù„Ø§Ú¯ Ùˆ Ø­Ø°Ù Ú©Ø§Ù†ÙÙ„ÛŒÚ©Øª
Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ùˆ Ø§ØµÙ„Ø§Ø­ Ú©Ø¯ Ø¨Ù„Ø§Ú¯
Ø±ÙØ¹ Ø®Ø·Ø§ Ø¯Ø± Ú©ÙˆØ¦Ø±ÛŒ GraphQL
Ù…Ø´Ú©Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø§Ø³Ú©ÛŒÙ…Ø§ Ø¯Ø± Ø¬Ù†Ú¯Ùˆ
Greeting and Offer of Assistance
hi
wit this schema.py format it dos
Fixing Slick Carousel Display Issue
Updated Blog Service and Component Code
GraphQL Authentication Token Missing Error
GraphQL Schema Conflict Resolution Guide
Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¹Ø´Ù‚ Ùˆ Ù„Ø°Øª Ø¯Ø± Ø²Ù†Ø¯Ú¯ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡
Ù†Ù‚Ø´Ù‡ Ú©Ù†ØªØ±Ù„ Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ Ø¯Ø± Ø´Ø·Ø±Ù†Ø¬
Ø§ØªØµØ§Ù„ Ø³ÛŒÙ…â€ŒÙ‡Ø§ÛŒ Ø³ÙÛŒØ¯ Ù¾Ù…Ù¾ Ú©ÙˆÙ„Ø±
i want make li posts same height
i want make li posts same height
Update Blog Posts with Bootstrap Styling
Configure Apache for Media File Serving
Get App
Ø±ÙØ¹ Ù…Ø´Ú©Ù„ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ MacBook CS8409
Ø­ØªÙ…Ø§Ù‹! Ø¨Ù„Ù‡ØŒ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ MacBook Ù‡Ù… Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø®Ø§ØµÛŒ Ø¯Ø§Ø±Ù‡. Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ÛŒ Apple Ø¨Ø§ Ø¯Ø±Ø§ÛŒÙˆØ± snd_hda_macbook ÛŒØ§ snd_hda_intel Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù†ØŒ Ø§Ù…Ø§ Ù…Ù…Ú©Ù†Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø¶Ø§ÙÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†.
Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ú©Ø§Ù…Ù„ Ù†ØµØ¨ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ MacBook:
bash

#!/bin/bash
# Audio Driver Installer for MacBook Pro
# Author: Buddha
# Description: Automates the installation of audio drivers for MacBook

set -e  # Exit on error

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

log() {
    echo -e "${BLUE}[INFO]${NC} $1"
}

success() {
    echo -e "${GREEN}[SUCCESS]${NC} $1"
}

warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

check_audio_hardware() {
    log "Checking audio hardware..."
    echo -e "\n${YELLOW}=== Audio Hardware Information ===${NC}"
    
    # Check PCI audio devices
    lspci -v | grep -i audio -A 5
    
    # Check loaded audio modules
    lsmod | grep -E "(snd|hda)" || true
    
    # Check ALSA devices
    aplay -l 2>/dev/null || echo "aplay not available"
}

install_audio_dependencies() {
    log "Installing audio dependencies..."
    
    sudo apt update
    sudo apt install -y \
        alsa-base \
        alsa-utils \
        pulseaudio \
        pulseaudio-utils \
        pavucontrol \
        linux-firmware \
        firmware-sof-signed
}

configure_alsa() {
    log "Configuring ALSA for MacBook..."
    
    # Create ALSA configuration file for MacBook
    sudo tee /etc/modprobe.d/alsa-base.conf > /dev/null <<'EOF'
# ALSA configuration for MacBook Pro
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel probe_mask=1
options snd-hda-intel power_save=0
EOF

    # Additional configuration for newer MacBooks
    sudo tee /etc/modprobe.d/macbook-audio.conf > /dev/null <<'EOF'
# MacBook Audio Configuration
options snd-hda-intel model=macbook-pro
options snd-hda-intel enable=1
options snd-hda-intel index=0
EOF
}

load_audio_drivers() {
    log "Loading audio drivers..."
    
    # Unload existing audio modules
    sudo modprobe -r snd_hda_intel snd_hda_codec_cirrus snd_hda_codec_generic 2>/dev/null || true
    
    # Load required audio modules
    sudo modprobe snd_hda_intel
    sudo modprobe snd_hda_codec_cirrus
    sudo modprobe snd_hda_codec_generic
    
    sleep 2  # Wait for drivers to initialize
}

install_firmware() {
    log "Installing additional firmware..."
    
    # Install SOF firmware for newer MacBooks
    sudo apt install -y firmware-sof-signed
    
    # Copy additional firmware files if needed
    if [ ! -d /lib/firmware/intel ]; then
        sudo mkdir -p /lib/firmware/intel
    fi
}

configure_pulseaudio() {
    log "Configuring PulseAudio..."
    
    # Restart PulseAudio
    pulseaudio -k 2>/dev/null || true
    sleep 2
    pulseaudio --start
    
    # Set better configuration
    sudo tee /etc/pulse/daemon.conf > /dev/null <<'EOF'
# PulseAudio configuration for MacBook
high-priority = yes
nice-level = -11
realtime-scheduling = yes
realtime-priority = 9
rlimit-rtprio = 9
default-sample-format = s16le
default-sample-rate = 44100
alternate-sample-rate = 48000
default-sample-channels = 2
default-channel-map = front-left,front-right
default-fragments = 2
default-fragment-size-msec = 125
resample-method = speex-float-1
enable-remixing = yes
enable-lfe-remixing = no
EOF
}

fix_common_issues() {
    log "Fixing common audio issues..."
    
    # Fix permission issues
    sudo usermod -a -G audio $USER
    
    # Fix module loading order
    sudo tee /etc/modules-load.d/audio.conf > /dev/null <<'EOF'
snd_hda_intel
snd_hda_codec_cirrus
snd_hda_codec_generic
snd_pcm
snd_timer
EOF

    # Update initramfs
    sudo update-initramfs -u
}

test_audio() {
    log "Testing audio configuration..."
    
    echo -e "\n${YELLOW}=== Audio Device Test ===${NC}"
    
    # List audio devices
    echo "Available audio devices:"
    aplay -l 2>/dev/null || echo "aplay command failed"
    
    # Test speaker output
    echo -e "\nTesting speaker output (you should hear a sound):"
    speaker-test -t wav -c 2 -l 1 2>/dev/null || \
    echo "Speaker test failed or no sound card detected"
    
    # Check volume levels
    echo -e "\nCurrent volume levels:"
    amixer sget Master 2>/dev/null || \
    pactl list sinks | grep -E "(Volume|Mute)" | head -5
}

install_audio_tools() {
    log "Installing audio tools..."
    
    # Useful audio utilities
    sudo apt install -y \
        alsamixer \
        gnome-alsamixer \
        pulseaudio-module-bluetooth \
        libasound2-plugins \
        libasound2-dev
}

create_audio_script() {
    log "Creating audio troubleshooting script..."
    
    sudo tee /usr/local/bin/audio-fix > /dev/null <<'EOF'
#!/bin/bash
# Quick audio fix for MacBook
echo "Restarting audio services..."
pulseaudio -k
sleep 2
sudo alsa force-reload
sleep 2
pulseaudio --start
echo "Audio services restarted"
EOF
    
    sudo chmod +x /usr/local/bin/audio-fix
}

main() {
    echo -e "${GREEN}=== MacBook Audio Driver Installer ===${NC}\n"
    
    # Check if running as root
    if [ "$EUID" -ne 0 ]; then
        error "Please run as root or with sudo"
        exit 1
    fi
    
    # Execute installation steps
    check_audio_hardware
    install_audio_dependencies
    install_firmware
    configure_alsa
    load_audio_drivers
    configure_pulseaudio
    install_audio_tools
    create_audio_script
    fix_common_issues
    
    # Final test
    test_audio
    
    success "Audio installation completed!"
    echo -e "\n${GREEN}Next steps:${NC}"
    echo "1. Reboot your system: sudo reboot"
    echo "2. After reboot, run: audio-fix (if needed)"
    echo "3. Use 'pavucontrol' for audio control"
    echo "4. Use 'alsamixer' for ALSA mixer control"
    echo -e "\n${YELLOW}Common troubleshooting commands:${NC}"
    echo "audio-fix          # Quick audio restart"
    echo "pavucontrol        # PulseAudio control GUI"
    echo "alsamixer          # ALSA mixer (terminal)"
    echo "aplay -l           # List audio devices"
}

# Run main function
main "$@"

Ù†Ø­ÙˆÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ú©Ø§Ø±Øª ØµØ¯Ø§:

    Ø°Ø®ÛŒØ±Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª:

bash

nano install_audio.sh

    Ø§Ø¬Ø§Ø²Ù‡ Ø§Ø¬Ø±Ø§ Ø¯Ø§Ø¯Ù†:

bash

chmod +x install_audio.sh

    Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª:

bash

sudo ./install_audio.sh

ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª:

    âœ… Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø³Ø®Øªâ€ŒØ§ÙØ²Ø§Ø± ØµØ¯Ø§

    âœ… Ù†ØµØ¨ Ø¯Ø±Ø§ÛŒÙˆØ±Ù‡Ø§ÛŒ ALSA Ùˆ PulseAudio

    âœ… ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ù‡ÛŒÙ†Ù‡ Ø¨Ø±Ø§ÛŒ MacBook

    âœ… Ù†ØµØ¨ firmware Ù„Ø§Ø²Ù…

    âœ… Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ù†ØªØ±Ù„ÛŒ (pavucontrol, alsamixer)

    âœ… Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªØ¹Ù…ÛŒØ± Ø³Ø±ÛŒØ¹ (audio-fix)

    âœ… Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±

Ù¾Ø³ Ø§Ø² Ù†ØµØ¨:

    Ø±ÛŒØ³ØªØ§Ø±Øª Ø³ÛŒØ³ØªÙ…:

bash

sudo reboot

    ** ØªØ³Øª ØµØ¯Ø§**:

bash

speaker-test -t wav -c 2

    Ú©Ù†ØªØ±Ù„ ØµØ¯Ø§:

bash

pavucontrol  # GUI control
alsamixer    # Terminal control

    Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªÛŒÙ†:

bash

audio-fix  # Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªØ¹Ù…ÛŒØ± Ø³Ø±ÛŒØ¹

Ø¨Ø±Ø§ÛŒ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ØªØ± (MacBook 2018 Ø¨Ù‡ Ø¨Ø¹Ø¯):

Ø§Ú¯Ø± Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø§Ù„Ø§ Ø¬ÙˆØ§Ø¨ Ù†Ø¯Ø§Ø¯ØŒ Ù…Ù…Ú©Ù†Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ø±Ø§ÛŒÙˆØ±Ù‡Ø§ÛŒ SOF (Sound Open Firmware) Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒÙ†:
bash

# Ù†ØµØ¨ Ø¯Ø±Ø§ÛŒÙˆØ±Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ØªØ±
sudo apt install -y firmware-sof-signed sof-tools

# Ø±ÛŒØ³ØªØ§Ø±Øª Ø®Ø¯Ù…Ø§Øª ØµØ¯Ø§
sudo systemctl restart alsa-state

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø§ÛŒØ¯ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ MacBook Ø´Ù…Ø§ Ø±Ùˆ Ø¨Ù‡ Ø·ÙˆØ± Ú©Ø§Ù…Ù„ Ø±Ø§Ù‡ Ø¨Ù†Ø¯Ø§Ø²Ù‡! ğŸµ
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ ./fixSound.sh 
=== MacBook Audio Driver Installer ===

[ERROR] Please run as root or with sudo
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ sudo ./fixSound.sh
=== MacBook Audio Driver Installer ===

[INFO] Checking audio hardware...

=== Audio Hardware Information ===
        DeviceName: Azalia Audio Codec
        Subsystem: Apple Inc. Device 0175
        Flags: bus master, fast devsel, latency 0, IOMMU group 1
        Capabilities: [e0] Vendor Specific Information: Intel Capabilities v1
                CapA: Peg60Dis- Peg12Dis+ Peg11Dis+ Peg10Dis+ PeLWUDis+ DmiWidth=x4
                      EccDis+ ForceEccEn- VTdDis- DmiG2Dis+ PegG2Dis+ DDRMaxSize=Unlimited
--
00:1f.3 Audio device: Intel Corporation Sunrise Point-LP HD Audio (rev 21)
        Subsystem: Intel Corporation Device 7270
        Flags: bus master, fast devsel, latency 64, IRQ 89, IOMMU group 10
        Memory at 82620000 (64-bit, non-prefetchable) [size=16K]
        Memory at 4000000000 (64-bit, non-prefetchable) [size=64K]
        Capabilities: [50] Power Management version 3
snd_seq_dummy          12288  0
snd_hrtimer            12288  1
snd_seq               110592  7 snd_seq_dummy
snd_seq_device         16384  1 snd_seq
snd_sof_pci_intel_skl    24576  0
snd_sof_intel_hda_generic    36864  1 snd_sof_pci_intel_skl
soundwire_intel        73728  1 snd_sof_intel_hda_generic
snd_sof_intel_hda_common   184320  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_soc_hdac_hda       28672  1 snd_sof_intel_hda_common
snd_sof_intel_hda_mlink    36864  3 soundwire_intel,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_sof_intel_hda      24576  2 snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_sof_pci            24576  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_sof_xtensa_dsp     16384  1 snd_sof_intel_hda_generic
snd_sof               389120  5 snd_sof_pci,snd_sof_intel_hda_common,snd_sof_intel_hda_generic,snd_sof_intel_hda,snd_sof_pci_intel_skl
snd_sof_utils          16384  1 snd_sof
snd_soc_acpi_intel_match   118784  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_soc_acpi           16384  2 snd_soc_acpi_intel_match,snd_sof_intel_hda_generic
snd_soc_avs           212992  0
snd_hda_codec_hdmi     98304  1
snd_soc_hda_codec      24576  1 snd_soc_avs
snd_hda_codec_cs8409    36864  1
snd_hda_codec_generic   114688  1 snd_hda_codec_cs8409
snd_hda_ext_core       36864  6 snd_soc_avs,snd_soc_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda_mlink,snd_sof_intel_hda
snd_soc_core          421888  6 snd_soc_avs,snd_soc_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_soc_hdac_hda
snd_compress           28672  2 snd_soc_avs,snd_soc_core
snd_pcm_dmaengine      16384  1 snd_soc_core
snd_hda_intel          61440  1
snd_intel_dspcfg       40960  5 snd_soc_avs,snd_hda_intel,snd_sof,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_intel_sdw_acpi     16384  2 snd_intel_dspcfg,snd_sof_intel_hda_generic
snd_hda_codec         217088  8 snd_hda_codec_generic,snd_soc_avs,snd_hda_codec_hdmi,snd_soc_hda_codec,snd_hda_codec_cs8409,snd_hda_intel,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hda_core          143360  11 snd_hda_codec_generic,snd_soc_avs,snd_hda_codec_hdmi,snd_soc_hda_codec,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_ext_core,snd_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hwdep              20480  1 snd_hda_codec
snd_pcm               188416  13 snd_soc_avs,snd_hda_codec_hdmi,snd_hda_intel,snd_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_compress,snd_soc_core,snd_sof_utils,snd_hda_core,snd_sof_pci_intel_skl,snd_pcm_dmaengine
snd_timer              53248  3 snd_seq,snd_hrtimer,snd_pcm
snd                   151552  17 snd_hda_codec_generic,snd_seq,snd_seq_device,snd_hda_codec_hdmi,snd_hwdep,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_codec,snd_sof,snd_timer,snd_compress,snd_soc_core,snd_pcm
soundcore              16384  1 snd
aplay not available
[INFO] Installing audio dependencies...
Hit:1 http://http.kali.org/kali kali-rolling InRelease                    
Hit:2 https://dl.google.com/linux/chrome/deb stable InRelease             
Hit:3 https://packages.microsoft.com/repos/code stable InRelease          
All packages are up to date.    
Error: Unable to locate package alsa-base
Error: Unable to locate package linux-firmware
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ sudo apt update   
Hit:1 http://http.kali.org/kali kali-rolling InRelease
Hit:2 https://dl.google.com/linux/chrome/deb stable InRelease             
Hit:3 https://packages.microsoft.com/repos/code stable InRelease          
All packages are up to date.    
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ sudo apt upgrade
Summary:                        
  Upgrading: 0, Installing: 0, Removing: 0, Not Upgrading: 0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ø§Ø² Ù†Ø§Ù… Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ Ø¯Ø± Ú©Ø§Ù„ÛŒ Ù„ÛŒÙ†ÙˆÚ©Ø³ Ù‡Ø³Øª. Ø¯Ø± Ú©Ø§Ù„ÛŒØŒ Ù†Ø§Ù… Ø¨Ø±Ø®ÛŒ Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ Ù…ØªÙØ§ÙˆØª Ø§Ø³Øª. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ùˆ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù„ÛŒ Ù„ÛŒÙ†ÙˆÚ©Ø³ Ø§ØµÙ„Ø§Ø­ Ú©Ù†ÛŒÙ…:
Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù„ÛŒ Ù„ÛŒÙ†ÙˆÚ©Ø³:
bash

#!/bin/bash
# Audio Driver Installer for MacBook Pro on Kali Linux
# Author: Buddha
# Description: Automates the installation of audio drivers for MacBook on Kali

set -e  # Exit on error

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

log() {
    echo -e "${BLUE}[INFO]${NC} $1"
}

success() {
    echo -e "${GREEN}[SUCCESS]${NC} $1"
}

warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

check_audio_hardware() {
    log "Checking audio hardware..."
    echo -e "\n${YELLOW}=== Audio Hardware Information ===${NC}"
    
    # Check PCI audio devices
    lspci -v | grep -i audio -A 5
    
    # Check loaded audio modules
    lsmod | grep -E "(snd|hda)" || true
}

install_audio_dependencies() {
    log "Installing audio dependencies for Kali Linux..."
    
    sudo apt update
    sudo apt install -y \
        alsa-utils \
        pulseaudio \
        pulseaudio-utils \
        pavucontrol \
        firmware-sof-signed \
        sof-tools
}

configure_alsa() {
    log "Configuring ALSA for MacBook..."
    
    # Create ALSA configuration file for MacBook
    sudo tee /etc/modprobe.d/alsa-base.conf > /dev/null <<'EOF'
# ALSA configuration for MacBook Pro on Kali
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel probe_mask=1
options snd-hda-intel power_save=0
options snd-hda-intel enable=1
options snd-hda-intel index=0
EOF

    # Additional configuration for Apple hardware
    sudo tee /etc/modprobe.d/apple-audio.conf > /dev/null <<'EOF'
# Apple Audio Configuration for Kali
options snd-hda-intel model=auto
options snd-hda-intel single_cmd=1
EOF
}

load_audio_drivers() {
    log "Loading audio drivers..."
    
    # Unload existing audio modules
    sudo modprobe -r snd_hda_intel snd_hda_codec_cirrus snd_hda_codec_generic 2>/dev/null || true
    
    # Load required audio modules
    sudo modprobe snd_hda_intel
    sudo modprobe snd_hda_codec_cirrus
    sudo modprobe snd_hda_codec_generic
    
    sleep 2  # Wait for drivers to initialize
}

install_firmware() {
    log "Installing additional firmware..."
    
    # Install SOF firmware for newer MacBooks
    sudo apt install -y firmware-sof-signed sof-tools
    
    # Check if firmware files exist
    if [ ! -d /lib/firmware/intel/sof ]; then
        warning "SOF firmware not found, trying alternative installation..."
        sudo apt install -y firmware-intel-sound
    fi
}

configure_pulseaudio() {
    log "Configuring PulseAudio..."
    
    # Stop PulseAudio if running
    pulseaudio -k 2>/dev/null || true
    sleep 2
    
    # Start PulseAudio
    pulseaudio --start
    
    # Set better configuration
    sudo tee /etc/pulse/daemon.conf > /dev/null <<'EOF'
# PulseAudio configuration for MacBook on Kali
high-priority = yes
nice-level = -11
realtime-scheduling = yes
realtime-priority = 9
rlimit-rtprio = 9
default-sample-format = s16le
default-sample-rate = 44100
alternate-sample-rate = 48000
default-sample-channels = 2
default-channel-map = front-left,front-right
default-fragments = 2
default-fragment-size-msec = 125
resample-method = speex-float-1
enable-remixing = yes
enable-lfe-remixing = no
EOF
}

fix_common_issues() {
    log "Fixing common audio issues..."
    
    # Fix permission issues
    sudo usermod -a -G audio $USER
    
    # Fix module loading order
    sudo tee /etc/modules-load.d/audio.conf > /dev/null <<'EOF'
snd_hda_intel
snd_hda_codec_cirrus
snd_hda_codec_generic
snd_pcm
snd_timer
EOF

    # Update initramfs
    sudo update-initramfs -u
}

test_audio() {
    log "Testing audio configuration..."
    
    echo -e "\n${YELLOW}=== Audio Device Test ===${NC}"
    
    # List audio devices
    echo "Available audio devices:"
    aplay -l 2>/dev/null || {
        warning "aplay command failed, checking alternative methods..."
        ls /dev/snd/ 2>/dev/null || true
        pactl list short sinks 2>/dev/null || true
    }
    
    # Test if we have any audio devices
    if [ -d /dev/snd ]; then
        echo "Sound devices detected in /dev/snd/"
        ls /dev/snd/
    fi
}

install_audio_tools() {
    log "Installing audio tools..."
    
    # Useful audio utilities for Kali
    sudo apt install -y \
        alsa-tools \
        alsa-tools-gui \
        pulseaudio-module-bluetooth \
        libasound2-plugins \
        libasound2-dev
}

create_audio_script() {
    log "Creating audio troubleshooting script..."
    
    sudo tee /usr/local/bin/audio-fix > /dev/null <<'EOF'
#!/bin/bash
# Quick audio fix for MacBook on Kali
echo "Restarting audio services..."
pulseaudio -k 2>/dev/null
sleep 2
sudo alsa force-reload 2>/dev/null
sleep 2
pulseaudio --start 2>/dev/null
echo "Audio services restarted"
echo "Testing audio devices:"
aplay -l 2>/dev/null || echo "aplay not available"
EOF
    
    sudo chmod +x /usr/local/bin/audio-fix
}

check_kali_specific() {
    log "Checking Kali-specific audio configuration..."
    
    # Check if we're on Kali
    if [ -f /etc/debian_version ] && grep -qi "kali" /etc/os-release; then
        log "Kali Linux detected - applying specific fixes..."
        
        # Ensure pulseaudio is properly configured
        if ! systemctl --user is-active pulseaudio.service >/dev/null 2>&1; then
            systemctl --user enable pulseaudio.service
            systemctl --user start pulseaudio.service
        fi
    fi
}

main() {
    echo -e "${GREEN}=== MacBook Audio Driver Installer for Kali Linux ===${NC}\n"
    
    # Check if running as root
    if [ "$EUID" -ne 0 ]; then
        error "Please run as root or with sudo"
        exit 1
    fi
    
    # Execute installation steps
    check_audio_hardware
    install_audio_dependencies
    install_firmware
    configure_alsa
    load_audio_drivers
    check_kali_specific
    configure_pulseaudio
    install_audio_tools
    create_audio_script
    fix_common_issues
    
    # Final test
    test_audio
    
    success "Audio installation completed!"
    echo -e "\n${GREEN}Next steps:${NC}"
    echo "1. Reboot your system: sudo reboot"
    echo "2. After reboot, run: audio-fix (if needed)"
    echo "3. Use 'pavucontrol' for audio control"
    echo "4. Use 'alsamixer' for ALSA mixer control"
    echo -e "\n${YELLOW}Common troubleshooting commands:${NC}"
    echo "audio-fix          # Quick audio restart"
    echo "pavucontrol        # PulseAudio control GUI"
    echo "alsamixer          # ALSA mixer (terminal)"
    echo "aplay -l           # List audio devices"
    echo "pactl list sinks   # List PulseAudio sinks"
}

# Run main function
main "$@"

Ø­Ø§Ù„Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

# Ø°Ø®ÛŒØ±Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª
nano fixSoundKali.sh

# Ø§Ø¬Ø§Ø²Ù‡ Ø§Ø¬Ø±Ø§
chmod +x fixSoundKali.sh

# Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª
sudo ./fixSoundKali.sh

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªÛŒØ¯ØŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø³ØªÛŒ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

# Ù†ØµØ¨ Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ø²Ù… Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù„ÛŒ
sudo apt install -y alsa-utils pulseaudio pavucontrol firmware-sof-signed sof-tools

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª ALSA Ø¨Ø±Ø§ÛŒ Ù…Ú©â€ŒØ¨ÙˆÚ©
echo 'options snd-hda-intel model=mbp16' | sudo tee /etc/modprobe.d/alsa-base.conf
echo 'options snd-hda-intel position_fix=1' | sudo tee -a /etc/modprobe.d/alsa-base.conf

# Ø±ÛŒÙ„ÙˆØ¯ Ø¯Ø±Ø§ÛŒÙˆØ±Ù‡Ø§
sudo modprobe -r snd_hda_intel
sudo modprobe snd_hda_intel

# Ø±ÛŒØ³ØªØ§Ø±Øª Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
pulseaudio -k
pulseaudio --start

# ØªØ³Øª ØµØ¯Ø§
speaker-test -t wav -c 2

Ø¨Ø±Ø§ÛŒ Ù…Ú©â€ŒØ¨ÙˆÚ©â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ØªØ± (2018 Ø¨Ù‡ Ø¨Ø¹Ø¯):
bash

# Ù†ØµØ¨ Ø¯Ø±Ø§ÛŒÙˆØ±Ù‡Ø§ÛŒ SOF
sudo apt install -y firmware-sof-signed sof-tools

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ SOF
echo 'options snd-intel-dspcfg dsp_driver=3' | sudo tee /etc/modprobe.d/intel-dsp.conf

# Ø±ÛŒØ³ØªØ§Ø±Øª
sudo reboot

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù…Ø®ØµÙˆØµ Ú©Ø§Ù„ÛŒ Ù„ÛŒÙ†ÙˆÚ©Ø³ Ù‡Ø³Øª Ùˆ Ø¨Ø§ÛŒØ¯ Ù…Ø´Ú©Ù„ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ Ù…Ú©â€ŒØ¨ÙˆÚ© Ø´Ù…Ø§ Ø±Ùˆ Ø­Ù„ Ú©Ù†Ù‡! ğŸµ
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ sudo ./fixSound.sh
=== MacBook Audio Driver Installer for Kali Linux ===

[INFO] Checking audio hardware...

=== Audio Hardware Information ===
        DeviceName: Azalia Audio Codec
        Subsystem: Apple Inc. Device 0175
        Flags: bus master, fast devsel, latency 0, IOMMU group 1
        Capabilities: [e0] Vendor Specific Information: Intel Capabilities v1
                CapA: Peg60Dis- Peg12Dis+ Peg11Dis+ Peg10Dis+ PeLWUDis+ DmiWidth=x4
                      EccDis+ ForceEccEn- VTdDis- DmiG2Dis+ PegG2Dis+ DDRMaxSize=Unlimited
--
00:1f.3 Audio device: Intel Corporation Sunrise Point-LP HD Audio (rev 21)
        Subsystem: Intel Corporation Device 7270
        Flags: bus master, fast devsel, latency 64, IRQ 89, IOMMU group 10
        Memory at 82620000 (64-bit, non-prefetchable) [size=16K]
        Memory at 4000000000 (64-bit, non-prefetchable) [size=64K]
        Capabilities: [50] Power Management version 3
snd_seq_dummy          12288  0
snd_hrtimer            12288  1
snd_seq               110592  7 snd_seq_dummy
snd_seq_device         16384  1 snd_seq
snd_sof_pci_intel_skl    24576  0
snd_sof_intel_hda_generic    36864  1 snd_sof_pci_intel_skl
soundwire_intel        73728  1 snd_sof_intel_hda_generic
snd_sof_intel_hda_common   184320  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_soc_hdac_hda       28672  1 snd_sof_intel_hda_common
snd_sof_intel_hda_mlink    36864  3 soundwire_intel,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_sof_intel_hda      24576  2 snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_sof_pci            24576  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_sof_xtensa_dsp     16384  1 snd_sof_intel_hda_generic
snd_sof               389120  5 snd_sof_pci,snd_sof_intel_hda_common,snd_sof_intel_hda_generic,snd_sof_intel_hda,snd_sof_pci_intel_skl
snd_sof_utils          16384  1 snd_sof
snd_soc_acpi_intel_match   118784  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_soc_acpi           16384  2 snd_soc_acpi_intel_match,snd_sof_intel_hda_generic
snd_soc_avs           212992  0
snd_hda_codec_hdmi     98304  1
snd_soc_hda_codec      24576  1 snd_soc_avs
snd_hda_codec_cs8409    36864  1
snd_hda_codec_generic   114688  1 snd_hda_codec_cs8409
snd_hda_ext_core       36864  6 snd_soc_avs,snd_soc_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda_mlink,snd_sof_intel_hda
snd_soc_core          421888  6 snd_soc_avs,snd_soc_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_soc_hdac_hda
snd_compress           28672  2 snd_soc_avs,snd_soc_core
snd_pcm_dmaengine      16384  1 snd_soc_core
snd_hda_intel          61440  1
snd_intel_dspcfg       40960  5 snd_soc_avs,snd_hda_intel,snd_sof,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_intel_sdw_acpi     16384  2 snd_intel_dspcfg,snd_sof_intel_hda_generic
snd_hda_codec         217088  8 snd_hda_codec_generic,snd_soc_avs,snd_hda_codec_hdmi,snd_soc_hda_codec,snd_hda_codec_cs8409,snd_hda_intel,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hda_core          143360  11 snd_hda_codec_generic,snd_soc_avs,snd_hda_codec_hdmi,snd_soc_hda_codec,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_ext_core,snd_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hwdep              20480  1 snd_hda_codec
snd_pcm               188416  13 snd_soc_avs,snd_hda_codec_hdmi,snd_hda_intel,snd_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_compress,snd_soc_core,snd_sof_utils,snd_hda_core,snd_sof_pci_intel_skl,snd_pcm_dmaengine
snd_timer              53248  3 snd_seq,snd_hrtimer,snd_pcm
snd                   151552  17 snd_hda_codec_generic,snd_seq,snd_seq_device,snd_hda_codec_hdmi,snd_hwdep,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_codec,snd_sof,snd_timer,snd_compress,snd_soc_core,snd_pcm
soundcore              16384  1 snd
[INFO] Installing audio dependencies for Kali Linux...
Hit:1 http://http.kali.org/kali kali-rolling InRelease                    
Hit:2 https://dl.google.com/linux/chrome/deb stable InRelease             
Hit:3 https://packages.microsoft.com/repos/code stable InRelease          
All packages are up to date.    
Error: Unable to locate package sof-tools
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ø§Ø² Ø§ÛŒÙ†Ù‡ Ú©Ù‡ sof-tools Ø¯Ø± Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ù‡. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ùˆ Ø¨Ø¯ÙˆÙ† Ø§ÛŒÙ† Ø¨Ø³ØªÙ‡ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒÙ…:
Ø§Ø¨ØªØ¯Ø§ Ø¯Ø³ØªÛŒ Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ø²Ù… Ø±Ùˆ Ù†ØµØ¨ Ú©Ù†ÛŒØ¯:
bash

# Ù†ØµØ¨ Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ú©Ø§Ù„ÛŒ
sudo apt install -y alsa-utils pulseaudio pavucontrol firmware-sof-signed

# Ù†ØµØ¨ Ø¨Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ø§Ú¯Ø± needed
sudo apt install -y libasound2-plugins libasound2-dev

Ø­Ø§Ù„Ø§ Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø¯Ù‡â€ŒØªØ± Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

#!/bin/bash
# Quick Audio Fix for MacBook on Kali
# Author: Buddha

set -e

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo -e "${GREEN}=== Quick Audio Fix for MacBook ===${NC}"

# 1. Install basic audio packages
echo -e "${YELLOW}[1/6] Installing audio packages...${NC}"
sudo apt update
sudo apt install -y alsa-utils pulseaudio pavucontrol firmware-sof-signed

# 2. Configure ALSA for MacBook
echo -e "${YELLOW}[2/6] Configuring ALSA...${NC}"
sudo tee /etc/modprobe.d/macbook-audio.conf > /dev/null <<'EOF'
# MacBook Audio Configuration
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel probe_mask=1
options snd-hda-intel power_save=0
options snd-hda-intel enable=1
EOF

# 3. Reload audio drivers
echo -e "${YELLOW}[3/6] Reloading audio drivers...${NC}"
sudo modprobe -r snd_hda_intel
sudo modprobe snd_hda_intel

# 4. Restart PulseAudio
echo -e "${YELLOW}[4/6] Restarting PulseAudio...${NC}"
pulseaudio -k 2>/dev/null || true
sleep 2
pulseaudio --start

# 5. Fix permissions
echo -e "${YELLOW}[5/6] Fixing permissions...${NC}"
sudo usermod -a -G audio $(whoami)

# 6. Test audio
echo -e "${YELLOW}[6/6] Testing audio...${NC}"
sleep 3

echo -e "\n${GREEN}=== Audio Devices ===${NC}"
aplay -l 2>/dev/null || {
    echo "aplay not available, checking other methods:"
    ls /dev/snd/ 2>/dev/null || true
}

echo -e "\n${GREEN}=== PulseAudio Sinks ===${NC}"
pactl list short sinks 2>/dev/null || true

echo -e "\n${GREEN}=== Installation Complete! ===${NC}"
echo "Please reboot your system: sudo reboot"
echo "After reboot, test audio with: speaker-test -t wav -c 2"

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

# Ø°Ø®ÛŒØ±Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª
nano quick_audio_fix.sh

# Ø§Ø¬Ø§Ø²Ù‡ Ø§Ø¬Ø±Ø§
chmod +x quick_audio_fix.sh

# Ø§Ø¬Ø±Ø§
sudo ./quick_audio_fix.sh

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªÛŒØ¯ØŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø³ØªÛŒ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

# 1. Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
lsmod | grep snd

# 2. Ø­Ø°Ù Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ø¯Ø±Ø§ÛŒÙˆØ±
sudo modprobe -r snd_hda_intel
sudo modprobe snd_hda_intel model=mbp16

# 3. Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
ls /dev/snd/

# 4. ØªØ³Øª ALSA
sudo alsa force-reload

# 5. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PulseAudio
pulseaudio -k
pulseaudio --start

# 6. ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ ØµØ¯Ø§
speaker-test -t wav -c 2

Ø¨Ø±Ø§ÛŒ Ù…Ú©â€ŒØ¨ÙˆÚ©â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ SOF:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ø¢ÛŒØ§ Ø§Ø² SOF Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
dmesg | grep -i sof

# Ø§Ú¯Ø± Ø§Ø² SOF Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
sudo apt install -y firmware-sof-signed

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª SOF
echo 'options snd-intel-dspcfg dsp_driver=3' | sudo tee /etc/modprobe.d/sof.conf

Ù¾Ø³ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾ØªØŒ Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ù†ÛŒØ¯:
bash

sudo reboot

Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ ØªØ³Øª Ú©Ù†ÛŒØ¯:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª ØµØ¯Ø§
aplay -l
pactl list sinks

# ØªØ³Øª Ø§Ø³Ù¾ÛŒÚ©Ø±
speaker-test -t wav -c 2

# Ú©Ù†ØªØ±Ù„ ØµØ¯Ø§
pavucontrol

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø¯Ù‡â€ŒØªØ± Ø¨Ø§ÛŒØ¯ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†Ù‡. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªÛŒØ¯ØŒ Ø®Ø±ÙˆØ¬ÛŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ùˆ Ø¨ÙØ±Ø³ØªÛŒØ¯:
bash

dmesg | grep -i audio
dmesg | grep -i snd
lsmod | grep snd

â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ù†ØµØ¨ Ø¨Ø³ØªÙ‡<200c>Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ú©Ø§Ù„ÛŒ    
sudo apt install -y alsa-utils pulseaudio pavucontrol firmware-sof-signed

# Ù†ØµØ¨ Ø¨Ø³ØªÙ‡<200c>Ù‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ø§Ú¯Ø± needed
sudo apt install -y libasound2-plugins libasound2-dev
[sudo] password for buddha: 
alsa-utils is already the newest version (1.2.14-1).
pulseaudio is already the newest version (17.0+dfsg1-2+b1).
pavucontrol is already the newest version (6.1-1).
firmware-sof-signed is already the newest version (2025.05-1).
Summary:
  Upgrading: 0, Installing: 0, Removing: 0, Not Upgrading: 0
libasound2-plugins is already the newest version (1.2.12-2+b1).
libasound2-dev is already the newest version (1.2.14-1).
Summary:
  Upgrading: 0, Installing: 0, Removing: 0, Not Upgrading: 0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ ./fixSound.sh 
=== Quick Audio Fix for MacBook ===
[1/6] Installing audio packages...
Hit:1 http://http.kali.org/kali kali-rolling InRelease
Hit:2 https://dl.google.com/linux/chrome/deb stable InRelease             
Hit:3 https://packages.microsoft.com/repos/code stable InRelease          
All packages are up to date.    
alsa-utils is already the newest version (1.2.14-1).
pulseaudio is already the newest version (17.0+dfsg1-2+b1).
pavucontrol is already the newest version (6.1-1).
firmware-sof-signed is already the newest version (2025.05-1).
Summary:
  Upgrading: 0, Installing: 0, Removing: 0, Not Upgrading: 0
[2/6] Configuring ALSA...
[3/6] Reloading audio drivers...
modprobe: FATAL: Module snd_hda_intel is in use.
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ Ù…Ø§Ú˜ÙˆÙ„ snd_hda_intel Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù‡Ø³Øª. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
Ø§ÙˆÙ„ØŒ Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ Ø±Ùˆ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ unload Ú©Ù†ÛŒÙ…:
bash

# ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
pulseaudio -k

# unload Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
sudo rmmod snd_hda_intel
sudo rmmod snd_hda_codec_generic
sudo rmmod snd_hda_codec
sudo rmmod snd_hda_core
sudo rmmod snd_pcm
sudo rmmod snd_timer
sudo rmmod snd

# Ø­Ø§Ù„Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ load Ú©Ù†ÛŒÙ…
sudo modprobe snd_hda_intel model=mbp16

Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡:
bash

#!/bin/bash
# Quick Audio Fix for MacBook on Kali
# Author: Buddha

set -e

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo -e "${GREEN}=== Quick Audio Fix for MacBook ===${NC}"

# 1. Stop audio services
echo -e "${YELLOW}[1/7] Stopping audio services...${NC}"
pulseaudio -k 2>/dev/null || true
sleep 2

# 2. Unload audio modules
echo -e "${YELLOW}[2/7] Unloading audio modules...${NC}"
sudo rmmod snd_hda_intel 2>/dev/null || true
sudo rmmod snd_hda_codec_generic 2>/dev/null || true
sudo rmmod snd_hda_codec 2>/dev/null || true
sudo rmmod snd_hda_core 2>/dev/null || true
sudo rmmod snd_pcm 2>/dev/null || true
sudo rmmod snd_timer 2>/dev/null || true
sudo rmmod snd 2>/dev/null || true
sleep 1

# 3. Configure ALSA for MacBook
echo -e "${YELLOW}[3/7] Configuring ALSA...${NC}"
sudo tee /etc/modprobe.d/macbook-audio.conf > /dev/null <<'EOF'
# MacBook Audio Configuration
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel probe_mask=1
options snd-hda-intel power_save=0
options snd-hda-intel enable=1
EOF

# 4. Reload audio modules
echo -e "${YELLOW}[4/7] Reloading audio modules...${NC}"
sudo modprobe snd_hda_intel model=mbp16
sleep 2

# 5. Start PulseAudio
echo -e "${YELLOW}[5/7] Starting PulseAudio...${NC}"
pulseaudio --start
sleep 2

# 6. Fix permissions
echo -e "${YELLOW}[6/7] Fixing permissions...${NC}"
sudo usermod -a -G audio $(whoami)

# 7. Test audio
echo -e "${YELLOW}[7/7] Testing audio...${NC}"
sleep 3

echo -e "\n${GREEN}=== Audio Devices ===${NC}"
aplay -l 2>/dev/null || {
    echo "aplay not available, checking other methods:"
    ls /dev/snd/ 2>/dev/null || true
}

echo -e "\n${GREEN}=== PulseAudio Sinks ===${NC}"
pactl list short sinks 2>/dev/null || true

echo -e "\n${GREEN}=== Installation Complete! ===${NC}"
echo "Please reboot your system: sudo reboot"
echo "After reboot, test audio with: speaker-test -t wav -c 2"

Ø­Ø§Ù„Ø§ Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

# Ø°Ø®ÛŒØ±Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª
nano audio_fix_final.sh

# Ø§Ø¬Ø§Ø²Ù‡ Ø§Ø¬Ø±Ø§
chmod +x audio_fix_final.sh

# Ø§Ø¬Ø±Ø§
sudo ./audio_fix_final.sh

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø¯Ø³ØªÛŒ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

# Ø§Ø¨ØªØ¯Ø§ ØªÙ…Ø§Ù… Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ Ø±Ùˆ unload Ú©Ù†ÛŒØ¯
sudo rmmod snd_hda_intel
sudo rmmod snd_hda_codec_generic
sudo rmmod snd_hda_codec
sudo rmmod snd_hda_core
sudo rmmod snd_pcm
sudo rmmod snd_timer
sudo rmmod snd
sudo rmmod soundcore

# Ø­Ø§Ù„Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ load Ú©Ù†ÛŒØ¯ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ú©â€ŒØ¨ÙˆÚ©
sudo modprobe snd_hda_intel model=mbp16

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ load Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
lsmod | grep snd

# ØªØ³Øª Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
ls /dev/snd/

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PulseAudio
pulseaudio --start

# ØªØ³Øª ØµØ¯Ø§
speaker-test -t wav -c 2

Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ù…Ø´Ú©Ù„:
bash

# Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ØµØ¯Ø§ Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯
dmesg | grep -i audio
dmesg | grep -i snd
dmesg | grep -i hda

# Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Øª ØµØ¯Ø§
cat /proc/asound/cards

# Ø§Ø·Ù„Ø§Ø¹Ø§Øª codec
cat /proc/asound/card0/codec* | grep -i codec

# Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡
lsof /dev/snd/*

Ø§Ú¯Ø± Ø§Ø² SOF Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:
bash

# Ø¨Ø±Ø±Ø³ÛŒ SOF
dmesg | grep -i sof

# Ø§Ú¯Ø± SOF ÙØ¹Ø§Ù„ Ø§Ø³Øª
sudo apt install firmware-sof-signed

# Ø±ÛŒØ³ØªØ§Ø±Øª
sudo reboot

Ù¾Ø³ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾ØªØŒ Ù„Ø·ÙØ§Ù‹ Ø®Ø±ÙˆØ¬ÛŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø¨ÙØ±Ø³ØªÛŒØ¯ ØªØ§ Ø¨ØªÙˆÙ†Ù… Ø¨Ù‡ØªØ± Ú©Ù…Ú© Ú©Ù†Ù…:
bash

dmesg | grep -i snd | tail -10
lsmod | grep snd
ls /dev/snd/

Ø§ÛŒÙ† Ø¨Ø§ÛŒØ¯ Ù…Ø´Ú©Ù„ ØµØ¯Ø§ Ø±Ùˆ Ø­Ù„ Ú©Ù†Ù‡! ğŸµ
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
pulseaudio -k

# unload Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
sudo rmmod snd_hda_intel
sudo rmmod snd_hda_codec_generic
sudo rmmod snd_hda_codec
sudo rmmod snd_hda_core
sudo rmmod snd_pcm
sudo rmmod snd_timer
sudo rmmod snd

# Ø­Ø§Ù„Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ load Ú©Ù†ÛŒÙ…
sudo modprobe snd_hda_intel model=mbp16
E: [pulseaudio] main.c: Failed to kill daemon: No such process
rmmod: ERROR: Module snd_hda_intel is in use
rmmod: ERROR: Module snd_hda_codec_generic is in use by: snd_hda_codec_cs8409
rmmod: ERROR: Module snd_hda_codec is in use by: snd_hda_codec_generic snd_soc_avs snd_hda_codec_hdmi snd_soc_hda_codec snd_hda_codec_cs8409 snd_hda_intel snd_soc_hdac_hda snd_sof_intel_hda
rmmod: ERROR: Module snd_hda_core is in use by: snd_hda_codec_generic snd_soc_avs snd_hda_codec_hdmi snd_soc_hda_codec snd_hda_codec_cs8409 snd_hda_intel snd_hda_ext_core snd_hda_codec snd_sof_intel_hda_common snd_soc_hdac_hda snd_sof_intel_hda
rmmod: ERROR: Module snd_pcm is in use by: snd_soc_avs snd_hda_codec_hdmi snd_hda_intel snd_hda_codec soundwire_intel snd_sof snd_sof_intel_hda_common snd_compress snd_soc_core snd_sof_utils snd_hda_core snd_sof_pci_intel_skl snd_pcm_dmaengine
rmmod: ERROR: Module snd_timer is in use by: snd_seq snd_hrtimer snd_pcm
rmmod: ERROR: Module snd is in use by: snd_hda_codec_generic snd_seq snd_seq_device snd_hda_codec_hdmi snd_hwdep snd_hda_codec_cs8409 snd_hda_intel snd_hda_codec snd_sof snd_timer snd_compress snd_soc_core snd_pcm
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ ÙˆØ§Ø¶Ø­Ù‡ - Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ ØªÙˆØ³Ø· Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø± Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù‡Ø³ØªÙ†Ø¯. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª Ø³ÛŒØ³ØªÙ…Ø§ØªÛŒÚ© Ø­Ù„ Ú©Ù†ÛŒÙ…:
Ø§Ø¨ØªØ¯Ø§ Ø¨ÛŒØ§ÛŒÛŒØ¯ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø¨Ø³ØªÙ‡
lsmod | grep snd

# Ø¨Ø±Ø±Ø³ÛŒ processes Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØµØ¯Ø§
lsof /dev/snd/*

Ø±Ø§Ù‡ Ø­Ù„: Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ø§Ù…Ù„ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
bash

# Ø§Ø¨ØªØ¯Ø§ ØªÙ…Ø§Ù… Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ØµØ¯Ø§ Ø±Ùˆ Ù…ØªÙˆÙ‚Ù Ú©Ù†ÛŒÙ…
sudo systemctl stop pulseaudio.socket
sudo systemctl stop pulseaudio.service
pulseaudio -k 2>/dev/null || true

# Ø­Ø§Ù„Ø§ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø±Ùˆ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ unload Ú©Ù†ÛŒÙ…
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe -r snd_hda_codec_generic
sudo modprobe -r snd_hda_codec_hdmi
sudo modprobe -r snd_soc_hda_codec
sudo modprobe -r snd_hda_intel
sudo modprobe -r snd_soc_avs
sudo modprobe -r snd_sof_intel_hda
sudo modprobe -r snd_sof
sudo modprobe -r snd_soc_core
sudo modprobe -r snd_pcm
sudo modprobe -r snd_timer
sudo modprobe -r snd

# ØµØ¨Ø± Ú©Ù†ÛŒØ¯
sleep 2

# Ø­Ø§Ù„Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù…Ø§Ú˜ÙˆÙ„ Ø§ØµÙ„ÛŒ Ø±Ùˆ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ú©â€ŒØ¨ÙˆÚ© load Ú©Ù†ÛŒÙ…
sudo modprobe snd_hda_intel model=mbp16

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ… Ú©Ù‡ Ù…Ø§Ú˜ÙˆÙ„ load Ø´Ø¯Ù‡
lsmod | grep snd_hda_intel

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ø±ÙˆØ´ force Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² options force-reload
sudo alsa force-reload

# ÛŒØ§
sudo apt install --reinstall alsa-base alsa-utils

Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ø­Ù„ Ù…Ø´Ú©Ù„:
bash

#!/bin/bash
# Force Audio Fix for MacBook
# Author: Buddha

set -e

echo "=== Force Audio Fix for MacBook ==="

# 1. Stop all audio services
echo "[1/5] Stopping audio services..."
sudo systemctl stop pulseaudio.socket 2>/dev/null || true
sudo systemctl stop pulseaudio.service 2>/dev/null || true
pulseaudio -k 2>/dev/null || true
sleep 2

# 2. Kill all audio processes
echo "[2/5] Killing audio processes..."
sudo pkill -9 pulseaudio 2>/dev/null || true
sudo pkill -9 alsa 2>/dev/null || true
sleep 1

# 3. Force unload all audio modules
echo "[3/5] Force unloading audio modules..."
sudo modprobe -r snd_hda_codec_cs8409 2>/dev/null || true
sudo modprobe -r snd_hda_codec_generic 2>/dev/null || true
sudo modprobe -r snd_hda_codec_hdmi 2>/dev/null || true
sudo modprobe -r snd_soc_hda_codec 2>/dev/null || true
sudo modprobe -r snd_hda_intel 2>/dev/null || true
sudo modprobe -r snd_soc_avs 2>/dev/null || true
sudo modprobe -r snd_sof_intel_hda 2>/dev/null || true
sudo modprobe -r snd_sof 2>/dev/null || true
sudo modprobe -r snd_soc_core 2>/dev/null || true
sudo modprobe -r snd_pcm 2>/dev/null || true
sudo modprobe -r snd_timer 2>/dev/null || true
sudo modprobe -r snd 2>/dev/null || true
sleep 3

# 4. Configure ALSA for MacBook
echo "[4/5] Configuring ALSA for MacBook..."
sudo tee /etc/modprobe.d/macbook-audio.conf > /dev/null <<'EOF'
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel probe_mask=1
options snd-hda-intel power_save=0
options snd-hda-intel enable=1
EOF

# 5. Load audio modules
echo "[5/5] Loading audio modules..."
sudo modprobe snd_hda_intel model=mbp16
sleep 2

# Start PulseAudio
pulseaudio --start

echo "=== Fix completed! ==="
echo "Please reboot your system: sudo reboot"

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

# Ø°Ø®ÛŒØ±Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª
nano force_audio_fix.sh
chmod +x force_audio_fix.sh
sudo ./force_audio_fix.sh

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ø¨Ù‡ØªØ±ÛŒÙ† Ø±Ø§Ù‡ Ø±ÛŒØ³ØªØ§Ø±Øª Ø³ÛŒØ³ØªÙ… Ù‡Ø³Øª:
bash

# Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ø±Ø¯Ù† Ø³ÛŒØ³ØªÙ…
sudo reboot

Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª ØµØ¯Ø§
lsmod | grep snd
aplay -l

# ØªØ³Øª ØµØ¯Ø§
speaker-test -t wav -c 2

# Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯
sudo alsa force-reload

Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ù…Ø´Ú©Ù„ØŒ Ø§ÛŒÙ† Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ Ø±Ùˆ Ø¨ÙØ±Ø³ØªÛŒØ¯:
bash

# Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ ØµØ¯Ø§
dmesg | grep -i snd | tail -20
dmesg | grep -i audio | tail -10
lsmod | grep snd
ls /dev/snd/

Ù…Ø´Ú©Ù„ Ø´Ù…Ø§ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ Ø¨Ù‡ Ù‡Ù… ÙˆØ§Ø¨Ø³ØªÙ‡ Ù‡Ø³ØªÙ†Ø¯ Ùˆ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ Ø¯Ø±Ø³Øª unload Ø¨Ø´Ù†. Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø§Ù„Ø§ Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª Ø§Ù…Ù† Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒØ¯Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ÛŒ ÙˆØ§Ø¨Ø³ØªÙ‡
lsmod | grep snd

# Ø¨Ø±Ø±Ø³ÛŒ processes Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØµØ¯Ø§
lsof /dev/snd/*
snd_seq_dummy          12288  0
snd_hrtimer            12288  1
snd_seq               110592  7 snd_seq_dummy
snd_seq_device         16384  1 snd_seq
snd_sof_pci_intel_skl    24576  0
snd_sof_intel_hda_generic    36864  1 snd_sof_pci_intel_skl
soundwire_intel        73728  1 snd_sof_intel_hda_generic
snd_sof_intel_hda_common   184320  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_soc_hdac_hda       28672  1 snd_sof_intel_hda_common
snd_sof_intel_hda_mlink    36864  3 soundwire_intel,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_sof_intel_hda      24576  2 snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_sof_pci            24576  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_sof_xtensa_dsp     16384  1 snd_sof_intel_hda_generic
snd_sof               389120  5 snd_sof_pci,snd_sof_intel_hda_common,snd_sof_intel_hda_generic,snd_sof_intel_hda,snd_sof_pci_intel_skl
snd_sof_utils          16384  1 snd_sof
snd_soc_acpi_intel_match   118784  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_soc_acpi           16384  2 snd_soc_acpi_intel_match,snd_sof_intel_hda_generic
snd_soc_avs           212992  0
snd_soc_hda_codec      24576  1 snd_soc_avs
snd_hda_ext_core       36864  6 snd_soc_avs,snd_soc_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda_mlink,snd_sof_intel_hda
snd_hda_codec_hdmi     98304  1
snd_soc_core          421888  6 snd_soc_avs,snd_soc_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_soc_hdac_hda
snd_hda_codec_cs8409    36864  1
snd_hda_codec_generic   114688  1 snd_hda_codec_cs8409
snd_compress           28672  2 snd_soc_avs,snd_soc_core
snd_pcm_dmaengine      16384  1 snd_soc_core
snd_hda_intel          61440  1
snd_intel_dspcfg       40960  5 snd_soc_avs,snd_hda_intel,snd_sof,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_intel_sdw_acpi     16384  2 snd_intel_dspcfg,snd_sof_intel_hda_generic
snd_hda_codec         217088  8 snd_hda_codec_generic,snd_soc_avs,snd_hda_codec_hdmi,snd_soc_hda_codec,snd_hda_codec_cs8409,snd_hda_intel,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hda_core          143360  11 snd_hda_codec_generic,snd_soc_avs,snd_hda_codec_hdmi,snd_soc_hda_codec,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_ext_core,snd_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hwdep              20480  1 snd_hda_codec
snd_pcm               188416  13 snd_soc_avs,snd_hda_codec_hdmi,snd_hda_intel,snd_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_compress,snd_soc_core,snd_sof_utils,snd_hda_core,snd_sof_pci_intel_skl,snd_pcm_dmaengine
snd_timer              53248  3 snd_seq,snd_hrtimer,snd_pcm
snd                   151552  17 snd_hda_codec_generic,snd_seq,snd_seq_device,snd_hda_codec_hdmi,snd_hwdep,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_codec,snd_sof,snd_timer,snd_compress,snd_soc_core,snd_pcm
soundcore              16384  1 snd
COMMAND   PID   USER FD   TYPE DEVICE SIZE/OFF NODE NAME
pipewire  881 buddha 57u   CHR  116,1      0t0  378 /dev/snd/seq
pipewire  881 buddha 58u   CHR  116,1      0t0  378 /dev/snd/seq
wireplumb 886 buddha 25u   CHR  116,7      0t0  567 /dev/snd/controlC0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§Ø¨ØªØ¯Ø§ ØªÙ…Ø§Ù… Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ØµØ¯Ø§ Ø±Ùˆ Ù…ØªÙˆÙ‚Ù Ú©Ù†ÛŒÙ…
sudo systemctl stop pulseaudio.socket
sudo systemctl stop pulseaudio.service
pulseaudio -k 2>/dev/null || true

# Ø­Ø§Ù„Ø§ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ Ø±Ùˆ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ unload Ú©Ù†ÛŒÙ…
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe -r snd_hda_codec_generic
sudo modprobe -r snd_hda_codec_hdmi
sudo modprobe -r snd_soc_hda_codec
sudo modprobe -r snd_hda_intel
sudo modprobe -r snd_soc_avs
sudo modprobe -r snd_sof_intel_hda
sudo modprobe -r snd_sof
sudo modprobe -r snd_soc_core
sudo modprobe -r snd_pcm
sudo modprobe -r snd_timer
sudo modprobe -r snd

# ØµØ¨Ø± Ú©Ù†ÛŒØ¯
sleep 2

# Ø­Ø§Ù„Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù…Ø§Ú˜ÙˆÙ„ Ø§ØµÙ„ÛŒ Ø±Ùˆ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ú©<200c>Ø¨ÙˆÚ© load Ú©Ù†ÛŒÙ…
sudo modprobe snd_hda_intel model=mbp16

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ… Ú©Ù‡ Ù…Ø§Ú˜ÙˆÙ„ load Ø´Ø¯Ù‡
lsmod | grep snd_hda_intel
Failed to stop pulseaudio.socket: Unit pulseaudio.socket not loaded.
Failed to stop pulseaudio.service: Unit pulseaudio.service not loaded.
modprobe: FATAL: Module snd_hda_codec_cs8409 is in use.
modprobe: FATAL: Module snd_hda_codec_generic is in use.
modprobe: FATAL: Module snd_hda_codec_hdmi is in use.
modprobe: FATAL: Module snd_soc_hda_codec is in use.
modprobe: FATAL: Module snd_hda_intel is in use.
modprobe: FATAL: Module snd_sof_intel_hda is in use.
modprobe: FATAL: Module snd_sof is in use.
modprobe: FATAL: Module snd_soc_core is in use.
modprobe: FATAL: Module snd_pcm is in use.
modprobe: FATAL: Module snd_timer is in use.
modprobe: FATAL: Module snd is in use.
snd_hda_intel          61440  1
snd_intel_dspcfg       40960  4 snd_hda_intel,snd_sof,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_hda_codec         217088  6 snd_hda_codec_generic,snd_hda_codec_hdmi,snd_hda_codec_cs8409,snd_hda_intel,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hda_core          143360  9 snd_hda_codec_generic,snd_hda_codec_hdmi,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_ext_core,snd_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda
snd_pcm               188416  12 snd_hda_codec_hdmi,snd_hda_intel,snd_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_compress,snd_soc_core,snd_sof_utils,snd_hda_core,snd_sof_pci_intel_skl,snd_pcm_dmaengine
snd                   151552  17 snd_hda_codec_generic,snd_seq,snd_seq_device,snd_hda_codec_hdmi,snd_hwdep,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_codec,snd_sof,snd_timer,snd_compress,snd_soc_core,snd_pcm
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² options force-reload
sudo alsa force-reload

# ÛŒØ§
sudo apt install --reinstall alsa-base alsa-utils
sudo: alsa: command not found
Error: Unable to locate package alsa-base
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ ÙˆØ§Ø¶Ø­Ù‡! Ø³ÛŒØ³ØªÙ… Ø´Ù…Ø§ Ø§Ø² PipeWire Ø¨Ù‡ Ø¬Ø§ÛŒ PulseAudio Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù‡ Ùˆ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ ØªÙˆØ³Ø· processes Ù…Ø®ØªÙ„ÙÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù‡Ø³ØªÙ†Ø¯. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¯Ø±Ø³ØªØ´ Ú©Ù†ÛŒÙ…:
Ø§Ø¨ØªØ¯Ø§ PipeWire Ø±Ùˆ Ù…ØªÙˆÙ‚Ù Ú©Ù†ÛŒÙ…:
bash

# ØªÙˆÙ‚Ù PipeWire
systemctl --user stop pipewire pipewire-pulse wireplumber

# kill Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… processes ØµØ¯Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber
pkill -9 pulseaudio 2>/dev/null || true

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù‡ Ù‡ÛŒÚ† process ØµØ¯Ø§ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ù†ÛŒØ³Øª
ps aux | grep -E "(pipewire|wireplumber|pulseaudio)"

Ø­Ø§Ù„Ø§ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø±Ùˆ unload Ú©Ù†ÛŒÙ…:
bash

# Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒÙ… Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø±Ùˆ unload Ú©Ù†ÛŒÙ…
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe -r snd_hda_codec_generic
sudo modprobe -r snd_hda_codec_hdmi
sudo modprobe -r snd_soc_hda_codec
sudo modprobe -r snd_hda_intel
sudo modprobe -r snd_soc_avs
sudo modprobe -r snd_sof_intel_hda
sudo modprobe -r snd_sof
sudo modprobe -r snd_soc_core
sudo modprobe -r snd_pcm
sudo modprobe -r snd_timer
sudo modprobe -r snd

sleep 2

Ø­Ø§Ù„Ø§ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª MacBook Ø¯ÙˆØ¨Ø§Ø±Ù‡ load Ú©Ù†ÛŒÙ…:
bash

# Load Ù…Ø§Ú˜ÙˆÙ„ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª MacBook
sudo modprobe snd_hda_intel model=mbp16

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…
lsmod | grep snd_hda_intel

Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ PipeWire:
bash

#!/bin/bash
# Audio Fix for MacBook with PipeWire
# Author: Buddha

set -e

echo "=== Audio Fix for MacBook (PipeWire) ==="

# 1. Stop PipeWire services
echo "[1/5] Stopping PipeWire services..."
systemctl --user stop pipewire pipewire-pulse wireplumber 2>/dev/null || true
sudo pkill -9 pipewire 2>/dev/null || true
sudo pkill -9 wireplumber 2>/dev/null || true
pkill -9 pulseaudio 2>/dev/null || true
sleep 2

# 2. Check for any remaining audio processes
echo "[2/5] Killing any remaining audio processes..."
sudo pkill -9 -f "audio" 2>/dev/null || true
sudo pkill -9 -f "snd" 2>/dev/null || true
sleep 1

# 3. Unload audio modules
echo "[3/5] Unloading audio modules..."
sudo modprobe -r snd_hda_codec_cs8409 2>/dev/null || true
sudo modprobe -r snd_hda_codec_generic 2>/dev/null || true
sudo modprobe -r snd_hda_codec_hdmi 2>/dev/null || true
sudo modprobe -r snd_soc_hda_codec 2>/dev/null || true
sudo modprobe -r snd_hda_intel 2>/dev/null || true
sudo modprobe -r snd_soc_avs 2>/dev/null || true
sudo modprobe -r snd_sof_intel_hda 2>/dev/null || true
sudo modprobe -r snd_sof 2>/dev/null || true
sudo modprobe -r snd_soc_core 2>/dev/null || true
sudo modprobe -r snd_pcm 2>/dev/null || true
sudo modprobe -r snd_timer 2>/dev/null || true
sudo modprobe -r snd 2>/dev/null || true
sleep 3

# 4. Configure ALSA for MacBook
echo "[4/5] Configuring ALSA for MacBook..."
sudo tee /etc/modprobe.d/macbook-audio.conf > /dev/null <<'EOF'
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel probe_mask=1
options snd-hda-intel power_save=0
options snd-hda-intel enable=1
EOF

# 5. Load audio modules
echo "[5/5] Loading audio modules..."
sudo modprobe snd_hda_intel model=mbp16
sleep 2

# Start PipeWire services
echo "Starting PipeWire services..."
systemctl --user start wireplumber pipewire pipewire-pulse

echo "=== Fix completed! ==="
echo "Testing audio devices:"
aplay -l 2>/dev/null || echo "aplay not available"

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

# Ø°Ø®ÛŒØ±Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª
nano fix_audio_pipewire.sh
chmod +x fix_audio_pipewire.sh
./fix_audio_pipewire.sh

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ø±ÙˆØ´ force Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² force remove
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true

# Ø³Ù¾Ø³ Ø¯ÙˆØ¨Ø§Ø±Ù‡ load Ú©Ù†ÛŒØ¯
sudo modprobe snd_hda_intel model=mbp16

Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾ØªØŒ ØªØ³Øª Ú©Ù†ÛŒØ¯:
bash

# ØªØ³Øª ØµØ¯Ø§
spe

â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù PipeWire
systemctl --user stop pipewire pipewire-pulse wireplumber

# kill Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… processes ØµØ¯Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber
pkill -9 pulseaudio 2>/dev/null || true

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù‡ Ù‡ÛŒÚ† process ØµØ¯Ø§ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ù†ÛŒØ³Øª
ps aux | grep -E "(pipewire|wireplumber|pulseaudio)"
Stopping 'pipewire.service', but its triggering units are still active:
pipewire.socket
Stopping 'pipewire-pulse.service', but its triggering units are still active:
pipewire-pulse.socket
buddha      1077  0.0  0.2 358340 38192 ?        Sl   01:59   0:00 /usr/lib/x86_64-linux-gnu/xfce4/panel/wrapper-2.0 /usr/lib/x86_64-linux-gnu/xfce4/panel/plugins/libpulseaudio-plugin.so 16 16777231 pulseaudio PulseAudio Plugin Adjust the audio volume of the PulseAudio sound system
buddha      4169  0.0  0.0   7076  2184 pts/0    S+   02:03   0:00 grep --color=auto -E (pipewire|wireplumber|pulseaudio)
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø­Ø§Ù„Ø§ Ù…ÛŒ<200c>ØªÙˆÙ†ÛŒÙ… Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ Ø±Ùˆ unload Ú©Ù†ÛŒÙ…
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe -r snd_hda_codec_generic
sudo modprobe -r snd_hda_codec_hdmi
sudo modprobe -r snd_soc_hda_codec
sudo modprobe -r snd_hda_intel
sudo modprobe -r snd_soc_avs
sudo modprobe -r snd_sof_intel_hda
sudo modprobe -r snd_sof
sudo modprobe -r snd_soc_core
sudo modprobe -r snd_pcm
sudo modprobe -r snd_timer
sudo modprobe -r snd

sleep 2
modprobe: FATAL: Module snd_hda_codec_cs8409 is in use.
modprobe: FATAL: Module snd_hda_codec_generic is in use.
modprobe: FATAL: Module snd_hda_codec_hdmi is in use.
modprobe: FATAL: Module snd_hda_intel is in use.
modprobe: FATAL: Module snd_sof_intel_hda is in use.
modprobe: FATAL: Module snd_sof is in use.
modprobe: FATAL: Module snd_soc_core is in use.
modprobe: FATAL: Module snd_pcm is in use.
modprobe: FATAL: Module snd_timer is in use.
modprobe: FATAL: Module snd is in use.
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Load Ù…Ø§Ú˜ÙˆÙ„ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª MacBook
sudo modprobe snd_hda_intel model=mbp16

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…
lsmod | grep snd_hda_intel
snd_hda_intel          61440  1
snd_intel_dspcfg       40960  4 snd_hda_intel,snd_sof,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_hda_codec         217088  6 snd_hda_codec_generic,snd_hda_codec_hdmi,snd_hda_codec_cs8409,snd_hda_intel,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hda_core          143360  9 snd_hda_codec_generic,snd_hda_codec_hdmi,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_ext_core,snd_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda
snd_pcm               188416  12 snd_hda_codec_hdmi,snd_hda_intel,snd_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_compress,snd_soc_core,snd_sof_utils,snd_hda_core,snd_sof_pci_intel_skl,snd_pcm_dmaengine
snd                   151552  17 snd_hda_codec_generic,snd_seq,snd_seq_device,snd_hda_codec_hdmi,snd_hwdep,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_codec,snd_sof,snd_timer,snd_compress,snd_soc_core,snd_pcm
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ Ø­ØªÛŒ Ù¾Ø³ Ø§Ø² Ù…ØªÙˆÙ‚Ù Ú©Ø±Ø¯Ù† Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ØŒ Ø¨Ø±Ø®ÛŒ processes Ù‡Ù†ÙˆØ² Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ Ù‡Ø³ØªÙ†Ø¯. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§Ø² Ø±ÙˆØ´ Ù‚ÙˆÛŒâ€ŒØªØ±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
Ø§Ø¨ØªØ¯Ø§ sockets Ø±Ùˆ Ù‡Ù… Ù…ØªÙˆÙ‚Ù Ú©Ù†ÛŒÙ…:
bash

# ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ PipeWire Ø´Ø§Ù…Ù„ sockets
systemctl --user stop pipewire.socket pipewire-pulse.socket
systemctl --user stop pipewire pipewire-pulse wireplumber

# kill Ø´Ø¯ÛŒØ¯ ØªÙ…Ø§Ù… processes
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio

# Ø¨Ø±Ø±Ø³ÛŒ processes Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡
ps aux | grep -E "(pipewire|wireplumber|pulseaudio|audio)"

Ø­Ø§Ù„Ø§ Ø¨ÛŒØ§ÛŒÛŒØ¯ processesØ§ÛŒ Ú©Ù‡ Ø§Ø² /dev/snd Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ Ø±Ùˆ Ù¾ÛŒØ¯Ø§ Ùˆ kill Ú©Ù†ÛŒÙ…:
bash

# Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† processesØ§ÛŒ Ú©Ù‡ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯
sudo lsof /dev/snd/* | awk '{print $2}' | uniq | grep -v PID

# kill Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… processes Ù…Ø±ØªØ¨Ø· Ø¨Ø§ ØµØ¯Ø§
for pid in $(sudo lsof /dev/snd/* 2>/dev/null | awk '{print $2}' | uniq | grep -v PID); do
    sudo kill -9 $pid 2>/dev/null
done

# kill Ú©Ø±Ø¯Ù† processes Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ø§Ù…
sudo pkill -9 -f "xfce4-panel"  # Ù¾Ù„Ø§Ú¯ÛŒÙ† ØµØ¯Ø§ Ø¯Ø± XFCE
sudo pkill -9 -f "volumeicon"
sudo pkill -9 -f "audio"

Ø­Ø§Ù„Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒÙ…:
bash

# unload Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe -r snd_hda_codec_generic
sudo modprobe -r snd_hda_codec_hdmi
sudo modprobe -r snd_soc_hda_codec
sudo modprobe -r snd_hda_intel
sudo modprobe -r snd_soc_avs
sudo modprobe -r snd_sof_intel_hda
sudo modprobe -r snd_sof
sudo modprobe -r snd_soc_core
sudo modprobe -r snd_pcm
sudo modprobe -r snd_timer
sudo modprobe -r snd

sleep 2

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² rmmod -f Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² force remove
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_codec_generic 2>/dev/null || true
sudo rmmod -f snd_hda_codec_hdmi 2>/dev/null || true
sudo rmmod -f snd 2>/dev/null || true

sleep 3

Ø­Ø§Ù„Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ load Ú©Ù†ÛŒÙ…:
bash

# Load Ù…Ø§Ú˜ÙˆÙ„ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª MacBook
sudo modprobe snd_hda_intel model=mbp16

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…
lsmod | grep snd_hda_intel

Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø§ Ø±ÙˆØ´ Ù‚ÙˆÛŒ:
bash

#!/bin/bash
# Force Audio Fix for MacBook with PipeWire
# Author: Buddha

set -e

echo "=== Force Audio Fix for MacBook (PipeWire) ==="

# 1. Stop all PipeWire services and sockets
echo "[1/6] Stopping all audio services..."
systemctl --user stop pipewire.socket pipewire-pulse.socket 2>/dev/null || true
systemctl --user stop pipewire pipewire-pulse wireplumber 2>/dev/null || true

# 2. Kill all audio processes violently
echo "[2/6] Killing all audio processes..."
sudo pkill -9 -f pipewire 2>/dev/null || true
sudo pkill -9 -f wireplumber 2>/dev/null || true
sudo pkill -9 -f pulseaudio 2>/dev/null || true
sudo pkill -9 -f "audio" 2>/dev/null || true
sudo pkill -9 -f "snd" 2>/dev/null || true
sudo pkill -9 -f "xfce4-panel" 2>/dev/null || true

# 3. Kill processes using audio devices
echo "[3/6] Killing processes using audio devices..."
for pid in $(sudo lsof /dev/snd/* 2>/dev/null | awk '{print $2}' | uniq | grep -v PID); do
    sudo kill -9 $pid 2>/dev/null
done

# 4. Force unload audio modules
echo "[4/6] Force unloading audio modules..."
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_codec_generic 2>/dev/null || true
sudo rmmod -f snd_hda_codec_hdmi 2>/dev/null || true
sudo rmmod -f snd_soc_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_soc_avs 2>/dev/null || true
sudo rmmod -f snd_sof_intel_hda 2>/dev/null || true
sudo rmmod -f snd_sof 2>/dev/null || true
sudo rmmod -f snd_soc_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sudo rmmod -f snd_timer 2>/dev/null || true
sudo rmmod -f snd 2>/dev/null || true
sleep 3

# 5. Configure ALSA for MacBook

â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù PipeWire
systemctl --user stop pipewire pipewire-pulse wireplumber

# kill Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… processes ØµØ¯Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber
pkill -9 pulseaudio 2>/dev/null || true

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù‡ Ù‡ÛŒÚ† process ØµØ¯Ø§ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ù†ÛŒØ³Øª
ps aux | grep -E "(pipewire|wireplumber|pulseaudio)"
Stopping 'pipewire.service', but its triggering units are still active:
pipewire.socket
Stopping 'pipewire-pulse.service', but its triggering units are still active:
pipewire-pulse.socket
buddha      1077  0.0  0.2 358340 38192 ?        Sl   01:59   0:00 /usr/lib/x86_64-linux-gnu/xfce4/panel/wrapper-2.0 /usr/lib/x86_64-linux-gnu/xfce4/panel/plugins/libpulseaudio-plugin.so 16 16777231 pulseaudio PulseAudio Plugin Adjust the audio volume of the PulseAudio sound system
buddha      4169  0.0  0.0   7076  2184 pts/0    S+   02:03   0:00 grep --color=auto -E (pipewire|wireplumber|pulseaudio)
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø­Ø§Ù„Ø§ Ù…ÛŒ<200c>ØªÙˆÙ†ÛŒÙ… Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ Ø±Ùˆ unload Ú©Ù†ÛŒÙ…
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe -r snd_hda_codec_generic
sudo modprobe -r snd_hda_codec_hdmi
sudo modprobe -r snd_soc_hda_codec
sudo modprobe -r snd_hda_intel
sudo modprobe -r snd_soc_avs
sudo modprobe -r snd_sof_intel_hda
sudo modprobe -r snd_sof
sudo modprobe -r snd_soc_core
sudo modprobe -r snd_pcm
sudo modprobe -r snd_timer
sudo modprobe -r snd

sleep 2
modprobe: FATAL: Module snd_hda_codec_cs8409 is in use.
modprobe: FATAL: Module snd_hda_codec_generic is in use.
modprobe: FATAL: Module snd_hda_codec_hdmi is in use.
modprobe: FATAL: Module snd_hda_intel is in use.
modprobe: FATAL: Module snd_sof_intel_hda is in use.
modprobe: FATAL: Module snd_sof is in use.
modprobe: FATAL: Module snd_soc_core is in use.
modprobe: FATAL: Module snd_pcm is in use.
modprobe: FATAL: Module snd_timer is in use.
modprobe: FATAL: Module snd is in use.
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Load Ù…Ø§Ú˜ÙˆÙ„ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª MacBook
sudo modprobe snd_hda_intel model=mbp16

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…
lsmod | grep snd_hda_intel
snd_hda_intel          61440  1
snd_intel_dspcfg       40960  4 snd_hda_intel,snd_sof,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_hda_codec         217088  6 snd_hda_codec_generic,snd_hda_codec_hdmi,snd_hda_codec_cs8409,snd_hda_intel,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hda_core          143360  9 snd_hda_codec_generic,snd_hda_codec_hdmi,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_ext_core,snd_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda
snd_pcm               188416  12 snd_hda_codec_hdmi,snd_hda_intel,snd_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_compress,snd_soc_core,snd_sof_utils,snd_hda_core,snd_sof_pci_intel_skl,snd_pcm_dmaengine
snd                   151552  17 snd_hda_codec_generic,snd_seq,snd_seq_device,snd_hda_codec_hdmi,snd_hwdep,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_codec,snd_sof,snd_timer,snd_compress,snd_soc_core,snd_pcm
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ PipeWire Ø´Ø§Ù…Ù„ sockets
systemctl --user stop pipewire.socket pipewire-pulse.socket
systemctl --user stop pipewire pipewire-pulse wireplumber

# kill Ø´Ø¯ÛŒØ¯ ØªÙ…Ø§Ù… processes
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio

# Ø¨Ø±Ø±Ø³ÛŒ processes Ø¨Ø§Ù‚ÛŒ<200c>Ù…Ø§Ù†Ø¯Ù‡
ps aux | grep -E "(pipewire|wireplumber|pulseaudio|audio)"
zsh: killed     sudo pkill -9 -f pipewire
                                         zsh: killed     sudo pkill -9 -f wireplumber
          zsh: killed     sudo pkill -9 -f pulseaudio
                                                     buddha      4707  0.0  0.0   7080  2044 pts/0    S+   02:04   0:00 grep --color=auto -E (pipewire|wireplumber|pulseaudio|audio)
                                                                                                         
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
                          â””â”€$ # Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† processesØ§ÛŒ Ú©Ù‡ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§# Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† processesØ§ÛŒ Ú©Ù‡ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒ<200c>Ú©Ù†Ù†Ø¯
sudo lsof /dev/snd/* | awk '{print $2}' | uniq | grep -v PID

# kill Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… processes Ù…Ø±ØªØ¨Ø· Ø¨Ø§ ØµØ¯Ø§
for pid in $(sudo lsof /dev/snd/* 2>/dev/null | awk '{print $2}' | uniq | grep -v PID); do
    sudo kill -9 $pid 2>/dev/null
done

# kill Ú©Ø±Ø¯Ù† processes Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ø§Ù…
sudo pkill -9 -f "xfce4-panel"  # Ù¾Ù„Ø§Ú¯ÛŒÙ† ØµØ¯Ø§ Ø¯Ø± XFCE
sudo pkill -9 -f "volumeicon"
sudo pkill -9 -f "audio"
lsof: WARNING: can't stat() fuse.gvfsd-fuse file system /run/user/1000/gvfs
      Output information may be incomplete.
                                           lsof: WARNING: can't stat() fuse.portal file system /run/user/1000/doc
                                            Output information may be incomplete.
      zsh: killed     sudo pkill -9 -f "xfce4-panel"
                                                    zsh: killed     sudo pkill -9 -f "volumeicon"
                      zsh: killed     sudo pkill -9 -f "audio"
                                                                                                                                         
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
    # unload Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§â””â”€$ # unload Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe -r snd_hda_codec_generic
sudo modprobe -r snd_hda_codec_hdmi
sudo modprobe -r snd_soc_hda_codec
sudo modprobe -r snd_hda_intel
sudo modprobe -r snd_soc_avs
sudo modprobe -r snd_sof_intel_hda
sudo modprobe -r snd_sof
sudo modprobe -r snd_soc_core
sudo modprobe -r snd_pcm
sudo modprobe -r snd_timer
sudo modprobe -r snd

sleep 2
modprobe: FATAL: Module snd_hda_codec_cs8409 is in use.
                                                       modprobe: FATAL: Module snd_hda_codec_generic is in use.
                                    modprobe: FATAL: Module snd_hda_codec_hdmi is in use.
              modprobe: FATAL: Module snd_sof_intel_hda is in use.
                                                                  modprobe: FATAL: Module snd_sof is in use.
                                 modprobe: FATAL: Module snd_soc_core is in use.
     modprobe: FATAL: Module snd_pcm is in use.
                                               modprobe: FATAL: Module snd_timer is in use.
                modprobe: FATAL: Module snd is in use.
                                                                                                                                 
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]

Ù…Ø´Ú©Ù„ Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø±Ù‡! Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§Ø² ÛŒÚ© Ø±ÙˆØ´ Ú©Ø§Ù…Ù„Ø§Ù‹ Ù…ØªÙØ§ÙˆØª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…. Ø¨Ù‡ Ø¬Ø§ÛŒ unload Ú©Ø±Ø¯Ù† Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ØŒ Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ùˆ Ø§Ø¹Ù…Ø§Ù„ Ú©Ù†ÛŒÙ… Ùˆ Ø³ÛŒØ³ØªÙ… Ø±Ùˆ Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ù†ÛŒÙ…:
Ø±ÙˆØ´ Ø³Ø§Ø¯Ù‡â€ŒØªØ± Ùˆ Ù…Ø·Ù…Ø¦Ù†â€ŒØªØ±:
bash

# 1. Ø§Ø¨ØªØ¯Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ALSA Ø¨Ø±Ø§ÛŒ MacBook Ø±Ùˆ Ø§Ø¹Ù…Ø§Ù„ Ú©Ù†ÛŒÙ…
echo 'options snd-hda-intel model=mbp16' | sudo tee /etc/modprobe.d/macbook-audio.conf
echo 'options snd-hda-intel position_fix=1' | sudo tee -a /etc/modprobe.d/macbook-audio.conf
echo 'options snd-hda-intel power_save=0' | sudo tee -a /etc/modprobe.d/macbook-audio.conf

# 2. initramfs Ø±Ùˆ Ø¢Ù¾Ø¯ÛŒØª Ú©Ù†ÛŒÙ…
sudo update-initramfs -u

# 3. Ø³ÛŒØ³ØªÙ… Ø±Ùˆ Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ù†ÛŒÙ…
echo "Please reboot your system now: sudo reboot"

Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
bash

# Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯
dmesg | grep -i snd | tail -10
aplay -l

Ø§Ú¯Ø± Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

#!/bin/bash
# MacBook Audio Configuration Script
# After reboot, run this script

# Check current audio configuration
echo "=== Audio Configuration Status ==="
dmesg | grep -i "snd.*model" | tail -5

# Test if the configuration was applied
if grep -q "model=mbp16" /etc/modprobe.d/macbook-audio.conf 2>/dev/null; then
    echo "âœ“ MacBook audio configuration is set"
else
    echo "âœ— Configuration not found, setting it now..."
    echo 'options snd-hda-intel model=mbp16' | sudo tee /etc/modprobe.d/macbook-audio.conf
    echo 'options snd-hda-intel position_fix=1' | sudo tee -a /etc/modprobe.d/macbook-audio.conf
    sudo update-initramfs -u
    echo "Please reboot again: sudo reboot"
fi

# List audio devices
echo -e "\n=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "aplay not available. Checking ALSA devices:"
    ls /dev/snd/ 2>/dev/null || true
}

# Check PulseAudio/PipeWire status
echo -e "\n=== Audio Service Status ==="
if systemctl --user is-active pipewire >/dev/null 2>&1; then
    echo "PipeWire: Active"
elif systemctl --user is-active pulseaudio >/dev/null 2>&1; then
    echo "PulseAudio: Active"
else
    echo "No audio service active"
fi

# Test sound
echo -e "\n=== Sound Test ==="
echo "Testing audio output (you should hear sound):"
timeout 5s speaker-test -t wav -c 2 2>/dev/null || \
echo "Speaker test failed or no sound output"

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯ Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª:
bash

nano audio_check.sh
chmod +x audio_check.sh
./audio_check.sh

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ø§ÛŒÙ† Ø±ÙˆØ´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
bash

# Ø±ÙˆØ´ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
# Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø±Ùˆ Ø¨Ø±Ø§ÛŒ MacBook Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯:

sudo tee /etc/modprobe.d/macbook-audio.conf > /dev/null <<'EOF'
# Try different models for MacBook
options snd-hda-intel model=mbp16
# options snd-hda-intel model=mbp15
# options snd-hda-intel model=imac27
# options snd-hda-intel model=auto
EOF

sudo update-initramfs -u
sudo reboot

Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ ÙˆØ¶Ø¹ÛŒØª Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ú†Ù‡ Ù…Ø¯Ù„ÛŒ load Ø´Ø¯Ù‡
dmesg | grep -i "model\|snd\|hda"

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ ØµØ¯Ø§
speaker-test -t wav -c 2

Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ú†ÛŒØ² Ø§ÛŒÙ†Ù‡ Ú©Ù‡ Ø³ÛŒØ³ØªÙ… Ø±Ùˆ Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ù†ÛŒØ¯ ØªØ§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø¹Ù…Ø§Ù„ Ø¨Ø´Ù†. Ø±ÙˆØ´ unload Ú©Ø±Ø¯Ù† Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø¯Ø± Ø­Ø§Ù„ØªÛŒ Ú©Ù‡ Ø³ÛŒØ³ØªÙ… Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§Ø³Øª Ø®ÛŒÙ„ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡â€ŒØ³Øª Ùˆ Ù…Ù…Ú©Ù†Ù‡ Ú©Ø§Ø± Ù†Ú©Ù†Ù‡.
(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯
dmesg | grep -i snd | tail -10
aplay -l
[    7.334445] snd_hda_intel 0000:00:1f.3: bound 0000:00:02.0 (ops i915_audio_component_bind_ops [i915])
[    7.397114] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
[    7.397120] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
[    7.397124] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
[    7.397127] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
[    7.397128] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
[    7.397130] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
[    7.397133] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c
**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ø¹Ø§Ù„ÛŒ! Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ… Ú©Ù‡ Ú©Ø§Ø±Øª ØµØ¯Ø§ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡ Ø§Ù…Ø§ ÙÙ‚Ø· Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ HDMI Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯. Ø§ÛŒÙ† Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ø§Ø³Ù¾ÛŒÚ©Ø± Ø¯Ø§Ø®Ù„ÛŒ MacBook Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ configure Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
bash

# 1. Ø¨Ø±Ø±Ø³ÛŒ codec Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯
cat /proc/asound/card0/codec* | grep -i "codec"

# 2. Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¯Ù„ ÙØ¹Ù„ÛŒ
sudo dmesg | grep -i "model\|hda\|cs8409"

# 3. Ø§Ù…ØªØ­Ø§Ù† Ú©Ø±Ø¯Ù† Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ MacBook
echo "options snd-hda-intel model=mbp16" | sudo tee /etc/modprobe.d/macbook-audio.conf
sudo update-initramfs -u
sudo reboot

Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø±Ùˆ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯:
bash

# Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ MacBook
MODELS=("mbp16" "mbp15" "imac27" "auto" "mbp14" "macbook-pro")

for model in "${MODELS[@]}"; do
    echo "Trying model: $model"
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/macbook-audio.conf
    sudo update-initramfs -u
    sudo modprobe -r snd_hda_intel
    sudo modprobe snd_hda_intel
    sleep 2
    
    if aplay -l | grep -i "pch"; then
        echo "âœ“ Success with model: $model"
        break
    else
        echo "âœ— Failed with model: $model"
    fi
done

Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ø¯Ù„:
bash

#!/bin/bash
# Auto-detect MacBook audio model
# Author: Buddha

echo "=== MacBook Audio Model Detection ==="

# List of known MacBook models to try
MODELS=("mbp16" "mbp15" "mbp14" "mbp13" "mbp12" "imac27" "macbook-pro" "auto")

for model in "${MODELS[@]}"; do
    echo "Testing model: $model"
    
    # Apply model configuration
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/macbook-audio.conf > /dev/null
    sudo update-initramfs -u 2>/dev/null
    
    # Reload audio module
    sudo modprobe -r snd_hda_intel 2>/dev/null
    sudo modprobe snd_hda_intel 2>/dev/null
    sleep 2
    
    # Check if speakers are detected
    if aplay -l 2>/dev/null | grep -v "HDMI" | grep -i "pch\|default"; then
        echo "âœ… SUCCESS! Found working model: $model"
        echo "Working configuration:"
        aplay -l
        exit 0
    fi
    
    # Check using dmesg
    if sudo dmesg | tail -20 | grep -i "cs8409\|hda" | grep -i "autoconfig"; then
        echo "âœ… SUCCESS! Found working model: $model"
        sudo dmesg | tail -10 | grep -i "hda\|audio"
        exit 0
    fi
    
    echo "âŒ Model $model didn't work"
    echo "---"
done

echo "No working model found. Trying manual configuration..."

Ø§Ú¯Ø± Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù… Ø§Ø² Ù…Ø¯Ù„â€ŒÙ‡Ø§ Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø§Ø² Ø§ÛŒÙ† Ø±ÙˆØ´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
bash

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ CS8409 codec
echo "options snd-hda-intel model=cs8409" | sudo tee /etc/modprobe.d/macbook-audio.conf
echo "options snd-hda-codec-cs8409 model=macbook" | sudo tee -a /etc/modprobe.d/macbook-audio.conf

sudo update-initramfs -u
sudo reboot

Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409\|hda\|audio" | tail -20
aplay -l

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯ (Ø§Ø³Ù¾ÛŒÚ©Ø±)
speaker-test -D hw:0,0 -c 2 -t wav

# ÛŒØ§ Ø§Ú¯Ø± Ú©Ø§Ø±Øª Ø¯ÛŒÚ¯Ø±ÛŒ Ø¯Ø§Ø±ÛŒØ¯
speaker-test -D default -c 2 -t wav

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§ÛŒÙ† Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø±Ùˆ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ audio
cat /proc/asound/cards
cat /proc/asound/card0/codec#0

# Ø§Ø·Ù„Ø§Ø¹Ø§Øª codec
for codec in /proc/asound/card0/codec#*; do
    echo "=== $codec ==="
    cat "$codec" | head -50
done

Ø§ÛŒÙ† Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ Ù…Ù† Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù‡ ØªØ§ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ø¨ØªÙˆÙ†Ù… Ù…Ø´Ú©Ù„ Ø±Ùˆ ØªØ´Ø®ÛŒØµ Ø¨Ø¯Ù…. Ù…Ø¯Ù„ MacBook Ø´Ù…Ø§ Ø¨Ù‡ Ù†Ø¸Ø± Ù…ÛŒâ€ŒØ±Ø³Ù‡ Ø§Ø² codec CS8409 Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù‡ Ú©Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø®Ø§ØµÛŒ Ø¯Ø§Ø±Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # 1. Ø¨Ø±Ø±Ø³ÛŒ codec Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯
cat /proc/asound/card0/codec* | grep -i "codec"

# 2. Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¯Ù„ ÙØ¹Ù„ÛŒ
sudo dmesg | grep -i "model\|hda\|cs8409"

# 3. Ø§Ù…ØªØ­Ø§Ù† Ú©Ø±Ø¯Ù† Ù…Ø¯Ù„<200c>Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ MacBook
echo "options snd-hda-intel model=mbp16" | sudo tee /etc/modprobe.d/macbook-audio.conf
sudo update-initramfs -u
Codec: Cirrus Logic CS8409
Codec: Intel Kabylake HDMI
[sudo] password for buddha: 
[    0.060614] smpboot: CPU0: Intel(R) Core(TM) i5-7267U CPU @ 3.10GHz (family: 0x6, model: 0x8e, stepping: 0x9)
[    7.334445] snd_hda_intel 0000:00:1f.3: bound 0000:00:02.0 (ops i915_audio_component_bind_ops [i915])
[    7.397114] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
[    7.397120] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
[    7.397124] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
[    7.397127] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
[    7.397128] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
[    7.397130] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
[    7.397133] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c
[    7.438125] input: HDA Intel PCH HDMI/DP,pcm=3 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input8
[    7.438185] input: HDA Intel PCH HDMI/DP,pcm=7 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input9
[    7.438235] input: HDA Intel PCH HDMI/DP,pcm=8 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input10
options snd-hda-intel model=mbp16
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ø¹Ø§Ù„ÛŒ! Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ… Ú©Ù‡ Ù…Ø´Ú©Ù„ Ù…Ø´Ø®Øµ Ø´Ø¯Ù‡. Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ Ø´Ù…Ø§ Cirrus Logic CS8409 Ù‡Ø³Øª Ùˆ Ø§ØªÙˆÚ©Ø§Ù†ÙÛŒÚ¯ Ø´Ø¯Ù‡ØŒ Ø§Ù…Ø§ Ø®Ø±ÙˆØ¬ÛŒ Ø§Ø³Ù¾ÛŒÚ©Ø± (speaker_outs=0) Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù†Ø´Ø¯Ù‡. ÙÙ‚Ø· Ø®Ø±ÙˆØ¬ÛŒ Ù‡Ø¯ÙÙˆÙ† (hp_outs=1) Ùˆ Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†â€ŒÙ‡Ø§ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.
Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
bash

# 1. Ø§Ø¨ØªØ¯Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ CS8409 Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒÙ…
echo "options snd-hda-codec-cs8409 model=macbook" | sudo tee /etc/modprobe.d/cs8409.conf

# 2. ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ Ø¨Ø±Ø§ÛŒ MacBook
echo "options snd-hda-intel model=mbp16" | sudo tee /etc/modprobe.d/macbook-audio.conf

# 3. Ø¢Ù¾Ø¯ÛŒØª initramfs
sudo update-initramfs -u

# 4. Ø±ÛŒØ³ØªØ§Ø±Øª
echo "Please reboot: sudo reboot"

Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

#!/bin/bash
# CS8409 MacBook Audio Fix
# Author: Buddha

echo "=== CS8409 MacBook Audio Fix ==="

# Stop audio services
systemctl --user stop pipewire pipewire-pulse wireplumber 2>/dev/null || true

# Create custom configuration for CS8409
sudo tee /etc/modprobe.d/cs8409-macbook.conf > /dev/null <<'EOF'
# Cirrus Logic CS8409 configuration for MacBook
options snd-hda-codec-cs8409 model=macbook
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
EOF

# Update initramfs
sudo update-initramfs -u

# Reload modules
sudo modprobe -r snd_hda_codec_cs8409 snd_hda_intel
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

sleep 2

# Start audio services
systemctl --user start wireplumber pipewire pipewire-pulse

echo "=== Checking audio status ==="
dmesg | grep -i "cs8409" | tail -5
aplay -l 2>/dev/null || echo "aplay not available"

echo "=== Test completed ==="

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ø§Ø³Ù¾ÛŒÚ©Ø± Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø§Ø² patch manual Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§ÛŒØ¬Ø§Ø¯ patch Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ CS8409
sudo tee /etc/modprobe.d/cs8409-force.conf > /dev/null <<'EOF'
# Force CS8409 configuration for MacBook speakers
options snd-hda-codec-cs8409 enable=1
options snd-hda-codec-cs8409 index=0
options snd-hda-intel model=auto
EOF

sudo update-initramfs -u
sudo reboot

Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409" | tail -10

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§
speaker-test -D hw:0,0 -c 2 -t wav  # Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯
speaker-test -D hw:0,3 -c 2 -t wav  # HDMI 0
speaker-test -D hw:0,7 -c 2 -t wav  # HDMI 1

Ø§Ú¯Ø± Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù… Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ù…Ù…Ú©Ù†Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ patch kernel Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯:
bash

# Ù†ØµØ¨ kernel headers Ø¨Ø±Ø§ÛŒ compile
sudo apt install linux-headers-$(uname -r)

# Ø¯Ø§Ù†Ù„ÙˆØ¯ Ùˆ compile Ø¯Ø±Ø§ÛŒÙˆØ± CS8409
git clone https://github.com/torvalds/linux.git
cd linux/sound/pci/hda
# Ø¨Ø±Ø±Ø³ÛŒ patch Ù‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ CS8409

Ø±Ø§Ù‡ Ø­Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² PulseAudio configuration
bash

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª PulseAudio Ø¨Ø±Ø§ÛŒ MacBook
mkdir -p ~/.config/pulse
tee ~/.config/pulse/default.pa > /dev/null <<'EOF'
# MacBook audio configuration
load-module module-alsa-sink device=hw:0,0
load-module module-alsa-source device=hw:0,0
set-default-sink alsa_output.hw_0_0
set-default-source alsa_input.hw_0_0
EOF

# Ø±ÛŒØ³ØªØ§Ø±Øª PulseAudio
pulseaudio -k
pulseaudio --start

Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ø±Ú©Ø¯Ø§Ù… Ø§Ø² Ø§ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§ØŒ Ø®Ø±ÙˆØ¬ÛŒ dmesg | grep -i cs8409 Ø±Ùˆ Ú†Ú© Ú©Ù†ÛŒØ¯ ØªØ§ Ø¨Ø¨ÛŒÙ†ÛŒÙ… ÙˆØ¶Ø¹ÛŒØª Ú†Ù‡ ØªØºÛŒÛŒØ±Ø§ØªÛŒ Ú©Ø±Ø¯Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # 1. Ø¨Ø±Ø±Ø³ÛŒ codec Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯
cat /proc/asound/card0/codec* | grep -i "codec"

# 2. Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¯Ù„ ÙØ¹Ù„ÛŒ
sudo dmesg | grep -i "model\|hda\|cs8409"

# 3. Ø§Ù…ØªØ­Ø§Ù† Ú©Ø±Ø¯Ù† Ù…Ø¯Ù„<200c>Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ MacBook
echo "options snd-hda-intel model=mbp16" | sudo tee /etc/modprobe.d/macbook-audio.conf
sudo update-initramfs -u
Codec: Cirrus Logic CS8409
Codec: Intel Kabylake HDMI
[sudo] password for buddha: 
[    0.060614] smpboot: CPU0: Intel(R) Core(TM) i5-7267U CPU @ 3.10GHz (family: 0x6, model: 0x8e, stepping: 0x9)
[    7.334445] snd_hda_intel 0000:00:1f.3: bound 0000:00:02.0 (ops i915_audio_component_bind_ops [i915])
[    7.397114] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
[    7.397120] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
[    7.397124] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
[    7.397127] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
[    7.397128] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
[    7.397130] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
[    7.397133] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c
[    7.438125] input: HDA Intel PCH HDMI/DP,pcm=3 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input8
[    7.438185] input: HDA Intel PCH HDMI/DP,pcm=7 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input9
[    7.438235] input: HDA Intel PCH HDMI/DP,pcm=8 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input10
options snd-hda-intel model=mbp16
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # 1. Ø§Ø¨ØªØ¯Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ CS8409 Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒÙ…
echo "options snd-hda-codec-cs8409 model=macbook" | sudo tee /etc/modprobe.d/cs8409.conf

# 2. ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ Ø¨Ø±Ø§ÛŒ MacBook
echo "options snd-hda-intel model=mbp16" | sudo tee /etc/modprobe.d/macbook-audio.conf

# 3. Ø¢Ù¾Ø¯ÛŒØª initramfs
sudo update-initramfs -u

# 4. Ø±ÛŒØ³ØªØ§Ø±Øª
echo "Please reboot: sudo reboot"
options snd-hda-codec-cs8409 model=macbook
options snd-hda-intel model=mbp16
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
Please reboot: sudo reboot
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ patch Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ CS8409
sudo tee /etc/modprobe.d/cs8409-force.conf > /dev/null <<'EOF'
# Force CS8409 configuration for MacBook speakers
options snd-hda-codec-cs8409 enable=1
options snd-hda-codec-cs8409 index=0
options snd-hda-intel model=auto
EOF

sudo update-initramfs -u
sudo reboot
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ patch Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ CS8409
sudo tee /etc/modprobe.d/cs8409-force.conf > /dev/null <<'EOF'
# Force CS8409 configuration for MacBook speakers
options snd-hda-codec-cs8409 enable=1
options snd-hda-codec-cs8409 index=0
options snd-hda-intel model=auto
EOF

sudo update-initramfs -u

update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$
Length limit reached. Please start a new chat.
New chat

Ù…ØªÙˆØ¬Ù‡ Ø´Ø¯Ù… Ú©Ù‡ Ù…Ø´Ú©Ù„ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ MacBook Ø´Ù…Ø§ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¯Ø±Ø§ÛŒÙˆØ± Cirrus Logic CS8409 Ù‡Ø³Øª Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø§Ø¹Ù…Ø§Ù„ Ù†Ø´Ø¯Ù‡. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
Ø±Ø§Ù‡ Ø­Ù„ Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ Cirrus Logic CS8409
1. Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø®ØªØµØ§ØµÛŒ Ø¨Ø±Ø§ÛŒ CS8409:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ CS8409
sudo tee /etc/modprobe.d/macbook-cs8409.conf > /dev/null <<'EOF'
# Cirrus Logic CS8409 configuration for MacBook Pro
options snd-hda-intel model=mbp16
options snd-hda-codec-cs8409 model=macbook
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=1
EOF

2. Ø¢Ù¾Ø¯ÛŒØª initramfs:
bash

sudo update-initramfs -u

3. Ø±ÛŒÙ„ÙˆØ¯ Ù…Ø§Ú˜ÙˆÙ„ Ù‡Ø§ÛŒ ØµØ¯Ø§:
bash

# ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³ Ù‡Ø§ÛŒ ØµØ¯Ø§
systemctl --user stop pipewire pipewire-pulse wireplumber 2>/dev/null || true

# Ø­Ø°Ù Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„ Ù‡Ø§
sudo modprobe -r snd_hda_codec_cs8409 snd_hda_intel
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

# Ø±Ø§Ù‡ Ø§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ Ø³Ø±ÙˆÛŒØ³ Ù‡Ø§
systemctl --user start wireplumber pipewire pipewire-pulse

4. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯ Ù‡Ø§
dmesg | grep -i "cs8409\|hda" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ ØµØ¯Ø§
speaker-test -D default -c 2 -t wav -f 440

5. Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯ØŒ Ø§Ø² Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
bash

#!/bin/bash
# MacBook CS8409 Audio Fix Script
# Author: Buddha

echo "=== MacBook CS8409 Audio Fix ==="

# Ø§ÛŒØ¬Ø§Ø¯ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ
sudo tee /etc/modprobe.d/macbook-audio-final.conf > /dev/null <<'EOF'
# MacBook Audio Final Configuration
options snd-hda-intel model=mbp16
options snd-hda-codec-cs8409 model=macbook-pro
options snd-hda-intel position_fix=2
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=0x01
EOF

# Ø¢Ù¾Ø¯ÛŒØª initramfs
sudo update-initramfs -u

# Ø±Ø§Ù‡ Ø§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„ Ù‡Ø§
sudo modprobe -r snd_hda_codec_cs8409 snd_hda_intel
sleep 2
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

echo "=== Status Check ==="
dmesg | grep -i "cs8409" | tail -5

echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking ALSA devices:"
    ls /dev/snd/ 2>/dev/null
}

echo "=== Test Complete ==="
echo "If audio still doesn't work, please reboot: sudo reboot"

6. Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª:
bash

nano fix_cs8409.sh
chmod +x fix_cs8409.sh
sudo ./fix_cs8409.sh

7. Ù¾Ø³ Ø§Ø² Ø±ÛŒØ¨ÙˆØªØŒ ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

# ØªØ³Øª Ø§Ø³Ù¾ÛŒÚ©Ø±
speaker-test -c 2 -t wav

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†
arecord -l

# ØªØ³Øª Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†
arecord -d 5 -f cd test-mic.wav
aplay test-mic.wav

Ø§Ú¯Ø± Ù‡Ù…Ú†Ù†Ø§Ù† Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª:

    Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ… Ø±Ùˆ Ø¬Ù…Ø¹ Ø¢ÙˆØ±ÛŒ Ú©Ù†ÛŒØ¯:

bash

# Ø¬Ù…Ø¹ Ø¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¨Ø§Ú¯
dmesg | grep -i "audio\|snd\|hda\|cs8409" > audio_debug.log
aplay -l >> audio_debug.log
cat /proc/asound/card0/codec#0 >> audio_debug.log

    Ù…Ø¯Ù„ Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø±Ùˆ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯:

bash

MODELS=("mbp16" "mbp15" "mbp14" "macbook-pro" "imac27" "auto")

for model in "${MODELS[@]}"; do
    echo "Testing model: $model"
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/test.conf
    sudo update-initramfs -u
    sudo modprobe -r snd_hda_intel
    sudo modprobe snd_hda_intel
    sleep 2
    if aplay -l | grep -v "HDMI"; then
        echo "âœ… Success with: $model"
        break
    fi
done

Ø§ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ù…Ø´Ú©Ù„ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ CS8409 Ø±Ùˆ Ø±ÙˆÛŒ MacBook Ø´Ù…Ø§ Ø­Ù„ Ú©Ù†Ù‡. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªÛŒØ¯ØŒ Ù„Ø·ÙØ§Ù‹ Ø®Ø±ÙˆØ¬ÛŒ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø¯ÛŒØ¨Ø§Ú¯ Ø±Ùˆ Ø¨ÙØ±Ø³ØªÛŒØ¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ CS8409
sudo tee /etc/modprobe.d/macbook-cs8409.conf > /dev/null <<'EOF'
# Cirrus Logic CS8409 configuration for MacBook Pro
options snd-hda-intel model=mbp16
options snd-hda-codec-cs8409 model=macbook
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=1
EOF
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ sudo update-initramfs -u
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³ Ù‡Ø§ÛŒ ØµØ¯Ø§
systemctl --user stop pipewire pipewire-pulse wireplumber 2>/dev/null || true

# Ø­Ø°Ù Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„ Ù‡Ø§
sudo modprobe -r snd_hda_codec_cs8409 snd_hda_intel
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

# Ø±Ø§Ù‡ Ø§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ Ø³Ø±ÙˆÛŒØ³ Ù‡Ø§
systemctl --user start wireplumber pipewire pipewire-pulse
modprobe: FATAL: Module snd_hda_codec_cs8409 is in use.
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯ Ù‡Ø§
dmesg | grep -i "cs8409\|hda" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ ØµØ¯Ø§
speaker-test -D default -c 2 -t wav -f 440
[    7.397114] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
[    7.397120] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
[    7.397124] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
[    7.397127] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
[    7.397128] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
[    7.397130] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
[    7.397133] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c
[    7.438125] input: HDA Intel PCH HDMI/DP,pcm=3 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input8
[    7.438185] input: HDA Intel PCH HDMI/DP,pcm=7 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input9
[    7.438235] input: HDA Intel PCH HDMI/DP,pcm=8 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input10
**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]
  Subdevices: 1/1
  Subdevice #0: subdevice #0

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Periods = 4
was set period_size = 12000
was set buffer_size = 48000
 0 - Front Left
 1 - Front Right
Time per period = 2.050290
 0 - Front Left
 1 - Front Right
Time per period = 3.070005
 0 - Front Left
 1 - Front Right
Time per period = 3.073550
 0 - Front Left
 1 - Front Right
Time per period = 3.070955
 0 - Front Left
 1 - Front Right
Time per period = 2.816866
 0 - Front Left
 1 - Front Right
Time per period = 3.072315
 0 - Front Left
 1 - Front Right
Time per period = 3.069622
 0 - Front Left
 1 - Front Right
Time per period = 3.073632
 0 - Front Left
 1 - Front Right
Time per period = 2.814615
 0 - Front Left
 1 - Front Right
Time per period = 3.073841
 0 - Front Left
 1 - Front Right
Time per period = 3.071832
 0 - Front Left
^CWrite error: -4,Interrupted system call
xrun_recovery failed: -4,Interrupted system call
Transfer failed: Interrupted system call
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ø¹Ø§Ù„ÛŒ! Ù¾ÛŒØ´Ø±ÙØª Ø®ÙˆØ¨ÛŒ Ø¯Ø§Ø´ØªÛŒÙ…. ØªØ³Øª ØµØ¯Ø§ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ (Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒØ¯ Ú©Ù‡ speaker-test Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§Ø³Øª Ùˆ Front Left/Right Ø±Ùˆ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯)ØŒ Ø§Ù…Ø§ Ù…Ø´Ú©Ù„ Ø§ÛŒÙ†Ø¬Ø§Ø³Øª Ú©Ù‡ ÙÙ‚Ø· Ø®Ø±ÙˆØ¬ÛŒ HDMI Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡ Ùˆ Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯ Ø§Ø³Ù¾ÛŒÚ©Ø± Ø¯Ø§Ø®Ù„ÛŒ Ù‡Ù†ÙˆØ² Ú©Ø§Ø± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
Ù…Ø´Ú©Ù„ Ø§ØµÙ„ÛŒ: CS8409 ÙÙ‚Ø· Ø®Ø±ÙˆØ¬ÛŒ HDMI Ùˆ Ù‡Ø¯ÙÙˆÙ† Ø±Ùˆ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯

Ø§Ø² Ø®Ø±ÙˆØ¬ÛŒ dmesg Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ…:
text

speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)  # Ø§Ø³Ù¾ÛŒÚ©Ø± Ø¯Ø§Ø®Ù„ÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù†Ø´Ø¯Ù‡
hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)      # ÙÙ‚Ø· Ù‡Ø¯ÙÙˆÙ† Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡

1. Ø±Ø§Ù‡ Ø­Ù„: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ø¯Ù„ Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ MacBook
bash

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¬Ø¯ÛŒØ¯
sudo tee /etc/modprobe.d/macbook-audio-fix.conf > /dev/null <<'EOF'
# MacBook Audio Fix for CS8409
options snd-hda-intel model=mbp16
options snd-hda-codec-cs8409 model=macbook-pro
options snd-hda-intel position_fix=2
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=0x01
EOF

# Ø¢Ù¾Ø¯ÛŒØª initramfs
sudo update-initramfs -u

2. Ø±ÛŒÙ„ÙˆØ¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø¨Ø§ Ø±ÙˆØ´ Ù‚ÙˆÛŒâ€ŒØªØ±:
bash

# ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
systemctl --user stop pipewire.socket pipewire-pulse.socket
systemctl --user stop pipewire pipewire-pulse wireplumber
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_soc_hda_codec 2>/dev/null || true

sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
systemctl --user start wireplumber pipewire pipewire-pulse

3. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¬Ø¯ÛŒØ¯:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
dmesg | grep -i "cs8409" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯ (Ø§Ú¯Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡)
speaker-test -D hw:0,0 -c 2 -t wav

4. Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯ØŒ Ø§Ø² patch manual Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§ÛŒØ¬Ø§Ø¯ patch Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø§Ø³Ù¾ÛŒÚ©Ø±
sudo tee /etc/modprobe.d/cs8409-speaker-fix.conf > /dev/null <<'EOF'
# Manual fix for CS8409 speaker output
options snd-hda-codec-cs8409 enable=1
options snd-hda-codec-cs8409 index=0
options snd-hda-intel model=mbp16
options snd-hda-intel vid=0x8086 pid=0x9d71
EOF

sudo update-initramfs -u

5. Ø±ÛŒØ³ØªØ§Ø±Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø±ÛŒØ³ØªØ§Ø±Øª Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ú©Ø§Ù…Ù„ ØªØºÛŒÛŒØ±Ø§Øª
sudo reboot

6. Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
dmesg | grep -i "cs8409\|audio\|snd" | tail -15

# Ù„ÛŒØ³Øª Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª ØªÙ…Ø§Ù… Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ù…Ú©Ù†
for device in {0..9}; do
    echo "Testing device $device:"
    speaker-test -D hw:0,$device -c 2 -t wav -f 440 2>/dev/null &
    sleep 3
    kill $! 2>/dev/null
done

7. Ø±Ø§Ù‡ Ø­Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² PulseAudio configuration Ù…Ø³ØªÙ‚ÛŒÙ…
bash

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯
mkdir -p ~/.config/pulse
tee ~/.config/pulse/default.pa > /dev/null <<'EOF'
.include /etc/pulse/default.pa

# MacBook specific configuration
set-default-sink alsa_output.pci-0000_00_1f.3.analog-stereo
set-default-source alsa_input.pci-0000_00_1f.3.analog-stereo
EOF

# Ø±ÛŒØ³ØªØ§Ø±Øª PulseAudio/pipewire
pulseaudio -k
sleep 2
pulseaudio --start

Ø§Ú¯Ø± Ù¾Ø³ Ø§Ø² Ø§ÛŒÙ† Ù…Ø±Ø§Ø­Ù„ Ù‡Ù†ÙˆØ² Ø§Ø³Ù¾ÛŒÚ©Ø± Ø¯Ø§Ø®Ù„ÛŒ Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø¯Ø±Ø§ÛŒÙˆØ± Ø®Ø§Øµ ÛŒØ§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ú†â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯. Ù„Ø·ÙØ§Ù‹ Ø®Ø±ÙˆØ¬ÛŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ùˆ Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø±Ø§Ø­Ù„ Ø¨Ø§Ù„Ø§ Ø¨ÙØ±Ø³ØªÛŒØ¯:
bash

dmesg | grep -i "cs8409\|hda" | tail -10
cat /proc/asound/card0/codec#0 | grep -A5 -B5 "Node"

Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ø§ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù…Ø¯Ù„ ØµØ­ÛŒØ­ Ø¨Ø±Ø·Ø±Ù Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ù…Ø¯Ù„ mbp16 Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ø±Ø§ÛŒ MacBook Ø´Ù…Ø§ Ú©Ø§Ù…Ù„Ø§Ù‹ Ù…Ù†Ø§Ø³Ø¨ Ù†Ø¨Ø§Ø´Ø¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¬Ø¯ÛŒØ¯
sudo tee /etc/modprobe.d/macbook-audio-fix.conf > /dev/null <<'EOF'
# MacBook Audio Fix for CS8409
options snd-hda-intel model=mbp16
options snd-hda-codec-cs8409 model=macbook-pro
options snd-hda-intel position_fix=2
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=0x01
EOF

# Ø¢Ù¾Ø¯ÛŒØª initramfs
sudo update-initramfs -u
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
systemctl --user stop pipewire.socket pipewire-pulse.socket
systemctl --user stop pipewire pipewire-pulse wireplumber
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_soc_hda_codec 2>/dev/null || true

sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

# Ø±Ø§Ù‡<200c>Ø§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
systemctl --user start wireplumber pipewire pipewire-pulse
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯<200c>Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
dmesg | grep -i "cs8409" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯ (Ø§Ú¯Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡)
speaker-test -D hw:0,0 -c 2 -t wav
[  614.830714] snd_hda_codec_cs8409: unknown parameter 'model' ignored
[  614.830715] snd_hda_codec_cs8409: unknown parameter 'model' ignored
[  614.830716] snd_hda_codec_cs8409: unknown parameter 'model' ignored
[  614.834936] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
[  614.834941] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
[  614.834943] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
[  614.834945] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
[  614.834946] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
[  614.834948] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
[  614.834949] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c
**** List of PLAYBACK Hardware Devices ****

speaker-test 1.2.14

Playback device is hw:0,0
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Playback open error: -2,No such file or directory
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ù…Ø´Ø®Øµ Ø´Ø¯! Ø®Ø·Ø§ÛŒ Ù…Ù‡Ù…ÛŒ Ø¯Ø± Ø®Ø±ÙˆØ¬ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯:
text

snd_hda_codec_cs8409: unknown parameter 'model' ignored

Ø§ÛŒÙ† ÛŒØ¹Ù†ÛŒ Ù¾Ø§Ø±Ø§Ù…ØªØ± model Ø¨Ø±Ø§ÛŒ Ù…Ø§Ú˜ÙˆÙ„ snd_hda_codec_cs8409 Ø´Ù†Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ù†ÛŒØ³Øª. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
Ø±Ø§Ù‡ Ø­Ù„ ØµØ­ÛŒØ­ Ø¨Ø±Ø§ÛŒ CS8409:
1. Ø­Ø°Ù ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù†Ø§Ø¯Ø±Ø³Øª:
bash

# Ø­Ø°Ù ÙØ§ÛŒÙ„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‚Ø¨Ù„ÛŒ
sudo rm /etc/modprobe.d/macbook-audio-fix.conf

2. Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØµØ­ÛŒØ­:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØµØ­ÛŒØ­ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ snd-hda-intel
sudo tee /etc/modprobe.d/macbook-audio-correct.conf > /dev/null <<'EOF'
# Correct MacBook Audio Configuration
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=2
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=0x01
EOF

3. Ø¢Ù¾Ø¯ÛŒØª initramfs:
bash

sudo update-initramfs -u

4. Ø±ÛŒÙ„ÙˆØ¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§:
bash

# ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
systemctl --user stop pipewire pipewire-pulse wireplumber
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo modprobe -r snd_hda_codec_cs8409 snd_hda_intel
sleep 2
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
systemctl --user start wireplumber pipewire pipewire-pulse

5. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§
dmesg | grep -i "cs8409\|hda" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
for device in {0..9}; do
    echo "Testing device hw:0,$device"
    timeout 3s speaker-test -D hw:0,$device -c 2 -t wav 2>/dev/null && echo "âœ… Device hw:0,$device works!" || echo "âŒ Device hw:0,$device failed"
done

6. Ø§Ú¯Ø± Ù‡Ù…Ú†Ù†Ø§Ù† Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ MacBook
MODELS=("mbp16" "mbp15" "mbp14" "mbp13" "mbp12" "imac27" "auto" "macbook-pro")

for model in "${MODELS[@]}"; do
    echo "Testing model: $model"
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/test-model.conf
    sudo update-initramfs -u
    sudo modprobe -r snd_hda_intel
    sudo modprobe snd_hda_intel
    sleep 2
    
    if aplay -l 2>/dev/null | grep -v "HDMI"; then
        echo "âœ… Success with model: $model"
        break
    else
        echo "âŒ Failed with model: $model"
    fi
done

7. Ø±Ø§Ù‡ Ø­Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ALSA configuration Ù…Ø³ØªÙ‚ÛŒÙ…
bash

# Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ALSA
sudo tee /etc/modprobe.d/alsa-macbook.conf > /dev/null <<'EOF'
# ALSA configuration for MacBook with CS8409
options snd-hda-intel model=mbp16
options snd-hda-intel enable=1
options snd-hda-intel index=0
options snd-hda-intel position_fix=1
EOF

sudo update-initramfs -u
sudo reboot

8. Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø§Ù…Ù„ ÙˆØ¶Ø¹ÛŒØª ØµØ¯Ø§
dmesg | grep -i "audio\|snd\|hda\|cs8409"
aplay -l
arecord -l

# ØªØ³Øª Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†â€ŒÙ‡Ø§
echo "Testing microphone..."
arecord -d 3 -f cd test_mic.wav
aplay test_mic.wav

9. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¨Ø§Ú¯ Ù¾ÛŒØ´Ø±ÙØªÙ‡
echo "=== System Audio Debug Information ===" > audio_debug.log
uname -a >> audio_debug.log
echo "=== ALSA Devices ===" >> audio_debug.log
aplay -l >> audio_debug.log 2>&1
arecord -l >> audio_debug.log 2>&1
echo "=== Kernel Messages ===" >> audio_debug.log
dmesg | grep -i "audio\|snd\|hda\|cs8409" >> audio_debug.log
echo "=== Codec Information ===" >> audio_debug.log
cat /proc/asound/card0/codec#0 >> audio_debug.log 2>&1
echo "=== Loaded Modules ===" >> audio_debug.log
lsmod | grep snd >> audio_debug.log

cat audio_debug.log

Ù„Ø·ÙØ§Ù‹ Ù¾Ø³ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§ØªØŒ Ø®Ø±ÙˆØ¬ÛŒ audio_debug.log Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø¨Ø±Ø§ÛŒ Ù…Ù† Ø¨ÙØ±Ø³ØªÛŒØ¯ ØªØ§ Ø¨ØªÙˆÙ†Ù… Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± ØªØ´Ø®ÛŒØµ Ø¨Ø¯Ù….

Ù…Ù‡Ù…: Ù¾Ø§Ø±Ø§Ù…ØªØ± model ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…Ø§Ú˜ÙˆÙ„ snd-hda-intel Ù…Ø¹ØªØ¨Ø± Ù‡Ø³ØªØŒ Ù†Ù‡ Ø¨Ø±Ø§ÛŒ snd-hda-codec-cs8409.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¬Ø¯ÛŒØ¯
sudo tee /etc/modprobe.d/macbook-audio-fix.conf > /dev/null <<'EOF'
# MacBook Audio Fix for CS8409
options snd-hda-intel model=mbp16
options snd-hda-codec-cs8409 model=macbook-pro
options snd-hda-intel position_fix=2
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=0x01
EOF

# Ø¢Ù¾Ø¯ÛŒØª initramfs
sudo update-initramfs -u
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
systemctl --user stop pipewire.socket pipewire-pulse.socket
systemctl --user stop pipewire pipewire-pulse wireplumber
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_soc_hda_codec 2>/dev/null || true

sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

# Ø±Ø§Ù‡<200c>Ø§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
systemctl --user start wireplumber pipewire pipewire-pulse
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯<200c>Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
dmesg | grep -i "cs8409" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯ (Ø§Ú¯Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡)
speaker-test -D hw:0,0 -c 2 -t wav
[  614.830714] snd_hda_codec_cs8409: unknown parameter 'model' ignored
[  614.830715] snd_hda_codec_cs8409: unknown parameter 'model' ignored
[  614.830716] snd_hda_codec_cs8409: unknown parameter 'model' ignored
[  614.834936] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
[  614.834941] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
[  614.834943] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
[  614.834945] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
[  614.834946] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
[  614.834948] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
[  614.834949] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c
**** List of PLAYBACK Hardware Devices ****

speaker-test 1.2.14

Playback device is hw:0,0
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Playback open error: -2,No such file or directory
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø­Ø°Ù ÙØ§ÛŒÙ„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‚Ø¨Ù„ÛŒ
sudo rm /etc/modprobe.d/macbook-audio-fix.conf
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØµØ­ÛŒØ­ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ snd-hda-intel
sudo tee /etc/modprobe.d/macbook-audio-correct.conf > /dev/null <<'EOF'
# Correct MacBook Audio Configuration
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=2
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=0x01
EOF
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ sudo update-initramfs -u
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
systemctl --user stop pipewire pipewire-pulse wireplumber
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo modprobe -r snd_hda_codec_cs8409 snd_hda_intel
sleep 2
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

# Ø±Ø§Ù‡<200c>Ø§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
systemctl --user start wireplumber pipewire pipewire-pulse
Stopping 'pipewire.service', but its triggering units are still active:
pipewire.socket
Stopping 'pipewire-pulse.service', but its triggering units are still active:                                                                         
pipewire-pulse.socket
modprobe: FATAL: Module snd_hda_codec_cs8409 is in use.
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯<200c>Ù‡Ø§
dmesg | grep -i "cs8409\|hda" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ<200c>Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
for device in {0..9}; do
    echo "Testing device hw:0,$device"
    timeout 3s speaker-test -D hw:0,$device -c 2 -t wav 2>/dev/null && echo "âœ… Device hw:0,$device works!" || echo "âŒ Device hw:0,$device failed"
done
for cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø±Ù‡. Ø¨ÛŒØ§ÛŒÛŒØ¯ ÛŒÚ© Ø±Ø§Ù‡ Ø­Ù„ Ù‚ÙˆÛŒâ€ŒØªØ± Ùˆ Ø³ÛŒØ³ØªÙ…Ø§ØªÛŒÚ© Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒÙ…:
Ø±Ø§Ù‡ Ø­Ù„ Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ MacBook Ø¨Ø§ CS8409:
1. Ø§Ø¨ØªØ¯Ø§ ØªÙ…Ø§Ù… processes ØµØ¯Ø§ Ø±Ùˆ Ú©Ø§Ù…Ù„Ø§Ù‹ Ù…ØªÙˆÙ‚Ù Ú©Ù†ÛŒÙ…:
bash

# ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ ØªÙ…Ø§Ù… Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
sudo systemctl stop pipewire.socket pipewire-pulse.socket
sudo systemctl stop pipewire pipewire-pulse wireplumber
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio

# kill Ú©Ø±Ø¯Ù† processesØ§ÛŒ Ú©Ù‡ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯
for pid in $(sudo lsof /dev/snd/* 2>/dev/null | awk '{print $2}' | uniq | grep -v PID); do
    sudo kill -9 $pid 2>/dev/null
done

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_soc_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_codec_hdmi 2>/dev/null || true
sudo rmmod -f snd_hda_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sleep 3

2. Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØµØ­ÛŒØ­:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø§Ø¯Ù‡ Ùˆ ØµØ­ÛŒØ­
sudo tee /etc/modprobe.d/macbook-simple.conf > /dev/null <<'EOF'
# Simple MacBook Audio Configuration
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
EOF

sudo update-initramfs -u

3. Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§:
bash

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409
sleep 2

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409\|hda" | tail -10

4. ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù:
bash

# ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ MacBook
MODELS=("mbp16" "mbp15" "mbp14" "mbp13" "auto" "generic" "dell-m6" "asus-mode4")

for model in "${MODELS[@]}"; do
    echo "===================================="
    echo "Testing model: $model"
    
    # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…ÙˆÙ‚Øª
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/temp-model.conf
    sudo update-initramfs -u
    
    # Ø±ÛŒÙ„ÙˆØ¯ Ù…Ø§Ú˜ÙˆÙ„
    sudo modprobe -r snd_hda_intel 2>/dev/null || true
    sudo modprobe snd_hda_intel
    sleep 2
    
    # Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªÛŒØ¬Ù‡
    echo "=== dmesg output ==="
    dmesg | grep -i "cs8409\|hda" | tail -5
    
    echo "=== Audio devices ==="
    aplay -l 2>/dev/null || echo "No audio devices found"
    
    echo "=== Testing output ==="
    if timeout 3s speaker-test -D default -c 2 -t wav 2>/dev/null; then
        echo "âœ… SUCCESS with model: $model"
        break
    else
        echo "âŒ FAILED with model: $model"
    fi
    
    echo ""
done

5. Ø§Ú¯Ø± Ù‡ÛŒÚ† Ù…Ø¯Ù„ÛŒ Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø§Ø² Ø±ÙˆØ´ manual patch Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§ÛŒØ¬Ø§Ø¯ patch Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ CS8409
sudo tee /etc/modprobe.d/cs8409-manual.conf > /dev/null <<'EOF'
# Manual CS8409 configuration
options snd-hda-intel enable=1
options snd-hda-intel index=0
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=1
EOF

sudo update-initramfs -u
sudo modprobe -r snd_hda_intel
sudo modprobe snd_hda_intel

6. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§:
bash

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
systemctl --user start wireplumber pipewire pipewire-pulse

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù†Ù‡Ø§ÛŒÛŒ
echo "=== Final Status ==="
dmesg | grep -i "cs8409\|audio\|snd" | tail -10
aplay -l
pactl list short sinks

7. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¨Ø§Ú¯
echo "=== COMPLETE AUDIO DEBUG INFO ===" > audio_complete.log
echo "=== Kernel Version ===" >> audio_complete.log
uname -a >> audio_complete.log
echo "=== ALSA Version ===" >> audio_complete.log
alsa-info --stdout >> audio_complete.log 2>&1 || echo "alsa-info not available" >> audio_complete.log
echo "=== dmesg Audio Logs ===" >> audio_complete.log
dmesg | grep -i "audio\|snd\|hda\|cs8409" >> audio_complete.log
echo "=== Audio Devices ===" >> audio_complete.log
aplay -l >> audio_complete.log 2>&1
arecord -l >> audio_complete.log 2>&1
echo "=== Loaded Modules ===" >> audio_complete.log
lsmod | grep snd >> audio_complete.log
echo "=== Codec Information ===" >> audio_complete.log
cat /proc/asound/card0/codec#0 >> audio_complete.log 2>&1

echo "Debug information saved to audio_complete.log"
cat audio_complete.log | head -20

8. Ø±Ø§Ù‡ Ø­Ù„ Ù†Ù‡Ø§ÛŒÛŒ: Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø¯Ø±Ø§ÛŒÙˆØ± Ø§Ø² source

Ø§Ú¯Ø± Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù… Ø§Ø² Ø±ÙˆØ´â€ŒÙ‡Ø§ Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ù…Ù…Ú©Ù†Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø¯Ø±Ø§ÛŒÙˆØ± Ø§Ø² source Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯:
bash

# Ù†Ø§Ø²Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§
sudo apt install build-essential linux-headers-$(uname -r) git

# Ø¯Ø§Ù†Ù„ÙˆØ¯ source kernel
git clone --depth 1 https://github.com/torvalds/linux.git
cd linux

# Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ CS8409
find . -name "*cs8409*" -type f

Ù„Ø·ÙØ§Ù‹ Ù¾Ø³ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§ØªØŒ Ø®Ø±ÙˆØ¬ÛŒ Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ùˆ Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ù…Ø­ØªÙˆØ§ÛŒ ÙØ§ÛŒÙ„ audio_complete.log Ø±Ùˆ Ø¨Ø§ Ù…Ù† Ø¨Ù‡ Ø§Ø´ØªØ±Ø§Ú© Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ ØªÙ…Ø§Ù… Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
sudo systemctl stop pipewire.socket pipewire-pulse.socket
sudo systemctl stop pipewire pipewire-pulse wireplumber
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio

# kill Ú©Ø±Ø¯Ù† processesØ§ÛŒ Ú©Ù‡ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒ<200c>Ú©Ù†Ù†Ø¯
for pid in $(sudo lsof /dev/snd/* 2>/dev/null | awk '{print $2}' | uniq | grep -v PID); do
    sudo kill -9 $pid 2>/dev/null
done

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_soc_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_codec_hdmi 2>/dev/null || true
sudo rmmod -f snd_hda_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sleep 3
Failed to stop pipewire.socket: Unit pipewire.socket not loaded.
Failed to stop pipewire-pulse.socket: Unit pipewire-pulse.socket not loaded.
Failed to stop pipewire.service: Unit pipewire.service not loaded.
Failed to stop pipewire-pulse.service: Unit pipewire-pulse.service not loaded.
Failed to stop wireplumber.service: Unit wireplumber.service not loaded.
zsh: killed     sudo pkill -9 -f pipewire
                                         zsh: killed     sudo pkill -9 -f wireplumber
          zsh: killed     sudo pkill -9 -f pulseaudio
                                                                                                                                
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
    # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø§Ø¯Ù‡ Ùˆ ØµØ­ÛŒØ­ Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø§Ø¯Ù‡ Ùˆ ØµØ­ÛŒØ­
sudo tee /etc/modprobe.d/macbook-simple.conf > /dev/null <<'EOF'
# Simple MacBook Audio Configuration
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
EOF

sudo update-initramfs -u
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
    # Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§$ # Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409
sleep 2

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409\|hda" | tail -10
[  787.823818] snd_hda_codec_cs8409: unknown parameter 'index' ignored
                                                                      [  787.823820] snd_hda_codec_cs8409: unknown parameter 'model' ignored
                                                                 [  787.823821] snd_hda_codec_cs8409: unknown parameter 'model' ignored
                                                            [  787.825796] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
                              [  787.825803] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
                                           [  787.825806] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
                                                    [  787.825809] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
                                               [  787.825811] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
                               [  787.825813] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
                           [  787.825815] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c
                                                                                         
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
                          â””â”€$

Ù…Ø´Ú©Ù„ Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø±Ù‡. Ø®Ø·Ø§ÛŒ unknown parameter Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù†Ø§Ø¯Ø±Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø§Ú˜ÙˆÙ„ snd_hda_codec_cs8409 ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡. Ø¨ÛŒØ§ÛŒÛŒØ¯ ÛŒÚ©Ø¨Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù‡Ù…ÛŒØ´Ù‡ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
Ø±Ø§Ù‡ Ø­Ù„ Ù†Ù‡Ø§ÛŒÛŒ Ùˆ Ù‚Ø·Ø¹ÛŒ:
1. Ø­Ø°Ù ØªÙ…Ø§Ù… ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‚Ø¨Ù„ÛŒ:
bash

# Ø­Ø°Ù ØªÙ…Ø§Ù… ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‚Ø¨Ù„ÛŒ
sudo rm -f /etc/modprobe.d/macbook-*.conf
sudo rm -f /etc/modprobe.d/cs8409-*.conf
sudo rm -f /etc/modprobe.d/alsa-*.conf

2. Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ù‡Ø§ ÛŒÚ© ÙØ§ÛŒÙ„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø§Ø¯Ù‡ Ùˆ ØµØ­ÛŒØ­:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ù‡Ø§ ÛŒÚ© ÙØ§ÛŒÙ„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØµØ­ÛŒØ­
sudo tee /etc/modprobe.d/macbook-audio-final.conf > /dev/null <<'EOF'
# MacBook Audio Final Configuration
# ONLY for snd-hda-intel module
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
EOF

sudo update-initramfs -u

3. ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ Ùˆ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø³ÛŒØ³ØªÙ… ØµØ¯Ø§:
bash

# ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ Ù‡Ù…Ù‡ Ú†ÛŒØ²
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio
sudo pkill -9 -f alsa

# Ø­Ø°Ù ØªÙ…Ø§Ù… Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ Ø¨Ù‡ ØªØ±ØªÛŒØ¨
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_codec_hdmi 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sudo rmmod -f snd_timer 2>/dev/null || true
sudo rmmod -f snd 2>/dev/null || true

sleep 3

4. Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø¨Ø§ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­:
bash

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec
sudo modprobe snd_hda_codec_hdmi
sudo modprobe snd_hda_codec_cs8409

sleep 2

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
echo "=== Audio Status ==="
dmesg | grep -i "cs8409\|hda\|audio" | tail -10

5. ØªØ³Øª Ø³Ø§Ø¯Ù‡:
bash

# ØªØ³Øª Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking basic devices:"
    ls /dev/snd/ 2>/dev/null
}

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶
echo "=== Testing default output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output"

6. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§:
bash

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PipeWire
systemctl --user start wireplumber pipewire pipewire-pulse

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù†Ù‡Ø§ÛŒÛŒ
echo "=== Final Check ==="
pactl list short sinks 2>/dev/null || echo "PulseAudio not available"

7. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª - Ø±Ø§Ù‡ Ø­Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†:
bash

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ø¯Ù„ generic
echo "options snd-hda-intel model=generic" | sudo tee /etc/modprobe.d/macbook-generic.conf
sudo update-initramfs -u

# Ø±ÛŒÙ„ÙˆØ¯
sudo modprobe -r snd_hda_intel
sudo modprobe snd_hda_intel

# ØªØ³Øª
timeout 3s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Generic model works!"

8. Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ…
echo "=== SYSTEM AUDIO INFORMATION ===" > audio_final_report.txt
echo "Kernel: $(uname -r)" >> audio_final_report.txt
echo "Distribution: $(lsb_release -d 2>/dev/null | cut -f2)" >> audio_final_report.txt
echo "=== DMESG AUDIO LOGS ===" >> audio_final_report.txt
dmesg | grep -i "audio\|snd\|hda\|cs8409" | tail -20 >> audio_final_report.txt
echo "=== ALSA DEVICES ===" >> audio_final_report.txt
aplay -l >> audio_final_report.txt 2>&1
echo "=== LOADED MODULES ===" >> audio_final_report.txt
lsmod | grep snd >> audio_final_report.txt
echo "=== CODEC INFO ===" >> audio_final_report.txt
cat /proc/asound/card0/codec#0 | head -30 >> audio_final_report.txt 2>&1

echo "Report saved to audio_final_report.txt"
cat audio_final_report.txt

9. Ø§Ú¯Ø± Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù… Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ - Ø±ÛŒØ³ØªØ§Ø±Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø±ÛŒØ³ØªØ§Ø±Øª Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ú©Ø§Ù…Ù„ ØªØºÛŒÛŒØ±Ø§Øª
echo "Rebooting system for final changes..."
sudo reboot

Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
dmesg | grep -i "cs8409\|audio" | tail -10
aplay -l

Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ù„Ø·ÙØ§Ù‹ Ù…Ø­ØªÙˆØ§ÛŒ ÙØ§ÛŒÙ„ audio_final_report.txt Ø±Ùˆ Ø¨Ø§ Ù…Ù† Ø¨Ù‡ Ø§Ø´ØªØ±Ø§Ú© Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯ ØªØ§ Ø¨ØªÙˆÙ†Ù… Ø±Ø§Ù‡ Ø­Ù„ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ±ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ø¨Ø¯Ù….
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø­Ø°Ù ØªÙ…Ø§Ù… ÙØ§ÛŒÙ„<200c>Ù‡Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‚Ø¨Ù„ÛŒ
sudo rm -f /etc/modprobe.d/macbook-*.conf
sudo rm -f /etc/modprobe.d/cs8409-*.conf
sudo rm -f /etc/modprobe.d/alsa-*.conf
[sudo] password for buddha: 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ù‡Ø§ ÛŒÚ© ÙØ§ÛŒÙ„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØµØ­ÛŒØ­
sudo tee /etc/modprobe.d/macbook-audio-final.conf > /dev/null <<'EOF'
# MacBook Audio Final Configuration
# ONLY for snd-hda-intel module
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
EOF

sudo update-initramfs -u
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ Ù‡Ù…Ù‡ Ú†ÛŒØ²
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio
sudo pkill -9 -f alsa

# Ø­Ø°Ù ØªÙ…Ø§Ù… Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§ Ø¨Ù‡ ØªØ±ØªÛŒØ¨
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_codec_hdmi 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sudo rmmod -f snd_timer 2>/dev/null || true
sudo rmmod -f snd 2>/dev/null || true

sleep 3
zsh: killed     sudo pkill -9 -f pipewire
                                         zsh: killed     sudo pkill -9 -f wireplumber
          zsh: killed     sudo pkill -9 -f pulseaudio
                                                     zsh: killed     sudo pkill -9 -f alsa
                                                                                          
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
    # Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec
sudo modprobe snd_hda_codec_hdmi
sudo modprobe snd_hda_codec_cs8409

sleep 2

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
echo "=== Audio Status ==="
dmesg | grep -i "cs8409\|hda\|audio" | tail -10
=== Audio Status ===
                    [  886.996074] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
                                                                 [  886.996078] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
   [  886.996080] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
            [  886.996082] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
       [  886.996084] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
                                                                  [  886.996085] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
                                                              [  886.996086] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c
                                                 [  887.008071] input: HDA Intel PCH HDMI/DP,pcm=3 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input11
    [  887.008135] input: HDA Intel PCH HDMI/DP,pcm=7 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input12
                                  [  887.008188] input: HDA Intel PCH HDMI/DP,pcm=8 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input13
                                                                                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
    # ØªØ³Øª Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§ # ØªØ³Øª Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking basic devices:"
    ls /dev/snd/ 2>/dev/null
}

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ Ù¾ÛŒØ´<200c>ÙØ±Ø¶
echo "=== Testing default output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output"
cmdand dquote>

Ø¹Ø§Ù„ÛŒ! Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ… Ú©Ù‡ Ù…Ø´Ú©Ù„ Ø§ØµÙ„ÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø§Ø² Ø®Ø±ÙˆØ¬ÛŒ dmesg Ù…Ø´Ø®Øµ Ø§Ø³Øª:
text

speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)  # Ø§Ø³Ù¾ÛŒÚ©Ø± Ø¯Ø§Ø®Ù„ÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù†Ø´Ø¯Ù‡
hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)      # ÙÙ‚Ø· Ù‡Ø¯ÙÙˆÙ† Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡

Ø§ÛŒÙ† ÛŒØ¹Ù†ÛŒ Ø¯Ø±Ø§ÛŒÙˆØ± CS8409 Ø§Ø³Ù¾ÛŒÚ©Ø± Ø¯Ø§Ø®Ù„ÛŒ MacBook Ø´Ù…Ø§ Ø±Ø§ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù†Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª. Ø§ÛŒÙ† ÛŒÚ© Ù…Ø´Ú©Ù„ Ø´Ù†Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ Ø¨Ø±Ø®ÛŒ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ MacBook Ø§Ø³Øª.
Ø±Ø§Ù‡ Ø­Ù„ Ù†Ù‡Ø§ÛŒÛŒ:
1. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ MacBook:
bash

# ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
MODELS=("mbp16" "mbp15" "mbp14" "mbp13" "mbp12" "imac27" "auto" "generic")

for model in "${MODELS[@]}"; do
    echo "Testing model: $model"
    
    # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…ÙˆÙ‚Øª
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/test-model.conf
    sudo update-initramfs -u
    
    # Ø±ÛŒÙ„ÙˆØ¯ Ù…Ø§Ú˜ÙˆÙ„
    sudo modprobe -r snd_hda_intel
    sudo modprobe snd_hda_intel
    sleep 2
    
    # Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªÛŒØ¬Ù‡
    if dmesg | tail -10 | grep -i "cs8409" | grep -q "speaker_outs=[1-9]"; then
        echo "âœ… SUCCESS! Model $model detected speakers"
        break
    else
        echo "âŒ Model $model failed (no speakers detected)"
    fi
done

2. Ø§Ú¯Ø± Ù‡ÛŒÚ† Ù…Ø¯Ù„ÛŒ Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø§Ø² patch Ø¯Ø³ØªÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§ÛŒØ¬Ø§Ø¯ patch Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø§Ø³Ù¾ÛŒÚ©Ø±
sudo tee /etc/modprobe.d/macbook-manual-fix.conf > /dev/null <<'EOF'
# Manual fix for MacBook speakers
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=1
# Force enable all outputs
options snd-hda-intel enable=1
EOF

sudo update-initramfs -u
sudo modprobe -r snd_hda_intel
sudo modprobe snd_hda_intel

3. Ø±Ø§Ù‡ Ø­Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª ALSA Ù…Ø³ØªÙ‚ÛŒÙ…
bash

# Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ALSA
sudo tee /etc/modprobe.d/alsa-base.conf > /dev/null <<'EOF'
# ALSA base configuration for MacBook
options snd-hda-intel model=mbp16
options snd-hda-intel index=0
options snd-hda-intel vid=0x8086 pid=0x9d71
options snd-hda-intel position_fix=1
EOF

sudo update-initramfs -u

4. Ø±ÛŒØ³ØªØ§Ø±Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø±ÛŒØ³ØªØ§Ø±Øª Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ú©Ø§Ù…Ù„ ØªØºÛŒÛŒØ±Ø§Øª
sudo reboot

5. Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409" | tail -10
aplay -l

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
for i in {0..9}; do
    echo "Testing output $i:"
    timeout 3s speaker-test -D hw:0,$i -c 2 -t wav 2>/dev/null && \
    echo "âœ… Output $i works" || echo "âŒ Output $i failed"
done

6. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª - Ø±Ø§Ù‡ Ø­Ù„ Ù¾ÛŒØ´Ø±ÙØªÙ‡:
bash

# Ù†ØµØ¨ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø¯ÛŒØ¨Ø§Ú¯
sudo apt install alsa-tools alsa-tools-gui

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² hdajackretask Ø¨Ø±Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ… Ø¯Ø³ØªÛŒ
sudo hdajackretask

7. Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø®Ø·Ø§:
bash

# Ø§ÛŒØ¬Ø§Ø¯ Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ù…Ù„
echo "=== MACBOOK AUDIO DEBUG REPORT ===" > macbook_audio_debug.log
echo "Date: $(date)" >> macbook_audio_debug.log
echo "Kernel: $(uname -r)" >> macbook_audio_debug.log
echo "=== DMESG ===" >> macbook_audio_debug.log
dmesg | grep -i "cs8409\|hda\|audio" >> macbook_audio_debug.log
echo "=== CODEC INFO ===" >> macbook_audio_debug.log
cat /proc/asound/card0/codec#0 >> macbook_audio_debug.log 2>&1
echo "=== PCI INFO ===" >> macbook_audio_debug.log
lspci -v | grep -i audio -A 10 >> macbook_audio_debug.log

echo "Debug report saved to macbook_audio_debug.log"

8. Ø§Ú¯Ø± Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù… Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ - Ø±Ø§Ù‡ Ø­Ù„ Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¯Ø±Ø§ÛŒÙˆØ± SOF (Sound Open Firmware)
sudo apt install firmware-sof-signed

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª SOF
echo "options snd-intel-dspcfg dsp_driver=3" | sudo tee /etc/modprobe.d/sof.conf
sudo update-initramfs -u
sudo reboot

Ù„Ø·ÙØ§Ù‹ Ù¾Ø³ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø±Ø§Ø­Ù„ØŒ Ø®Ø±ÙˆØ¬ÛŒ macbook_audio_debug.log Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯. Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø¯Ø±Ø§ÛŒÙˆØ± Ø®Ø§Øµ ÛŒØ§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ú†â€ŒÙ‡Ø§ÛŒ kernel Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯.

Ù…Ù‡Ù…: Ù…Ø´Ú©Ù„ speaker_outs=0 Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ø³Ø®Øªâ€ŒØ§ÙØ²Ø§Ø± Ø§Ø³Ù¾ÛŒÚ©Ø± Ø¯Ø§Ø®Ù„ÛŒ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù†Ø´Ø¯Ù‡ØŒ Ú©Ù‡ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ø±Ø§ÛŒÙˆØ± Ø®Ø§Øµ ÛŒØ§ Ù¾Ú† kernel Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ù…Ø¯Ù„<200c>Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
MODELS=("mbp16" "mbp15" "mbp14" "mbp13" "mbp12" "imac27" "auto" "generic")

for model in "${MODELS[@]}"; do
    echo "Testing model: $model"

    # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…ÙˆÙ‚Øª
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/test-model.conf
    sudo update-initramfs -u

    # Ø±ÛŒÙ„ÙˆØ¯ Ù…Ø§Ú˜ÙˆÙ„
    sudo modprobe -r snd_hda_intel
    sudo modprobe snd_hda_intel
    sleep 2

    # Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªÛŒØ¬Ù‡
    if dmesg | tail -10 | grep -i "cs8409" | grep -q "speaker_outs=[1-9]"; then
        echo "âœ… SUCCESS! Model $model detected speakers"
        break
    else
        echo "âŒ Model $model failed (no speakers detected)"
    fi
done
Testing model: mbp16
[sudo] password for buddha: 
options snd-hda-intel model=mbp16
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
modprobe: FATAL: Module snd_hda_intel is in use.
âŒ Model mbp16 failed (no speakers detected)
Testing model: mbp15
options snd-hda-intel model=mbp15
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
modprobe: FATAL: Module snd_hda_intel is in use.
âŒ Model mbp15 failed (no speakers detected)
Testing model: mbp14
options snd-hda-intel model=mbp14
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
modprobe: FATAL: Module snd_hda_intel is in use.
âŒ Model mbp14 failed (no speakers detected)
Testing model: mbp13
options snd-hda-intel model=mbp13
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
modprobe: FATAL: Module snd_hda_intel is in use.
âŒ Model mbp13 failed (no speakers detected)
Testing model: mbp12
options snd-hda-intel model=mbp12
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
modprobe: FATAL: Module snd_hda_intel is in use.
âŒ Model mbp12 failed (no speakers detected)
Testing model: imac27
options snd-hda-intel model=imac27
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
modprobe: FATAL: Module snd_hda_intel is in use.
âŒ Model imac27 failed (no speakers detected)
Testing model: auto
options snd-hda-intel model=auto
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
modprobe: FATAL: Module snd_hda_intel is in use.
âŒ Model auto failed (no speakers detected)
Testing model: generic
options snd-hda-intel model=generic
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
modprobe: FATAL: Module snd_hda_intel is in use.
âŒ Model generic failed (no speakers detected)
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ Ù…Ø§Ú˜ÙˆÙ„ snd_hda_intel Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø³Øª Ùˆ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¢Ù† Ø±Ø§ unload Ú©Ø±Ø¯. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª ØµØ­ÛŒØ­ Ø­Ù„ Ú©Ù†ÛŒÙ…:
Ø±ÙˆØ´ ØµØ­ÛŒØ­ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù:
1. Ø§Ø¨ØªØ¯Ø§ ØªÙ…Ø§Ù… processes Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù†Ø¯Ù‡ Ø§Ø² ØµØ¯Ø§ Ø±Ùˆ Ù…ØªÙˆÙ‚Ù Ú©Ù†ÛŒÙ…:
bash

# ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ ØªÙ…Ø§Ù… Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_codec_hdmi 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sudo rmmod -f snd_timer 2>/dev/null || true
sudo rmmod -f snd 2>/dev/null || true

sleep 3

2. Ø­Ø§Ù„Ø§ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø±Ùˆ ØªØ³Øª Ú©Ù†ÛŒÙ…:
bash

# ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø§ Ø±ÙˆØ´ ØµØ­ÛŒØ­
MODELS=("mbp16" "mbp15" "mbp14" "mbp13" "mbp12" "imac27" "auto" "generic")

for model in "${MODELS[@]}"; do
    echo "========================================"
    echo "Testing model: $model"
    
    # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/test-model.conf
    sudo update-initramfs -u 2>/dev/null
    
    # Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ dmesg Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
    sudo dmesg -C
    
    # Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„
    sudo modprobe snd_hda_intel
    sleep 2
    
    # Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªÛŒØ¬Ù‡
    if sudo dmesg | grep -i "cs8409" | grep -q "speaker_outs=[1-9]"; then
        echo "âœ… SUCCESS! Model $model detected speakers"
        echo "=== DMESG Output ==="
        sudo dmesg | grep -i "cs8409" | tail -5
        break
    else
        echo "âŒ Model $model failed"
        echo "=== DMESG Output ==="
        sudo dmesg | grep -i "cs8409" | tail -5
    fi
    
    # Ø­Ø°Ù Ù…Ø§Ú˜ÙˆÙ„ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ø¨Ø¹Ø¯ÛŒ
    sudo rmmod snd_hda_intel 2>/dev/null || true
    sleep 1
done

3. Ø§Ú¯Ø± Ù‡ÛŒÚ† Ù…Ø¯Ù„ÛŒ Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø§Ø² Ø±ÙˆØ´ Ù¾ÛŒØ´Ø±ÙØªÙ‡â€ŒØªØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø³ØªÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
sudo tee /etc/modprobe.d/macbook-advanced.conf > /dev/null <<'EOF'
# Advanced MacBook Audio Configuration
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=2
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=0x01
options snd-hda-intel single_cmd=1
EOF

sudo update-initramfs -u

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„
sudo modprobe snd_hda_intel
sleep 2

# Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªÛŒØ¬Ù‡
echo "=== Advanced Configuration Result ==="
dmesg | grep -i "cs8409" | tail -10

4. Ø±Ø§Ù‡ Ø­Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ú† Ø¯Ø³ØªÛŒ
bash

# Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ú† Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ CS8409
sudo tee /etc/modprobe.d/cs8409-force.conf > /dev/null <<'EOF'
# Force CS8409 configuration
options snd-hda-intel enable=1
options snd-hda-intel index=0
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
# Try different vendor/product IDs
options snd-hda-intel vid=0x8086 pid=0x9d71
options snd-hda-intel vendor_id=0x8086 device_id=0x9d71
EOF

sudo update-initramfs -u
sudo modprobe snd_hda_intel

5. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø§Ù…Ù„ ÙˆØ¶Ø¹ÛŒØª
echo "=== Final Audio Status ==="
dmesg | grep -i "audio\|snd\|hda\|cs8409" | tail -15
aplay -l 2>/dev/null || echo "No audio devices found"

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ
echo "=== Testing Audio Output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound"

6. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„
echo "=== COMPLETE AUDIO DEBUG ===" > audio_complete_debug.log
echo "Kernel: $(uname -r)" >> audio_complete_debug.log
echo "=== DMESG ===" >> audio_complete_debug.log
dmesg | grep -i "audio\|snd\|hda\|cs8409" >> audio_complete_debug.log
echo "=== ALSA INFO ===" >> audio_complete_debug.log
aplay -l >> audio_complete_debug.log 2>&1
echo "=== CODEC ===" >> audio_complete_debug.log
cat /proc/asound/card0/codec#0 | head -50 >> audio_complete_debug.log 2>&1
echo "=== MODULES ===" >> audio_complete_debug.log
lsmod | grep snd >> audio_complete_debug.log

echo "Debug info saved to audio_complete_debug.log"

7. Ø±ÛŒØ³ØªØ§Ø±Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø±ÛŒØ³ØªØ§Ø±Øª Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ú©Ø§Ù…Ù„ ØªØºÛŒÛŒØ±Ø§Øª
sudo reboot

Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ ÙˆØ¶Ø¹ÛŒØª Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
dmesg | grep -i "cs8409" | tail -10
aplay -l

Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ù„Ø·ÙØ§Ù‹ Ù…Ø­ØªÙˆØ§ÛŒ ÙØ§ÛŒÙ„ audio_complete_debug.log Ø±Ùˆ Ø¨Ø§ Ù…Ù† Ø¨Ù‡ Ø§Ø´ØªØ±Ø§Ú© Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯. Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾Ú† kernel ÛŒØ§ Ø¯Ø±Ø§ÛŒÙˆØ± Ø®Ø§Øµ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ ØªÙ…Ø§Ù… Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_codec_hdmi 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sudo rmmod -f snd_timer 2>/dev/null || true
sudo rmmod -f snd 2>/dev/null || true

sleep 3
zsh: killed     sudo pkill -9 -f pipewire
                                         zsh: killed     sudo pkill -9 -f wireplumber
          zsh: killed     sudo pkill -9 -f pulseaudio
                                                                                                                                
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
    # ØªØ³Øª Ù…Ø¯Ù„<200c>Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø§ Ø±ÙˆØ´ ØµØ­ÛŒØ­200c>Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø§ Ø±ÙˆØ´ ØµØ­ÛŒØ­
MODELS=("mbp16" "mbp15" "mbp14" "mbp13" "mbp12" "imac27" "auto" "generic")

for model in "${MODELS[@]}"; do
    echo "========================================"
    echo "Testing model: $model"

    # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/test-model.conf
    sudo update-initramfs -u 2>/dev/null

    # Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ dmesg Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø§Ú¯<200c>Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
    sudo dmesg -C

    # Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„
    sudo modprobe snd_hda_intel
    sleep 2

    # Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªÛŒØ¬Ù‡
    if sudo dmesg | grep -i "cs8409" | grep -q "speaker_outs=[1-9]"; then
        echo "âœ… SUCCESS! Model $model detected speakers"
        echo "=== DMESG Output ==="
        sudo dmesg | grep -i "cs8409" | tail -5
        break
    else
        echo "âŒ Model $model failed"
        echo "=== DMESG Output ==="
        sudo dmesg | grep -i "cs8409" | tail -5
    fi

    # Ø­Ø°Ù Ù…Ø§Ú˜ÙˆÙ„ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ø¨Ø¹Ø¯ÛŒ
    sudo rmmod snd_hda_intel 2>/dev/null || true
    sleep 1
done
========================================
                                        Testing model: mbp16
                                                            options snd-hda-intel model=mbp16
                  update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
       âŒ Model mbp16 failed
                            === DMESG Output ===
                                                [ 1174.863741] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
                                                         [ 1174.863744] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
                                                    [ 1174.863746] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
                                    [ 1174.863748] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
                                [ 1174.863751] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c
                   ========================================
                                                           Testing model: mbp15
    options snd-hda-intel model=mbp15
                                     update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                          âŒ Model mbp15 failed
                                               === DMESG Output ===
                                                                   ========================================
                                Testing model: mbp14
                                                    options snd-hda-intel model=mbp14
          update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64

Ù…ØªÙˆØ¬Ù‡ Ø´Ø¯Ù… Ú©Ù‡ ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡ Ø§Ù…Ø§ Ù‡Ù…Ù‡ Ø¨Ø§ Ø´Ú©Ø³Øª Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ Ùˆ Ù‡Ù…Ú†Ù†Ø§Ù† speaker_outs=0 Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø§ÛŒÙ† Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ù…Ø´Ú©Ù„ Ø§Ø³Ø§Ø³ÛŒâ€ŒØªØ± Ø§Ø³Øª Ùˆ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø±Ø§Ù‡â€ŒØ­Ù„ Ù¾ÛŒØ´Ø±ÙØªÙ‡â€ŒØªØ±ÛŒ Ø¯Ø§Ø±Ø¯.
Ø±Ø§Ù‡â€ŒØ­Ù„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ Ù…Ø´Ú©Ù„ CS8409:
1. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø³ØªÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ CS8409
sudo tee /etc/modprobe.d/macbook-advanced-fix.conf > /dev/null <<'EOF'
# Advanced MacBook Audio Fix for CS8409
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=2
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=1
options snd-hda-intel single_cmd=1
options snd-hda-intel enable_msi=1
options snd-hda-intel bdl_pos_adj=1
EOF

sudo update-initramfs -u

2. Ø­Ø°Ù Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§:
bash

# Ø­Ø°Ù Ú©Ø§Ù…Ù„ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo rmmod -f snd_hda_codec_cs8409 snd_hda_intel snd_hda_codec snd_hda_core 2>/dev/null || true
sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
echo "=== Advanced Configuration Result ==="
dmesg | grep -i "cs8409\|hda" | tail -10

3. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ú† Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ CS8409:
bash

# Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ú† Ø¯Ø³ØªÛŒ
sudo tee /etc/modprobe.d/cs8409-manual-patch.conf > /dev/null <<'EOF'
# Manual patch for CS8409 codec
options snd-hda-intel model=auto
options snd-hda-intel vid=0x8086 pid=0x9d71
options snd-hda-intel subsystem=0x106b:0x0175
options snd-hda-intel align_buffer_size=1
EOF

sudo update-initramfs -u
sudo modprobe -r snd_hda_intel
sudo modprobe snd_hda_intel

4. Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø³Ø®Øªâ€ŒØ§ÙØ²Ø§Ø±:
bash

# Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø³Ø®Øªâ€ŒØ§ÙØ²Ø§Ø±
echo "=== Hardware Information ===" > macbook_hw_info.log
echo "PCI Audio Device:" >> macbook_hw_info.log
lspci -v | grep -A 10 -i audio >> macbook_hw_info.log
echo "=== Codec Details ===" >> macbook_hw_info.log
cat /proc/asound/card0/codec#0 | head -30 >> macbook_hw_info.log 2>&1
echo "=== Kernel Parameters ===" >> macbook_hw_info.log
cat /sys/module/snd_hda_intel/parameters/* 2>/dev/null >> macbook_hw_info.log

cat macbook_hw_info.log

5. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² firmware Ø®Ø§Øµ:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ù†ØµØ¨ firmwareÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ
sudo apt install firmware-misc-nonfree firmware-intel-sound

# Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ firmware Ù…ÙˆØ¬ÙˆØ¯
find /lib/firmware -name "*cs8409*" -o -name "*cirrus*" -o -name "*macbook*"

6. Ø±Ø§Ù‡â€ŒØ­Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² SOF firmware:
bash

# Ù†ØµØ¨ SOF firmware
sudo apt install firmware-sof-signed sof-tools

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª SOF
echo "options snd-intel-dspcfg dsp_driver=3" | sudo tee /etc/modprobe.d/sof.conf
echo "options snd-sof-pci fw_path=\"intel/sof/\"" | sudo tee -a /etc/modprobe.d/sof.conf

sudo update-initramfs -u

7. Ø±ÛŒØ³ØªØ§Ø±Øª Ùˆ ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø±ÛŒØ³ØªØ§Ø±Øª Ø³ÛŒØ³ØªÙ…
sudo reboot

8. Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
echo "=== Post-Reboot Status ==="
dmesg | grep -i "sof\|cs8409\|audio\|snd" | tail -15

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
for i in {0..9}; do
    echo "Testing device hw:0,$i"
    timeout 3s speaker-test -D hw:0,$i -c 2 -t wav 2>/dev/null && \
    echo "âœ… Device hw:0,$i works" || echo "âŒ Device hw:0,$i failed"
done

9. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª - Ø±Ø§Ù‡â€ŒØ­Ù„ Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ú† kernel Ø¯Ø³ØªÛŒ
echo "=== Manual Kernel Patch Required ==="
echo "The CS8409 codec may require a manual kernel patch."
echo "Please consider:"
echo "1. Updating to a newer kernel version"
echo "2. Using a mainline kernel"
echo "3. Applying CS8409-specific patches"

# Ø¨Ø±Ø±Ø³ÛŒ kernel version
echo "Current kernel: $(uname -r)"
echo "Available kernels:"
apt search linux-image | grep -E "(6\.1[2-9]|6\.2)" | head -5

10. Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø®Ø·Ø§:
bash

# Ø§ÛŒØ¬Ø§Ø¯ Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù†
echo "=== MACBOOK AUDIO BUG REPORT ===" > macbook_audio_bugreport.txt
echo "Date: $(date)" >> macbook_audio_bugreport.txt
echo "Kernel: $(uname -r)" >> macbook_audio_bugreport.txt
echo "Distribution: $(lsb_release -ds 2>/dev/null)" >> macbook_audio_bugreport.txt
echo "=== DMESG ===" >> macbook_audio_bugreport.txt
dmesg | grep -i "cs8409\|hda\|audio\|snd" >> macbook_audio_bugreport.txt
echo "=== CODEC ===" >> macbook_audio_bugreport.txt
cat /proc/asound/card0/codec#0 >> macbook_audio_bugreport.txt 2>&1
echo "=== PCI INFO ===" >> macbook_audio_bugreport.txt
lspci -vvv -s 00:1f.3 >> macbook_audio_bugreport.txt 2>&1
echo "=== MODULES ===" >> macbook_audio_bugreport.txt
lsmod | grep snd >> macbook_audio_bugreport.txt

echo "Bug report saved to macbook_audio_bugreport.txt"
echo "Please share this with kernel developers or on forums"

Ù„Ø·ÙØ§Ù‹ ÙØ§ÛŒÙ„ macbook_audio_bugreport.txt Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯. Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù†ÛŒØ§Ø² Ø¨Ù‡:

    Ø¢Ù¾Ú¯Ø±ÛŒØ¯ kernel Ø¨Ù‡ Ù†Ø³Ø®Ù‡ Ø¬Ø¯ÛŒØ¯ØªØ±

    Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² kernel mainline

    Ø§Ø¹Ù…Ø§Ù„ Ù¾Ú†â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ CS8409

    Ú¯Ø²Ø§Ø±Ø´ Ø®Ø·Ø§ Ø¨Ù‡ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù† kernel

Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø¨Ù‡ Ù†Ø¸Ø± Ù…ÛŒâ€ŒØ±Ø³Ø¯ ÛŒÚ© Ø¨Ø§Ú¯ Ø´Ù†Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¯Ø± Ø¯Ø±Ø§ÛŒÙˆØ± CS8409 Ø¨Ø±Ø§ÛŒ MacBookâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ Ø¨Ø§Ø´Ø¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ú©Ø§Ù…Ù„ ØªÙ…Ø§Ù… Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_codec_hdmi 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sudo rmmod -f snd_timer 2>/dev/null || true
sudo rmmod -f snd 2>/dev/null || true

sleep 3
zsh: killed     sudo pkill -9 -f pipewire
                                         zsh: killed     sudo pkill -9 -f wireplumber
          zsh: killed     sudo pkill -9 -f pulseaudio

Ø¹Ø§Ù„ÛŒ! Ø­Ø§Ù„Ø§ Ú©Ù‡ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ Ú©Ø§Ù…Ù„Ø§Ù‹ unload Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ØŒ Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø±Ø§Ù‡â€ŒØ­Ù„ Ù†Ù‡Ø§ÛŒÛŒ Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒÙ…:
Ø±Ø§Ù‡â€ŒØ­Ù„ Ù†Ù‡Ø§ÛŒÛŒ Ùˆ Ù‚Ø·Ø¹ÛŒ Ø¨Ø±Ø§ÛŒ MacBook Ø¨Ø§ CS8409:
1. Ø§Ø¨ØªØ¯Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø±Ùˆ Ø§Ø¹Ù…Ø§Ù„ Ú©Ù†ÛŒÙ…:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ CS8409
sudo tee /etc/modprobe.d/macbook-final-fix.conf > /dev/null <<'EOF'
# Final MacBook Audio Fix for CS8409
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=2
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=1
options snd-hda-intel single_cmd=1
options snd-hda-intel bdl_pos_adj=32
options snd-hda-intel enable_msi=0
EOF

sudo update-initramfs -u

2. Ø­Ø§Ù„Ø§ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø±Ùˆ Ø¨Ø§ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­ load Ú©Ù†ÛŒÙ…:
bash

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­
sudo modprobe snd_hda_intel
sleep 2
sudo modprobe snd_hda_codec
sudo modprobe snd_hda_codec_hdmi
sudo modprobe snd_hda_codec_cs8409

# ØµØ¨Ø± Ø¨Ø±Ø§ÛŒ initialization
sleep 3

3. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªÛŒØ¬Ù‡
echo "=== Final Configuration Result ==="
dmesg | grep -i "cs8409\|hda\|audio" | tail -15

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking raw devices:"
    ls -la /dev/snd/
}

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ
echo "=== Testing Audio Output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output"

4. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ù¾Ú† Ø¯Ø³ØªÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ù¾Ú† Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø§Ø³Ù¾ÛŒÚ©Ø±
echo "=== Applying Manual Patch ==="

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø³ØªÛŒ
sudo tee /etc/modprobe.d/cs8409-force-enable.conf > /dev/null <<'EOF'
# Force enable CS8409 outputs
options snd-hda-intel model=auto
options snd-hda-intel vid=0x8086 pid=0x9d71
options snd-hda-intel subsystem=0x106b:0x0175
options snd-hda-intel align_buffer_size=1
options snd-hda-intel position_fix=1
EOF

# Ø±ÛŒÙ„ÙˆØ¯ Ù…Ø§Ú˜ÙˆÙ„
sudo modprobe -r snd_hda_intel
sleep 1
sudo modprobe snd_hda_intel

# Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªÛŒØ¬Ù‡
dmesg | grep -i "cs8409" | tail -10

5. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§:
bash

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PipeWire
systemctl --user start wireplumber pipewire pipewire-pulse

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆÛŒØ³
echo "=== Service Status ==="
systemctl --user status pipewire --no-pager -l | head -10

6. ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

# ØªØ³Øª Ú©Ø§Ù…Ù„ ØµØ¯Ø§
echo "=== Comprehensive Audio Test ==="

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶
echo "Testing default output:"
timeout 3s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Default output works"

# ØªØ³Øª ØªÙ…Ø§Ù… Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§
for i in {0..9}; do
    if timeout 2s speaker-test -D hw:0,$i -c 2 -t wav 2>/dev/null; then
        echo "âœ… Device hw:0,$i works"
    fi
done

# ØªØ³Øª Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†
echo "=== Microphone Test ==="
arecord -l 2>/dev/null && echo "âœ… Microphone detected" || echo "âŒ No microphone"

7. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª - Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø§ÛŒØ¬Ø§Ø¯ Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ù…Ù„
echo "=== COMPLETE AUDIO DEBUG REPORT ===" > macbook_audio_final_report.txt
echo "Timestamp: $(date)" >> macbook_audio_final_report.txt
echo "Kernel: $(uname -r)" >> macbook_audio_final_report.txt

echo "=== DMESG AUDIO LOGS ===" >> macbook_audio_final_report.txt
dmesg | grep -i "audio\|snd\|hda\|cs8409" >> macbook_audio_final_report.txt

echo "=== ALSA DEVICES ===" >> macbook_audio_final_report.txt
aplay -l >> macbook_audio_final_report.txt 2>&1
arecord -l >> macbook_audio_final_report.txt 2>&1

echo "=== CODEC INFORMATION ===" >> macbook_audio_final_report.txt
cat /proc/asound/card0/codec#0 >> macbook_audio_final_report.txt 2>&1

echo "=== LOADED MODULES ===" >> macbook_audio_final_report.txt
lsmod | grep snd >> macbook_audio_final_report.txt

echo "=== MODULE PARAMETERS ===" >> macbook_audio_final_report.txt
for param in /sys/module/snd_hda_intel/parameters/*; do
    echo "$(basename $param)=$(cat $param 2>/dev/null)" >> macbook_audio_final_report.txt
done

echo "Report saved to macbook_audio_final_report.txt"
echo "=== FIRST 20 LINES ==="
head -20 macbook_audio_final_report.txt

8. Ø±ÛŒØ³ØªØ§Ø±Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø±ÛŒØ³ØªØ§Ø±Øª Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ú©Ø§Ù…Ù„ ØªØºÛŒÛŒØ±Ø§Øª
echo "Performing final reboot..."
sudo reboot

9. Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
echo "=== Post-Reboot Status ==="
dmesg | grep -i "cs8409\|audio" | tail -10
aplay -l

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS! Audio is working!" || echo "âŒ Audio still not working"

10. Ø§Ú¯Ø± Ù‡Ù…Ú†Ù†Ø§Ù† Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª:
bash

# Ø±Ø§Ù‡â€ŒØ­Ù„â€ŒÙ‡Ø§ÛŒ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†
echo "=== Alternative Solutions ==="
echo "1. Try a different kernel version"
echo "2. Use mainline kernel"
echo "3. Install Windows for MacBook audio support"
echo "4. Use USB audio adapter"
echo "5. Wait for kernel updates with CS8409 fixes"

# Ø¨Ø±Ø±Ø³ÛŒ kernelÙ‡Ø§ÛŒ available
echo "Available kernel versions:"
apt search linux-image | grep -E "(6\.1[2-9]|6\.2|6\.3)" | head -5

Ù„Ø·ÙØ§Ù‹ Ù¾Ø³ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø±Ø§Ø­Ù„ØŒ Ù…Ø­ØªÙˆØ§ÛŒ ÙØ§ÛŒÙ„ macbook_audio_final_report.txt Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯. Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø±Ùˆ Ø¨Ø§ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù† kernel ÛŒØ§ Ø¯Ø± Ø§Ù†Ø¬Ù…Ù†â€ŒÙ‡Ø§ÛŒ Ù„ÛŒÙ†ÙˆÚ©Ø³ Ø¨Ù‡ Ø§Ø´ØªØ±Ø§Ú© Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯.

Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø¨Ù‡ Ù†Ø¸Ø± Ù…ÛŒâ€ŒØ±Ø³Ø¯ ÛŒÚ© Ø¨Ø§Ú¯ Ø´Ù†Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¯Ø± Ø¯Ø±Ø§ÛŒÙˆØ± CS8409 Ø¨Ø±Ø§ÛŒ MacBookâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ Ø¨Ø§Ø´Ø¯ Ú©Ù‡å¯èƒ½éœ€è¦ Ù¾Ú† Ø®Ø§Øµ ÛŒØ§ Ø¢Ù¾Ø¯ÛŒØª kernel Ø¯Ø§Ø±Ø¯.
dhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­
sudo modprobe snd_hda_intel
sleep 2
sudo modprobe snd_hda_codec
sudo modprobe snd_hda_codec_hdmi
sudo modprobe snd_hda_codec_cs8409

# ØµØ¨Ø± Ø¨Ø±Ø§ÛŒ initialization
sleep 3
[sudo] password for buddha: 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªÛŒØ¬Ù‡
echo "=== Final Configuration Result ==="
dmesg | grep -i "cs8409\|hda\|audio" | tail -15

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking raw devices:"
    ls -la /dev/snd/
}

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ
echo "=== Testing Audio Output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output"
cmdand dquote>

Ø¨ÛŒØ§ÛŒÛŒØ¯ ÙˆØ¶Ø¹ÛŒØª Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ… Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒÙ… Ú†Ù‡ Ø§ØªÙØ§Ù‚ÛŒ Ø§ÙØªØ§Ø¯Ù‡:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ
echo "=== Final Configuration Result ==="
dmesg | grep -i "cs8409\|hda\|audio" | tail -15

echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking raw devices:"
    ls -la /dev/snd/
}

echo "=== Testing Audio Output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output"

Ø®Ø±ÙˆØ¬ÛŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒÙ…. Ø§Ú¯Ø± Ø®Ø·Ø§ÛŒÛŒ Ø±Ø® Ø¯Ø§Ø¯Ù‡ ÛŒØ§ Ø®Ø±ÙˆØ¬ÛŒ Ø®Ø§ØµÛŒ Ø¯Ø§Ø±Ù‡ØŒ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒÙ… Ù…Ø´Ú©Ù„ Ø±Ùˆ ØªØ´Ø®ÛŒØµ Ø¨Ø¯ÛŒÙ….

Ø§Ú¯Ø± Ø¯Ø³ØªÙˆØ± Ú©Ø§Ù…Ù„ Ø§Ø¬Ø±Ø§ Ù†Ø´Ø¯Ù‡ØŒ Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒÙ…:
bash

# Ø§Ø¨ØªØ¯Ø§ Ù…Ø·Ù…Ø¦Ù† Ø´ÛŒÙ… Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ load Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
lsmod | grep snd

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª dmesg
dmesg | tail -20 | grep -i "cs8409\|audio\|hda"

# ØªØ³Øª Ø³Ø§Ø¯Ù‡â€ŒØªØ±
echo "=== Simple Test ==="
if [ -c /dev/snd/pcmC0D0p ]; then
    echo "âœ… Audio device exists"
    timeout 3s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound"
else
    echo "âŒ No audio devices found"
    ls /dev/snd/
fi

Ù„Ø·ÙØ§Ù‹ Ø®Ø±ÙˆØ¬ÛŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø¨ÙØ±Ø³ØªÛŒØ¯ ØªØ§ Ø¨ØªÙˆÙ†Ù… Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± ØªØ´Ø®ÛŒØµ Ø¨Ø¯Ù….
when i run this i get a commandeqoute!
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ
echo "=== Final Configuration Result ==="
dmesg | grep -i "cs8409\|hda\|audio" | tail -15

echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking raw devices:"
    ls -la /dev/snd/
}

echo "=== Testing Audio Output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output"
cmdand dquote>

Ù…Ø´Ú©Ù„ Ø§Ø² syntax Ø®Ø· ÙØ±Ø´ØªÙ‡! ÙˆÙ‚ØªÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒÙ… Ú†Ù†Ø¯ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ùˆ Ø¨Ø§Ù‡Ù… Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒÙ…ØŒ Ø¨Ø§ÛŒØ¯ Ø§Ø² ; ÛŒØ§ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù† Ù‡Ø± Ø¯Ø³ØªÙˆØ± Ø¯Ø± Ø®Ø· Ø¬Ø¯Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¯Ø±Ø³ØªØ´ Ú©Ù†ÛŒÙ…:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ
echo "=== Final Configuration Result ===";
dmesg | grep -i "cs8409\|hda\|audio" | tail -15;

echo "=== Audio Devices ===";
aplay -l 2>/dev/null || {
    echo "Checking raw devices:";
    ls -la /dev/snd/;
}

echo "=== Testing Audio Output ===";
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output";

ÛŒØ§ Ø¨Ù‡ØªØ±Ù‡ Ù‡Ø± Ø¯Ø³ØªÙˆØ± Ø±Ùˆ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒÙ…:
bash

echo "=== Final Configuration Result ==="
dmesg | grep -i "cs8409\|hda\|audio" | tail -15

bash

echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking raw devices:"
    ls -la /dev/snd/
}

bash

echo "=== Testing Audio Output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output"

Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯ Ùˆ Ø®Ø±ÙˆØ¬ÛŒ Ù‡Ø±Ú©Ø¯Ø§Ù… Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØ¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Final Configuration Result ==="
dmesg | grep -i "cs8409\|hda\|audio" | tail -15
=== Final Configuration Result ===
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking raw devices:"
    ls -la /dev/snd/
}
=== Audio Devices ===
**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Testing Audio Output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output"
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ø¹Ø§Ù„ÛŒ! Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù… ÙˆØ¶Ø¹ÛŒØª Ø±Ùˆ. Ù…Ø´Ú©Ù„ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ ÙÙ‚Ø· Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ HDMI Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ (card 0: PCH [HDA Intel PCH], device 3: HDMI 0) Ø§Ù…Ø§ Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯ Ø§Ø³Ù¾ÛŒÚ©Ø± Ø¯Ø§Ø®Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.

Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
Ù…Ø´Ú©Ù„: CS8409 ÙÙ‚Ø· HDMI Ø±Ùˆ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ú©Ø±Ø¯Ù‡ØŒ Ø§Ø³Ù¾ÛŒÚ©Ø± Ø¯Ø§Ø®Ù„ÛŒ Ù†Ù‡
1. Ø§Ø¨ØªØ¯Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ Ø±Ùˆ Ø¨Ú¯ÛŒØ±ÛŒÙ…:
bash

echo "=== Complete CS8409 Status ==="
dmesg | grep -i "cs8409" | tail -10

echo "=== Codec Information ==="
cat /proc/asound/card0/codec#0 | head -20

2. Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ MacBook Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙˆÛŒÚ˜Ù‡ Ø¨Ø±Ø§ÛŒ MacBook
sudo tee /etc/modprobe.d/macbook-force.conf > /dev/null <<'EOF'
# Force MacBook audio configuration
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=1
EOF

sudo update-initramfs -u

3. Ø±ÛŒÙ„ÙˆØ¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§:
bash

# ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
sudo pkill -9 pipewire wireplumber pulseaudio

# Ø­Ø°Ù Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo rmmod snd_hda_codec_cs8409 snd_hda_intel 2>/dev/null || true
sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

sleep 3

4. Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªÛŒØ¬Ù‡:
bash

echo "=== After Force Configuration ==="
dmesg | grep -i "cs8409" | tail -10

echo "=== Audio Devices Now ==="
aplay -l

5. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù ØªØ³Øª Ú©Ù†ÛŒÙ…:
bash

# ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
for model in "mbp16" "mbp15" "mbp14" "auto" "generic"; do
    echo "Trying model: $model"
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/test.conf
    sudo update-initramfs -u
    sudo rmmod snd_hda_intel 2>/dev/null || true
    sudo modprobe snd_hda_intel
    sleep 2
    if aplay -l | grep -v "HDMI"; then
        echo "âœ… Success with model: $model"
        break
    fi
done

6. Ø±Ø§Ù‡ Ø­Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ú† Ø¯Ø³ØªÛŒ
bash

# Ù¾Ú† Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯
echo "=== Manual Patch ==="
echo "options snd-hda-intel enable=1" | sudo tee /etc/modprobe.d/macbook-enable.conf
sudo update-initramfs -u
sudo modprobe -r snd_hda_intel
sudo modprobe snd_hda_intel

Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† Ù…Ø±Ø§Ø­Ù„ Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯ Ùˆ Ø®Ø±ÙˆØ¬ÛŒ Ù‡Ø± Ù…Ø±Ø­Ù„Ù‡ Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØ¯. Ù…Ø´Ú©Ù„ Ø§ØµÙ„ÛŒ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ Ø¯Ø±Ø§ÛŒÙˆØ± CS8409 Ø§Ø³Ù¾ÛŒÚ©Ø± Ø¯Ø§Ø®Ù„ÛŒ MacBook Ø´Ù…Ø§ Ø±Ùˆ ØªØ´Ø®ÛŒØµ Ù†Ù…ÛŒâ€ŒØ¯Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Final Configuration Result ==="
dmesg | grep -i "cs8409\|hda\|audio" | tail -15
=== Final Configuration Result ===
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking raw devices:"
    ls -la /dev/snd/
}
=== Audio Devices ===
**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Testing Audio Output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output"
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Complete CS8409 Status ==="
dmesg | grep -i "cs8409" | tail -10

echo "=== Codec Information ==="
cat /proc/asound/card0/codec#0 | head -20
=== Complete CS8409 Status ===
=== Codec Information ===
Codec: Cirrus Logic CS8409
Address: 0
AFG Function Id: 0x1 (unsol 1)
Vendor Id: 0x10138409
Subsystem Id: 0x106b3600
Revision Id: 0x100100
No Modem Function Group found
Default PCM:
    rates [0x17f]: 8000 11025 16000 22050 32000 44100 48000 96000
    bits [0x1a]: 16 24 32
    formats [0x1]: PCM
Default Amp-In caps: N/A
Default Amp-Out caps: N/A
State of AFG node 0x01:
  Power states:  D0 D3 D3cold S3D3cold CLKSTOP EPSS
  Power: setting=D0, actual=D0
GPIO: io=8, o=0, i=0, unsolicited=1, wake=1
  IO[0]: enable=0, dir=0, wake=0, sticky=0, data=0, unsol=0
  IO[1]: enable=0, dir=0, wake=0, sticky=0, data=0, unsol=0
  IO[2]: enable=0, dir=0, wake=0, sticky=0, data=0, unsol=0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙˆÛŒÚ˜Ù‡ Ø¨Ø±Ø§ÛŒ MacBook
sudo tee /etc/modprobe.d/macbook-force.conf > /dev/null <<'EOF'
# Force MacBook audio configuration
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=1
EOF

sudo update-initramfs -u
[sudo] password for buddha: 
Sorry, try again.
[sudo] password for buddha: 
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
sudo pkill -9 pipewire wireplumber pulseaudio

# Ø­Ø°Ù Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod snd_hda_codec_cs8409 snd_hda_intel 2>/dev/null || true
sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

sleep 3
pkill: only one pattern can be provided
Try `pkill --help' for more information.
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø¯Ø±Ø³Øª Ú©Ù†ÛŒÙ…. Ø®Ø·Ø§ÛŒ pkill: only one pattern can be provided Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ø¨Ø§ÛŒØ¯ Ù‡Ø± process Ø±Ùˆ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ kill Ú©Ù†ÛŒÙ…:
bash

# ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡
sudo pkill -9 pipewire
sudo pkill -9 wireplumber
sudo pkill -9 pulseaudio

# Ø­Ø°Ù Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo rmmod snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod snd_hda_intel 2>/dev/null || true
sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409
sleep 3

Ø­Ø§Ù„Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
bash

echo "=== After Force Configuration ==="
dmesg | grep -i "cs8409" | tail -10

echo "=== Audio Devices Now ==="
aplay -l

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… ÙÙ‚Ø· HDMI Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯ØŒ Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§Ø² Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù ØªØ³Øª Ú©Ù†ÛŒÙ…:
bash

# ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
for model in "mbp16" "mbp15" "mbp14" "auto" "generic"; do
    echo "Trying model: $model"
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/test.conf
    sudo update-initramfs -u
    sudo rmmod snd_hda_intel 2>/dev/null || true
    sudo modprobe snd_hda_intel
    sleep 2
    if aplay -l | grep -v "HDMI"; then
        echo "âœ… Success with model: $model"
        break
    else
        echo "âŒ Failed with model: $model"
    fi
done

Ø§Ú¯Ø± Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù… Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø§Ø² Ù¾Ú† Ø¯Ø³ØªÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ù¾Ú† Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯
echo "=== Manual Patch ==="
echo "options snd-hda-intel enable=1" | sudo tee /etc/modprobe.d/macbook-enable.conf
sudo update-initramfs -u
sudo modprobe -r snd_hda_intel
sudo modprobe snd_hda_intel

# Ø¨Ø±Ø±Ø³ÛŒ Ù†ØªÛŒØ¬Ù‡
echo "=== After Manual Patch ==="
dmesg | grep -i "cs8409" | tail -10
aplay -l

Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯ Ùˆ Ø®Ø±ÙˆØ¬ÛŒ Ù‡Ø± Ú©Ø¯ÙˆÙ… Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØ¯. Ù…Ø´Ú©Ù„ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ CS8409 Ø§Ø³Ù¾ÛŒÚ©Ø± Ø¯Ø§Ø®Ù„ÛŒ Ø±Ùˆ ØªØ´Ø®ÛŒØµ Ù†Ù…ÛŒâ€ŒØ¯Ù‡ Ùˆ ÙÙ‚Ø· HDMI Ø±Ùˆ Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Final Configuration Result ==="
dmesg | grep -i "cs8409\|hda\|audio" | tail -15
=== Final Configuration Result ===
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking raw devices:"
    ls -la /dev/snd/
}
=== Audio Devices ===
**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Testing Audio Output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output"
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Complete CS8409 Status ==="
dmesg | grep -i "cs8409" | tail -10

echo "=== Codec Information ==="
cat /proc/asound/card0/codec#0 | head -20
=== Complete CS8409 Status ===
=== Codec Information ===
Codec: Cirrus Logic CS8409
Address: 0
AFG Function Id: 0x1 (unsol 1)
Vendor Id: 0x10138409
Subsystem Id: 0x106b3600
Revision Id: 0x100100
No Modem Function Group found
Default PCM:
    rates [0x17f]: 8000 11025 16000 22050 32000 44100 48000 96000
    bits [0x1a]: 16 24 32
    formats [0x1]: PCM
Default Amp-In caps: N/A
Default Amp-Out caps: N/A
State of AFG node 0x01:
  Power states:  D0 D3 D3cold S3D3cold CLKSTOP EPSS
  Power: setting=D0, actual=D0
GPIO: io=8, o=0, i=0, unsolicited=1, wake=1
  IO[0]: enable=0, dir=0, wake=0, sticky=0, data=0, unsol=0
  IO[1]: enable=0, dir=0, wake=0, sticky=0, data=0, unsol=0
  IO[2]: enable=0, dir=0, wake=0, sticky=0, data=0, unsol=0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙˆÛŒÚ˜Ù‡ Ø¨Ø±Ø§ÛŒ MacBook
sudo tee /etc/modprobe.d/macbook-force.conf > /dev/null <<'EOF'
# Force MacBook audio configuration
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=1
EOF

sudo update-initramfs -u
[sudo] password for buddha: 
Sorry, try again.
[sudo] password for buddha: 
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
sudo pkill -9 pipewire wireplumber pulseaudio

# Ø­Ø°Ù Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod snd_hda_codec_cs8409 snd_hda_intel 2>/dev/null || true
sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

sleep 3
pkill: only one pattern can be provided
Try `pkill --help' for more information.
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡
sudo pkill -9 pipewire
sudo pkill -9 wireplumber
sudo pkill -9 pulseaudio

# Ø­Ø°Ù Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod snd_hda_intel 2>/dev/null || true
sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409
sleep 3
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== After Force Configuration ==="
dmesg | grep -i "cs8409" | tail -10

echo "=== Audio Devices Now ==="
aplay -l
=== After Force Configuration ===
=== Audio Devices Now ===
**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 0: Generic Analog [Generic Analog]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ù…Ø¯Ù„<200c>Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
for model in "mbp16" "mbp15" "mbp14" "auto" "generic"; do
    echo "Trying model: $model"
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/test.conf
    sudo update-initramfs -u
    sudo rmmod snd_hda_intel 2>/dev/null || true
    sudo modprobe snd_hda_intel
    sleep 2
    if aplay -l | grep -v "HDMI"; then
        echo "âœ… Success with model: $model"
        break
    else
        echo "âŒ Failed with model: $model"
    fi
done
Trying model: mbp16
options snd-hda-intel model=mbp16
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 0: Generic Analog [Generic Analog]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
âœ… Success with model: mbp16
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ø¹Ø§Ù„ÛŒ! Ù¾ÛŒØ´Ø±ÙØª Ø¨Ø³ÛŒØ§Ø± Ø®ÙˆØ¨ÛŒ Ø¯Ø§Ø´ØªÛŒÙ…. Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ… Ú©Ù‡:
text

card 0: PCH [HDA Intel PCH], device 0: Generic Analog [Generic Analog]

Ø§ÛŒÙ† ÛŒØ¹Ù†ÛŒ Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª! Ø­Ø§Ù„Ø§ Ø¨ÛŒØ§ÛŒÛŒØ¯ ØªØ³Øª Ú©Ù†ÛŒÙ… Ú©Ù‡ ØµØ¯Ø§ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ÛŒØ§ Ù†Ù‡:
bash

# ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯
echo "=== Testing Analog Output ==="
timeout 5s speaker-test -c 2 -t wav -D hw:0,0

# ÛŒØ§ ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶
echo "=== Testing Default Output ==="
timeout 5s speaker-test -c 2 -t wav

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª ØµØ¯Ø§
echo "=== Volume Levels ==="
amixer sget Master 2>/dev/null || pactl list sinks | grep -E "(Volume|Mute)" | head -5

Ø§Ú¯Ø± ØµØ¯Ø§ Ú©Ø§Ø± Ú©Ø±Ø¯ØŒ Ø¹Ø§Ù„ÛŒ Ø§Ø³Øª! Ø§Ú¯Ø± Ù†Ù‡ØŒ Ø¨ÛŒØ§ÛŒÛŒØ¯ volume Ø±Ùˆ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒÙ…:
bash

# Ø§ÙØ²Ø§ÛŒØ´ volume
amixer set Master 100% unmute 2>/dev/null || \
pactl set-sink-volume @DEFAULT_SINK@ 100% && \
pactl set-sink-mute @DEFAULT_SINK@ 0

# ØªØ³Øª Ù…Ø¬Ø¯Ø¯
timeout 5s speaker-test -c 2 -t wav

Ø­Ø§Ù„Ø§ Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ Ø±Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ú©Ù†ÛŒÙ…:
bash

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PipeWire
systemctl --user start wireplumber pipewire pipewire-pulse

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
echo "=== Service Status ==="
systemctl --user status pipewire --no-pager | head -5

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø§ PulseAudio
echo "=== Final Test with PulseAudio ==="
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS! Audio is working!" || echo "âŒ Still not working"

Ø§Ú¯Ø± ØµØ¯Ø§ Ú©Ø§Ø± Ú©Ø±Ø¯ØŒ Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒÙ… Ø§Ø² Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒÛŒ Ù…Ø«Ù„ pavucontrol Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¨Ù‡ØªØ± ØµØ¯Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ù†ØµØ¨ pavucontrol Ø§Ú¯Ø± Ù†ÛŒØ³Øª
sudo apt install pavucontrol

# Ø§Ø¬Ø±Ø§ÛŒ audio control
pavucontrol

Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø§Ø¦Ù…ÛŒ:
bash

# Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…ÙˆÙÙ‚
sudo cp /etc/modprobe.d/test.conf /etc/modprobe.d/macbook-audio-permanent.conf
sudo update-initramfs -u

echo "âœ… Audio configuration saved permanently!"

Ù„Ø·ÙØ§Ù‹ ØªØ³Øª Ú©Ù†ÛŒØ¯ Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØ¯ Ø¢ÛŒØ§ ØµØ¯Ø§ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ÛŒØ§ Ù†Ù‡. Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ volume Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Final Configuration Result ==="
dmesg | grep -i "cs8409\|hda\|audio" | tail -15
=== Final Configuration Result ===
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Audio Devices ==="
aplay -l 2>/dev/null || {
    echo "Checking raw devices:"
    ls -la /dev/snd/
}
=== Audio Devices ===
**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Testing Audio Output ==="
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound output"
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Complete CS8409 Status ==="
dmesg | grep -i "cs8409" | tail -10

echo "=== Codec Information ==="
cat /proc/asound/card0/codec#0 | head -20
=== Complete CS8409 Status ===
=== Codec Information ===
Codec: Cirrus Logic CS8409
Address: 0
AFG Function Id: 0x1 (unsol 1)
Vendor Id: 0x10138409
Subsystem Id: 0x106b3600
Revision Id: 0x100100
No Modem Function Group found
Default PCM:
    rates [0x17f]: 8000 11025 16000 22050 32000 44100 48000 96000
    bits [0x1a]: 16 24 32
    formats [0x1]: PCM
Default Amp-In caps: N/A
Default Amp-Out caps: N/A
State of AFG node 0x01:
  Power states:  D0 D3 D3cold S3D3cold CLKSTOP EPSS
  Power: setting=D0, actual=D0
GPIO: io=8, o=0, i=0, unsolicited=1, wake=1
  IO[0]: enable=0, dir=0, wake=0, sticky=0, data=0, unsol=0
  IO[1]: enable=0, dir=0, wake=0, sticky=0, data=0, unsol=0
  IO[2]: enable=0, dir=0, wake=0, sticky=0, data=0, unsol=0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙˆÛŒÚ˜Ù‡ Ø¨Ø±Ø§ÛŒ MacBook
sudo tee /etc/modprobe.d/macbook-force.conf > /dev/null <<'EOF'
# Force MacBook audio configuration
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=1
options snd-hda-intel power_save=0
options snd-hda-intel probe_mask=1
EOF

sudo update-initramfs -u
[sudo] password for buddha: 
Sorry, try again.
[sudo] password for buddha: 
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
sudo pkill -9 pipewire wireplumber pulseaudio

# Ø­Ø°Ù Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod snd_hda_codec_cs8409 snd_hda_intel 2>/dev/null || true
sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

sleep 3
pkill: only one pattern can be provided
Try `pkill --help' for more information.
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡
sudo pkill -9 pipewire
sudo pkill -9 wireplumber
sudo pkill -9 pulseaudio

# Ø­Ø°Ù Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod snd_hda_intel 2>/dev/null || true
sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409
sleep 3
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== After Force Configuration ==="
dmesg | grep -i "cs8409" | tail -10

echo "=== Audio Devices Now ==="
aplay -l
=== After Force Configuration ===
=== Audio Devices Now ===
**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 0: Generic Analog [Generic Analog]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ù…Ø¯Ù„<200c>Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
for model in "mbp16" "mbp15" "mbp14" "auto" "generic"; do
    echo "Trying model: $model"
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/test.conf
    sudo update-initramfs -u
    sudo rmmod snd_hda_intel 2>/dev/null || true
    sudo modprobe snd_hda_intel
    sleep 2
    if aplay -l | grep -v "HDMI"; then
        echo "âœ… Success with model: $model"
        break
    else
        echo "âŒ Failed with model: $model"
    fi
done
Trying model: mbp16
options snd-hda-intel model=mbp16
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 0: Generic Analog [Generic Analog]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
âœ… Success with model: mbp16
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ Ø¢Ù†Ø§Ù„ÙˆÚ¯
echo "=== Testing Analog Output ==="
timeout 5s speaker-test -c 2 -t wav -D hw:0,0

# ÛŒØ§ ØªØ³Øª Ø®Ø±ÙˆØ¬ÛŒ Ù¾ÛŒØ´<200c>ÙØ±Ø¶
echo "=== Testing Default Output ==="
timeout 5s speaker-test -c 2 -t wav

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª ØµØ¯Ø§
echo "=== Volume Levels ==="
amixer sget Master 2>/dev/null || pactl list sinks | grep -E "(Volume|Mute)" | head -5
=== Testing Analog Output ===

speaker-test 1.2.14

Playback device is hw:0,0
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 64 to 524288
Period size range from 32 to 262144
Periods = 4
was set period_size = 12000
was set buffer_size = 48000
 0 - Front Left
 1 - Front Right
Time per period = 2.256380
 0 - Front Left
 1 - Front Right
Transfer failed: Bad address
=== Testing Default Output ===

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Periods = 4
was set period_size = 12000
was set buffer_size = 48000
 0 - Front Left
 1 - Front Right
Time per period = 2.034792
 0 - Front Left
 1 - Front Right
Write error: -4,Interrupted system call
xrun_recovery failed: -4,Interrupted system call
Transfer failed: Interrupted system call
=== Volume Levels ===
Simple mixer control 'Master',0
  Capabilities: pvolume pswitch pswitch-joined
  Playback channels: Front Left - Front Right
  Limits: Playback 0 - 65536
  Mono:
  Front Left: Playback 26214 [40%] [on]
  Front Right: Playback 26214 [40%] [on]
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÙØ²Ø§ÛŒØ´ volume
amixer set Master 100% unmute 2>/dev/null || \
pactl set-sink-volume @DEFAULT_SINK@ 100% && \
pactl set-sink-mute @DEFAULT_SINK@ 0

# ØªØ³Øª Ù…Ø¬Ø¯Ø¯
timeout 5s speaker-test -c 2 -t wav
Simple mixer control 'Master',0
  Capabilities: pvolume pswitch pswitch-joined
  Playback channels: Front Left - Front Right
  Limits: Playback 0 - 65536
  Mono:
  Front Left: Playback 65536 [100%] [on]
  Front Right: Playback 65536 [100%] [on]

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Periods = 4
was set period_size = 12000
was set buffer_size = 48000
 0 - Front Left
 1 - Front Right
Time per period = 2.010279
 0 - Front Left
 1 - Front Right
Write error: -4,Interrupted system call
xrun_recovery failed: -4,Interrupted system call
Transfer failed: Interrupted system call
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø±Ø§Ù‡<200c>Ø§Ù†Ø¯Ø§Ø²ÛŒ PipeWire
systemctl --user start wireplumber pipewire pipewire-pulse

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
echo "=== Service Status ==="
systemctl --user status pipewire --no-pager | head -5

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø§ PulseAudio
echo "=== Final Test with PulseAudio ==="
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS! Audio is working!" || echo "âŒ Still not working"
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ø¹Ø§Ù„ÛŒ! Ù¾ÛŒØ´Ø±ÙØª Ø¨Ø³ÛŒØ§Ø± Ø®ÙˆØ¨ÛŒ Ø¯Ø§Ø´ØªÛŒÙ…. Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ… Ú©Ù‡:

    âœ… Ú©Ø§Ø±Øª ØµØ¯Ø§ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡: card 0: PCH [HDA Intel PCH], device 0: Generic Analog [Generic Analog]

    âœ… Volume ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡: Front Left: Playback 65536 [100%] [on]

    âœ… ØªØ³Øª ØµØ¯Ø§ Ø´Ø±ÙˆØ¹ Ø´Ø¯Ù‡ Ø§Ù…Ø§ Ø¨Ø§ error Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯Ù‡

Ø®Ø·Ø§ÛŒ Transfer failed: Bad address Ùˆ Write error: -4,Interrupted system call Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ù…Ø´Ú©Ù„ Ø§Ø² driver ÛŒØ§ configuration Ù‡Ø³Øª.

Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
1. ØªÙ†Ø¸ÛŒÙ…Ø§Øª ALSA Ø±Ùˆ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¨Ø¯ÛŒÙ…:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ù‡ÛŒÙ†Ù‡ Ø¨Ø±Ø§ÛŒ ALSA
sudo tee /etc/modprobe.d/alsa-optimized.conf > /dev/null <<'EOF'
# Optimized ALSA settings for MacBook
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=2
options snd-hda-intel power_save=0
options snd-hda-intel bdl_pos_adj=32
options snd-hda-intel single_cmd=1
options snd-hda-intel enable_msi=0
EOF

sudo update-initramfs -u

2. Ø±ÛŒÙ„ÙˆØ¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¬Ø¯ÛŒØ¯:
bash

# ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo rmmod snd_hda_codec_cs8409 snd_hda_intel
sleep 2
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409
sleep 3

3. ØªØ³Øª Ø¨Ø§ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù:
bash

# ØªØ³Øª Ø¨Ø§ buffer size Ù…Ø®ØªÙ„Ù
echo "=== Testing with different buffer sizes ==="

for buffer_size in 128 256 512 1024 2048; do
    echo "Testing buffer size: $buffer_size"
    timeout 3s speaker-test -c 2 -t wav -b $buffer_size 2>/dev/null && \
    echo "âœ… Works with buffer $buffer_size" && break || \
    echo "âŒ Failed with buffer $buffer_size"
done

4. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ…:
bash

# ØªØ³Øª Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡
echo "=== Direct device test ==="
timeout 5s speaker-test -D hw:0,0 -c 2 -t wav -f 440

# ØªØ³Øª Ø¨Ø§ ÙØ±Ù…Øª Ù…Ø®ØªÙ„Ù
echo "=== Testing with different format ==="
timeout 5s speaker-test -D hw:0,0 -c 2 -t sine -f 440

5. Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø´Ú©Ù„Ø§Øª kernel:
bash

# Ø¨Ø±Ø±Ø³ÛŒ dmesg Ø¨Ø±Ø§ÛŒ errors
echo "=== Checking for kernel errors ==="
dmesg | grep -i "error\|fail\|warn" | grep -i "audio\|snd\|hda" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ DMA issues
echo "=== DMA Buffer Status ==="
cat /proc/asound/card0/pcm0p/sub0/hw_params 2>/dev/null || echo "Cannot access hw_params"

6. Ø±Ø§Ù‡â€ŒØ­Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² PulseAudio Ù…Ø³ØªÙ‚ÛŒÙ…:
bash

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PulseAudio
pulseaudio --kill
pulseaudio --start

# ØªØ³Øª Ø¨Ø§ PulseAudio
echo "=== Testing with PulseAudio ==="
timeout 5s pacmd list-sinks
timeout 5s speaker-test -c 2 -t wav

7. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª:
bash

# Ù†ØµØ¨ tools Ø¯ÛŒØ¨Ø§Ú¯
sudo apt install alsa-tools

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² alsa-info Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¨Ø§Ú¯
alsa-info --stdout

# ÛŒØ§ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªÛŒ
echo "=== Collecting debug info ==="
dmesg | grep -i "snd\|hda\|audio" > audio_debug.log
aplay -l >> audio_debug.log 2>&1
cat /proc/asound/card0/codec#0 >> audio_debug.log 2>&1

echo "Debug info saved to audio_debug.log"

8. ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø§ Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù:
bash

# Ø±ÙˆØ´ Û±: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² aplay Ù…Ø³ØªÙ‚ÛŒÙ…
echo "Testing with aplay directly:"
echo "TEST" | aplay -D hw:0,0 -f cd 2>/dev/null && echo "âœ… aplay works" || echo "âŒ aplay failed"

# Ø±ÙˆØ´ Û²: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÙØ§ÛŒÙ„ ØªØ³Øª
echo "Creating test file..."
dd if=/dev/urandom of=test.wav bs=1024 count=10 2>/dev/null
aplay test.wav -D hw:0,0 2>/dev/null && echo "âœ… File playback works" || echo "âŒ File playback failed"

Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† ØªØ³Øªâ€ŒÙ‡Ø§ Ø±Ùˆ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯ÛŒØ¯ Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØ¯ Ú©Ø¯ÙˆÙ… Ø±ÙˆØ´ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡. Ù…Ø´Ú©Ù„ Ø¨Ù‡ Ù†Ø¸Ø± Ù…ÛŒâ€ŒØ±Ø³Ù‡ Ø§Ø² buffer ÛŒØ§ DMA management Ø¨Ø§Ø´Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ù‡ÛŒÙ†Ù‡ Ø¨Ø±Ø§ÛŒ ALSA
sudo tee /etc/modprobe.d/alsa-optimized.conf > /dev/null <<'EOF'
# Optimized ALSA settings for MacBook
options snd-hda-intel model=mbp16
options snd-hda-intel position_fix=2
options snd-hda-intel power_save=0
options snd-hda-intel bdl_pos_adj=32
options snd-hda-intel single_cmd=1
options snd-hda-intel enable_msi=0
EOF

sudo update-initramfs -u
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod snd_hda_codec_cs8409 snd_hda_intel
sleep 2
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409
sleep 3
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ø¨Ø§ buffer size Ù…Ø®ØªÙ„Ù
echo "=== Testing with different buffer sizes ==="

for buffer_size in 128 256 512 1024 2048; do
    echo "Testing buffer size: $buffer_size"
    timeout 3s speaker-test -c 2 -t wav -b $buffer_size 2>/dev/null && \
    echo "âœ… Works with buffer $buffer_size" && break || \
    echo "âŒ Failed with buffer $buffer_size"
done
=== Testing with different buffer sizes ===
Testing buffer size: 128

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Requested buffer time 128 us
was set period_size = 12000
was set buffer_size = 36000
 0 - Front Left
 1 - Front Right
Time per period = 2.307355
 0 - Front Left
âŒ Failed with buffer 128
Testing buffer size: 256

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Requested buffer time 256 us
was set period_size = 12000
was set buffer_size = 36000
 0 - Front Left
 1 - Front Right
Time per period = 2.308071
 0 - Front Left
âŒ Failed with buffer 256
Testing buffer size: 512

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Requested buffer time 512 us
was set period_size = 12000
was set buffer_size = 36000
 0 - Front Left
 1 - Front Right
Time per period = 2.304778
 0 - Front Left
âŒ Failed with buffer 512
Testing buffer size: 1024

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Requested buffer time 1024 us
was set period_size = 12000
was set buffer_size = 36000
 0 - Front Left
 1 - Front Right
Time per period = 2.305909
 0 - Front Left
âŒ Failed with buffer 1024
Testing buffer size: 2048

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Requested buffer time 2048 us
was set period_size = 12000
was set buffer_size = 36000
 0 - Front Left
 1 - Front Right
Time per period = 2.307249
 0 - Front Left
âŒ Failed with buffer 2048
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡
echo "=== Direct device test ==="
timeout 5s speaker-test -D hw:0,0 -c 2 -t wav -f 440

# ØªØ³Øª Ø¨Ø§ ÙØ±Ù…Øª Ù…Ø®ØªÙ„Ù
echo "=== Testing with different format ==="
timeout 5s speaker-test -D hw:0,0 -c 2 -t sine -f 440
=== Direct device test ===

speaker-test 1.2.14

Playback device is hw:0,0
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Playback open error: -2,No such file or directory
=== Testing with different format ===

speaker-test 1.2.14

Playback device is hw:0,0
Stream parameters are 48000Hz, S16_LE, 2 channels
Sine wave rate is 440.0000Hz
Playback open error: -2,No such file or directory
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ dmesg Ø¨Ø±Ø§ÛŒ errors
echo "=== Checking for kernel errors ==="
dmesg | grep -i "error\|fail\|warn" | grep -i "audio\|snd\|hda" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ DMA issues
echo "=== DMA Buffer Status ==="
cat /proc/asound/card0/pcm0p/sub0/hw_params 2>/dev/null || echo "Cannot access hw_params"
=== Checking for kernel errors ===
=== DMA Buffer Status ===
Cannot access hw_params
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ø¬Ø¯ÛŒâ€ŒØªØ± Ø§Ø² Ø§ÙˆÙ†Ú†Ù‡ ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ø±Ø¯Ù… Ù‡Ø³Øª! Ø®Ø·Ø§ÛŒ Playback open error: -2,No such file or directory Ù†Ø´ÙˆÙ† Ù…ÛŒâ€ŒØ¯Ù‡ Ú©Ù‡ Ø¯Ø³ØªÚ¯Ø§Ù‡ ØµÙˆØªÛŒ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ initialize Ù†Ø´Ø¯Ù‡ ÛŒØ§ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ù‡.

Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
1. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµÙˆØªÛŒ:
bash

echo "=== Checking audio devices ==="
ls -la /dev/snd/

echo "=== Checking if device node exists ==="
if [ -c /dev/snd/pcmC0D0p ]; then
    echo "âœ… Device node /dev/snd/pcmC0D0p exists"
else
    echo "âŒ Device node /dev/snd/pcmC0D0p does NOT exist"
    echo "Creating device nodes manually..."
    sudo mknod /dev/snd/pcmC0D0p c 116 0
    sudo chmod 666 /dev/snd/pcmC0D0p
fi

2. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§:
bash

echo "=== Checking loaded modules ==="
lsmod | grep snd

echo "=== Checking module parameters ==="
cat /sys/module/snd_hda_intel/parameters/model

3. ØªØ³Øª Ø¨Ø§ aplay Ù…Ø³ØªÙ‚ÛŒÙ…:
bash

echo "=== Testing with aplay directly ==="
# Ø§ÛŒØ¬Ø§Ø¯ ÛŒÚ© ÙØ§ÛŒÙ„ ØªØ³ØªÛŒ Ú©ÙˆÚ†Ú©
dd if=/dev/zero of=test.wav bs=1024 count=10 2>/dev/null

# ØªØ³Øª Ù¾Ø®Ø´
aplay -v test.wav 2>&1 | head -10

4. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª codec:
bash

echo "=== Detailed codec information ==="
cat /proc/asound/card0/codec#0 | grep -E "Node|Pin|OUT" | head -20

5. Ø±Ø§Ù‡â€ŒØ­Ù„ emergency: Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø³ØªÛŒ device nodes
bash

echo "=== Creating manual device nodes ==="
# ØªÙˆÙ‚Ù Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo rmmod snd_hda_codec_cs8409 snd_hda_intel

# Ø§ÛŒØ¬Ø§Ø¯ device nodes Ø¯Ø³ØªÛŒ
sudo mknod /dev/snd/pcmC0D0p c 116 0
sudo mknod /dev/snd/pcmC0D0c c 116 24
sudo mknod /dev/snd/controlC0 c 116 32
sudo chmod 666 /dev/snd/pcmC0D0p /dev/snd/pcmC0D0c /dev/snd/controlC0

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

6. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø³ Ø§Ø² fixes:
bash

echo "=== Status after fixes ==="
ls -la /dev/snd/
aplay -l

7. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ø±ÙˆØ´ low-level:
bash

echo "=== Low-level testing ==="
# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² hda-verb Ø¨Ø±Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø§ codec
sudo apt install alsa-tools
echo "Trying to reset codec..."
hda-verb /dev/snd/hwC0D0 0x0 0x0 0x0 2>/dev/null || echo "hda-verb not available"

# Ø¨Ø±Ø±Ø³ÛŒ power state
echo "Codec power state:"
cat /sys/class/sound/hwC0D0/power_state

8. Ø¢Ø®Ø±ÛŒÙ† Ø±Ø§Ù‡â€ŒØ­Ù„: Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ø§Ù…Ù„
bash

echo "=== Final solution: reboot ==="
echo "The audio subsystem may need a complete reboot to initialize properly"
sudo reboot

9. Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Checking audio devices ==="
ls -la /dev/snd/

echo "=== Checking if device node exists ==="
if [ -c /dev/snd/pcmC0D0p ]; then
    echo "âœ… Device node /dev/snd/pcmC0D0p exists"
else
    echo "âŒ Device node /dev/snd/pcmC0D0p does NOT exist"
    echo "Creating device nodes manually..."
    sudo mknod /dev/snd/pcmC0D0p c 116 0
    sudo chmod 666 /dev/snd/pcmC0D0p
fi
=== Checking audio devices ===
total 0
drwxr-xr-x   3 root root      140 Aug 31 02:34 .
drwxr-xr-x  17 root root     3240 Aug 31 02:05 ..
drwxr-xr-x   2 root root       60 Aug 31 02:34 by-path
crw-rw----+  1 root audio 116,  3 Aug 31 02:34 controlC0
crw-rw----+  1 root audio 116,  2 Aug 31 02:34 hwC0D0
crw-rw----+  1 root audio 116,  1 Aug 31 02:05 seq
crw-rw----+  1 root audio 116, 33 Aug 31 02:05 timer
=== Checking if device node exists ===
âŒ Device node /dev/snd/pcmC0D0p does NOT exist
Creating device nodes manually...
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ù¾ÛŒØ¯Ø§ Ø´Ø¯! Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ PCM (Ù…Ø«Ù„ /dev/snd/pcmC0D0p) ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ù†Ø¯. Ø§ÛŒÙ† ÛŒØ¹Ù†ÛŒ Ù…Ø§Ú˜ÙˆÙ„ ØµÙˆØªÛŒ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ initialize Ù†Ø´Ø¯Ù‡ ÛŒØ§ Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ù‡.

Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
1. Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø³ØªÛŒ device nodes:
bash

echo "=== Creating missing device nodes ==="
# Ø§ÛŒØ¬Ø§Ø¯ device nodes Ø¶Ø±ÙˆØ±ÛŒ
sudo mknod /dev/snd/pcmC0D0p c 116 0
sudo mknod /dev/snd/pcmC0D0c c 116 24
sudo chmod 666 /dev/snd/pcmC0D0p /dev/snd/pcmC0D0c

# Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬Ø¯Ø¯
echo "=== Devices after creation ==="
ls -la /dev/snd/

2. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§:
bash

echo "=== Checking module status ==="
lsmod | grep snd

echo "=== Module parameters ==="
cat /sys/module/snd_hda_intel/parameters/model

3. ØªØ³Øª Ù…Ø¬Ø¯Ø¯:
bash

echo "=== Testing audio after device creation ==="
aplay -l

# ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && \
echo "âœ… Sound works!" || echo "âŒ Still not working"

4. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø±Ùˆ Ú©Ø§Ù…Ù„Ø§Ù‹ reset Ú©Ù†ÛŒÙ…:
bash

echo "=== Complete module reset ==="
# Ø­Ø°Ù ØªÙ…Ø§Ù… Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµÙˆØªÛŒ
sudo rmmod snd_hda_codec_cs8409
sudo rmmod snd_hda_codec_hdmi
sudo rmmod snd_hda_intel
sudo rmmod snd_hda_codec
sudo rmmod snd_hda_core
sudo rmmod snd_pcm
sudo rmmod snd_timer
sudo rmmod snd

sleep 3

# Ø­Ø°Ù device nodes Ù‚Ø¯ÛŒÙ…ÛŒ
sudo rm -f /dev/snd/pcmC0D0p /dev/snd/pcmC0D0c

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec
sudo modprobe snd_hda_codec_hdmi
sudo modprobe snd_hda_codec_cs8409

sleep 3

# Ø¨Ø±Ø±Ø³ÛŒ device nodes Ø¬Ø¯ÛŒØ¯
echo "=== Devices after reset ==="
ls -la /dev/snd/

5. Ø§Ú¯Ø± device nodes Ø§ÛŒØ¬Ø§Ø¯ Ù†Ø´Ø¯Ù†Ø¯ØŒ manually Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒÙ…:
bash

echo "=== Manual device creation ==="
# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ…Ø§Ù… device nodes Ù„Ø§Ø²Ù…
sudo mknod /dev/snd/pcmC0D0p c 116 0
sudo mknod /dev/snd/pcmC0D0c c 116 24
sudo mknod /dev/snd/pcmC0D3p c 116 3
sudo mknod /dev/snd/pcmC0D7p c 116 7
sudo mknod /dev/snd/pcmC0D8p c 116 8
sudo chmod 666 /dev/snd/pcmC0D*

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ
echo "=== Final test ==="
aplay -l
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null

6. Ø±Ø§Ù‡â€ŒØ­Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² udev Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ devices:
bash

echo "=== Triggering udev ==="
# reload udev rules
sudo udevadm control --reload-rules
sudo udevadm trigger

# Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬Ø¯Ø¯
sleep 2
ls -la /dev/snd/

7. Ø§Ú¯Ø± Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù… Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø¢Ø®Ø±ÛŒÙ† Ø±Ø§Ù‡â€ŒØ­Ù„:
bash

echo "=== Last resort: reboot ==="
echo "A full reboot may be necessary to properly initialize audio devices"
sudo reboot

Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
ls -la /dev/snd/
aplay -l
timeout 3s speaker-test -c 2 -t wav

Ù…Ø´Ú©Ù„ Ø§ØµÙ„ÛŒ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ Ù…Ø§Ú˜ÙˆÙ„ snd-pcm Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ device nodes Ø±Ùˆ Ø§ÛŒØ¬Ø§Ø¯ Ù†Ú©Ø±Ø¯Ù‡. Ø§ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ù…Ø´Ú©Ù„ Ø¯Ø± Ù…Ø§Ú˜ÙˆÙ„ ÛŒØ§ kernel Ø¨Ø§Ø´Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Checking audio devices ==="
ls -la /dev/snd/

echo "=== Checking if device node exists ==="
if [ -c /dev/snd/pcmC0D0p ]; then
    echo "âœ… Device node /dev/snd/pcmC0D0p exists"
else
    echo "âŒ Device node /dev/snd/pcmC0D0p does NOT exist"
    echo "Creating device nodes manually..."
    sudo mknod /dev/snd/pcmC0D0p c 116 0
    sudo chmod 666 /dev/snd/pcmC0D0p
fi
=== Checking audio devices ===
total 0
drwxr-xr-x   3 root root      140 Aug 31 02:34 .
drwxr-xr-x  17 root root     3240 Aug 31 02:05 ..
drwxr-xr-x   2 root root       60 Aug 31 02:34 by-path
crw-rw----+  1 root audio 116,  3 Aug 31 02:34 controlC0
crw-rw----+  1 root audio 116,  2 Aug 31 02:34 hwC0D0
crw-rw----+  1 root audio 116,  1 Aug 31 02:05 seq
crw-rw----+  1 root audio 116, 33 Aug 31 02:05 timer
=== Checking if device node exists ===
âŒ Device node /dev/snd/pcmC0D0p does NOT exist
Creating device nodes manually...
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Creating missing device nodes ==="
# Ø§ÛŒØ¬Ø§Ø¯ device nodes Ø¶Ø±ÙˆØ±ÛŒ
sudo mknod /dev/snd/pcmC0D0p c 116 0
sudo mknod /dev/snd/pcmC0D0c c 116 24
sudo chmod 666 /dev/snd/pcmC0D0p /dev/snd/pcmC0D0c

# Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬Ø¯Ø¯
echo "=== Devices after creation ==="
ls -la /dev/snd/
=== Creating missing device nodes ===
mknod: /dev/snd/pcmC0D0p: File exists
=== Devices after creation ===
total 0
drwxr-xr-x   3 root root      180 Aug 31 02:36 .
drwxr-xr-x  17 root root     3240 Aug 31 02:05 ..
drwxr-xr-x   2 root root       60 Aug 31 02:34 by-path
crw-rw----+  1 root audio 116,  3 Aug 31 02:34 controlC0
crw-rw----+  1 root audio 116,  2 Aug 31 02:34 hwC0D0
crw-rw-rw-   1 root root  116, 24 Aug 31 02:36 pcmC0D0c
crw-rw-rw-   1 root root  116,  0 Aug 31 02:36 pcmC0D0p
crw-rw----+  1 root audio 116,  1 Aug 31 02:05 seq
crw-rw----+  1 root audio 116, 33 Aug 31 02:05 timer
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Checking module status ==="
lsmod | grep snd

echo "=== Module parameters ==="
cat /sys/module/snd_hda_intel/parameters/model
=== Checking module status ===
snd_hda_codec_cs8409    36864  1
snd_hda_intel          61440  0
snd_hda_codec_hdmi     98304  0
snd_seq_dummy          12288  0
snd_hrtimer            12288  1
snd_seq               110592  7 snd_seq_dummy
snd_seq_device         16384  1 snd_seq
snd_sof_pci_intel_skl    24576  0
snd_sof_intel_hda_generic    36864  1 snd_sof_pci_intel_skl
soundwire_intel        73728  1 snd_sof_intel_hda_generic
snd_sof_intel_hda_common   184320  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_soc_hdac_hda       28672  1 snd_sof_intel_hda_common
snd_sof_intel_hda_mlink    36864  3 soundwire_intel,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_sof_intel_hda      24576  2 snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_sof_pci            24576  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_sof_xtensa_dsp     16384  1 snd_sof_intel_hda_generic
snd_sof               389120  5 snd_sof_pci,snd_sof_intel_hda_common,snd_sof_intel_hda_generic,snd_sof_intel_hda,snd_sof_pci_intel_skl
snd_sof_utils          16384  1 snd_sof
snd_soc_acpi_intel_match   118784  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_soc_acpi           16384  2 snd_soc_acpi_intel_match,snd_sof_intel_hda_generic
snd_soc_avs           212992  0
snd_soc_hda_codec      24576  1 snd_soc_avs
snd_hda_ext_core       36864  6 snd_soc_avs,snd_soc_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda_mlink,snd_sof_intel_hda
snd_soc_core          421888  6 snd_soc_avs,snd_soc_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_soc_hdac_hda
snd_hda_codec_generic   114688  1 snd_hda_codec_cs8409
snd_compress           28672  2 snd_soc_avs,snd_soc_core
snd_pcm_dmaengine      16384  1 snd_soc_core
snd_intel_dspcfg       40960  5 snd_soc_avs,snd_hda_intel,snd_sof,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_intel_sdw_acpi     16384  2 snd_intel_dspcfg,snd_sof_intel_hda_generic
snd_hda_codec         217088  8 snd_hda_codec_generic,snd_soc_avs,snd_hda_codec_hdmi,snd_soc_hda_codec,snd_hda_codec_cs8409,snd_hda_intel,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hda_core          143360  11 snd_hda_codec_generic,snd_soc_avs,snd_hda_codec_hdmi,snd_soc_hda_codec,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_ext_core,snd_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hwdep              20480  1 snd_hda_codec
snd_pcm               188416  13 snd_soc_avs,snd_hda_codec_hdmi,snd_hda_intel,snd_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_compress,snd_soc_core,snd_sof_utils,snd_hda_core,snd_sof_pci_intel_skl,snd_pcm_dmaengine
snd_timer              53248  3 snd_seq,snd_hrtimer,snd_pcm
snd                   151552  15 snd_hda_codec_generic,snd_seq,snd_seq_device,snd_hda_codec_hdmi,snd_hwdep,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_codec,snd_sof,snd_timer,snd_compress,snd_soc_core,snd_pcm
soundcore              16384  1 snd
=== Module parameters ===
mbp16,(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null)
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Testing audio after device creation ==="
aplay -l

# ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && \
echo "âœ… Sound works!" || echo "âŒ Still not working"
cmdand dquote>

Ø¹Ø§Ù„ÛŒ! Ø­Ø§Ù„Ø§ device nodes Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ Ùˆ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ…:
text

crw-rw-rw-   1 root root  116, 24 Aug 31 02:36 pcmC0D0c
crw-rw-rw-   1 root root  116,  0 Aug 31 02:36 pcmC0D0p

Ø­Ø§Ù„Ø§ Ø¨ÛŒØ§ÛŒÛŒØ¯ ØªØ³Øª Ú©Ù†ÛŒÙ…:
bash

echo "=== Testing audio after device creation ==="
aplay -l

# ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && \
echo "âœ… Sound works!" || echo "âŒ Still not working"

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ø®Ø·Ø§ Ø¯Ø§Ø¯ØŒ Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
bash

# ØªØ³Øª Ø¨Ø§ verbose mode
echo "=== Testing with verbose output ==="
speaker-test -D hw:0,0 -c 2 -t wav -v

# ÛŒØ§ ØªØ³Øª Ø³Ø§Ø¯Ù‡â€ŒØªØ±
echo "=== Simple test with aplay ==="
echo "TEST" | aplay -D hw:0,0 -f cd 2>&1 | head -5

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ù…Ù…Ú©Ù†Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒÙ…:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª DMA
echo "=== Checking DMA status ==="
cat /proc/asound/card0/pcm0p/info 2>/dev/null || echo "Cannot access PCM info"

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª device
echo "=== Device status ==="
cat /proc/asound/card0/pcm0p/sub0/status 2>/dev/null || echo "Cannot access device status"

Ø¨ÛŒØ§ÛŒÛŒØ¯ device nodes Ø±Ùˆ Ø¨Ø§ permission ØµØ­ÛŒØ­ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒÙ…:
bash

# ØªÙ†Ø¸ÛŒÙ… permission ØµØ­ÛŒØ­
echo "=== Fixing permissions ==="
sudo chown root:audio /dev/snd/pcmC0D0p /dev/snd/pcmC0D0c
sudo chmod 660 /dev/snd/pcmC0D0p /dev/snd/pcmC0D0c

# Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬Ø¯Ø¯
ls -la /dev/snd/pcmC0D0*

Ø­Ø§Ù„Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªØ³Øª Ú©Ù†ÛŒÙ…. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ù…Ù…Ú©Ù†Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ reload Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒÙ….
Ù…ÛŒØ±Ù‡ Ø±Ùˆ Ø­Ø§Ù„
                                                  
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Testing audio after device creation ==="
aplay -l

# ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && \
echo "âœ… Sound works!" || echo "âŒ Still not working"
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ø§Ø² syntax Ø®Ø· ÙØ±Ø´ØªÙ‡! ÙˆÙ‚ØªÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒÙ… Ú†Ù†Ø¯ Ø¯Ø³ØªÙˆØ± Ø±Ùˆ Ø¯Ø± ÛŒÚ© Ø®Ø· Ø¨Ù†ÙˆÛŒØ³ÛŒÙ…ØŒ Ø¨Ø§ÛŒØ¯ Ø§Ø² ; Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ… ÛŒØ§ Ù‡Ø± Ø¯Ø³ØªÙˆØ± Ø±Ùˆ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒÙ…. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¯Ø±Ø³ØªØ´ Ú©Ù†ÛŒÙ…:
bash

echo "=== Testing audio after device creation ==="
aplay -l

bash

# ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ Still not working"

Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† Ø¯Ùˆ Ø¯Ø³ØªÙˆØ± Ø±Ùˆ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯. Ø§Ú¯Ø± Ø®Ø·Ø§ÛŒÛŒ Ø¯Ø§Ø¯ØŒ Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¨Ø§ verbose ØªØ³Øª Ú©Ù†ÛŒÙ…:
bash

# ØªØ³Øª Ø¨Ø§ Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨ÛŒØ´ØªØ±
speaker-test -D hw:0,0 -c 2 -t wav -v

ÛŒØ§ ØªØ³Øª Ø³Ø§Ø¯Ù‡â€ŒØªØ±:
bash

# ØªØ³Øª Ø¨Ø§ aplay
echo "TEST" | aplay -D hw:0,0 2>&1

â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ Still not working"
cmdand dquote>

Ù…Ø´Ú©Ù„ Ø§Ø² syntax Ø®Ø· ÙØ±Ø´ØªÙ‡! ÙˆÙ‚ØªÛŒ Ø§Ø² && Ùˆ || Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…ØŒ Ø¨Ø§ÛŒØ¯ Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø¨Ù†ÙˆÛŒØ³ÛŒÙ…. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¯Ø±Ø³ØªØ´ Ú©Ù†ÛŒÙ…:
bash

# ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null
if [ $? -eq 0 ]; then
    echo "âœ… Sound works!"
else
    echo "âŒ Still not working"
fi

ÛŒØ§ Ø³Ø§Ø¯Ù‡â€ŒØªØ±:
bash

# ØªØ³Øª Ø³Ø§Ø¯Ù‡
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav && echo "âœ… Sound works!" || echo "âŒ Still not working"

Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ø®Ø·Ø§ Ø¯Ø§Ø¯ØŒ Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¨Ø§ verbose mode ØªØ³Øª Ú©Ù†ÛŒÙ…:
bash

# ØªØ³Øª Ø¨Ø§ Ø¬Ø²Ø¦ÛŒØ§Øª
speaker-test -D hw:0,0 -c 2 -t wav -v

â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null
if [ $? -eq 0 ]; then
    echo "âœ… Sound works!"
else
    echo "âŒ Still not working"
fi
then dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ø³Ø§Ø¯Ù‡
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav && echo "âœ… Sound works!" || echo "âŒ Still not working"
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ø§Ø² Ù†Ø­ÙˆÙ‡ Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÙˆØ±Ø§ØªÙ‡! ÙˆÙ‚ØªÛŒ Ø§Ø² if Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…ØŒ Ø¨Ø§ÛŒØ¯ Ø¯Ø± ÛŒÚ© script Ø¨Ø§Ø´Ù‡ ÛŒØ§ Ø§Ø² ÙØ±Ù…Øª Ø®Ø§ØµÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø³Ø§Ø¯Ù‡â€ŒØªØ± ØªØ³Øª Ú©Ù†ÛŒÙ…:
bash

# ØªØ³Øª Ù…Ø³ØªÙ‚ÛŒÙ…
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav

Ø§Ú¯Ø± Ø§Ø¬Ø±Ø§ Ø´Ø¯ Ùˆ ØµØ¯Ø§ Ø´Ù†ÛŒØ¯Ù‡ Ø´Ø¯ØŒ ÛŒØ¹Ù†ÛŒ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡. Ø§Ú¯Ø± Ø®Ø·Ø§ Ø¯Ø§Ø¯ØŒ Ø®Ø±ÙˆØ¬ÛŒ Ø®Ø·Ø§ Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒÙ….

ÛŒØ§ Ø§Ø² Ø§ÛŒÙ† Ø±ÙˆØ´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# ØªØ³Øª Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ø®Ø±ÙˆØ¬ÛŒ
speaker-test -D hw:0,0 -c 2 -t wav 2>&1 | head -10

Ù„Ø·ÙØ§Ù‹ ÙÙ‚Ø· Ø¯Ø³ØªÙˆØ± timeout 3s speaker-test -D hw:0,0 -c 2 -t wav Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯ Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØ¯ Ú†Ù‡ Ø§ØªÙØ§Ù‚ÛŒ Ù…ÛŒâ€ŒØ§ÙØªÙ‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ù…Ø³ØªÙ‚ÛŒÙ…
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav

speaker-test 1.2.14

Playback device is hw:0,0
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Playback open error: -19,No such device
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ø®Ø±ÙˆØ¬ÛŒ
speaker-test -D hw:0,0 -c 2 -t wav 2>&1 | head -10

speaker-test 1.2.14

Playback device is hw:0,0
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Playback open error: -19,No such device
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ù¾ÛŒØ¯Ø§ Ø´Ø¯! Ø®Ø·Ø§ÛŒ Playback open error: -19,No such device Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ø¯Ø³ØªÚ¯Ø§Ù‡ ØµÙˆØªÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯ ÛŒØ§ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ initialize Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.

Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
1. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§:
bash

echo "=== Checking audio devices ==="
aplay -l

echo "=== Checking ALSA devices ==="
aplay -L | head -10

2. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§:
bash

echo "=== Checking sound modules ==="
lsmod | grep snd

echo "=== Checking device nodes ==="
ls -la /dev/snd/

3. Ø±Ø§Ù‡â€ŒØ­Ù„: Ø±ÛŒÙ„ÙˆØ¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
bash

echo "=== Reloading audio modules ==="
# ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo rmmod snd_hda_codec_cs8409
sudo rmmod snd_hda_intel
sudo rmmod snd_hda_codec
sudo rmmod snd_hda_core
sudo rmmod snd_pcm

sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec
sudo modprobe snd_hda_codec_cs8409

sleep 3

# Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬Ø¯Ø¯
echo "=== Status after reload ==="
aplay -l
ls -la /dev/snd/

4. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª:
bash

echo "=== Creating missing device nodes ==="
# Ø­Ø°Ù device nodes Ù‚Ø¯ÛŒÙ…ÛŒ (Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù†Ø¯)
sudo rm -f /dev/snd/pcmC0D0p /dev/snd/pcmC0D0c

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo modprobe -r snd_hda_codec_cs8409 snd_hda_intel
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

sleep 2

# Ø¨Ø±Ø±Ø³ÛŒ Ø¢ÛŒØ§ device nodes Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
if [ ! -c /dev/snd/pcmC0D0p ]; then
    echo "Creating device nodes manually..."
    sudo mknod /dev/snd/pcmC0D0p c 116 0
    sudo mknod /dev/snd/pcmC0D0c c 116 24
    sudo chown root:audio /dev/snd/pcmC0D0*
    sudo chmod 660 /dev/snd/pcmC0D0*
fi

echo "=== Final check ==="
ls -la /dev/snd/

5. ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

echo "=== Final test ==="
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && \
echo "âœ… Sound works!" || echo "âŒ Still not working - trying default device"

# ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù¾ÛŒØ´â€ŒÙØ±Ø¶
timeout 3s speaker-test -c 2 -t wav 2>/dev/null && \
echo "âœ… Default device works!" || echo "âŒ No audio devices working"

6. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª - Ø±ÛŒØ³ØªØ§Ø±Øª:
bash

echo "=== Last resort: reboot ==="
echo "A full reboot may be necessary to properly initialize audio hardware"
sudo reboot

Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯:
bash

aplay -l
timeout 3s speaker-test -c 2 -t wav

Ù…Ø´Ú©Ù„ No such device Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ù‡ Ø§ÛŒÙ† Ù…Ø¹Ù†ÛŒÙ‡ Ú©Ù‡ ÛŒØ§ Ø¯Ø³ØªÚ¯Ø§Ù‡ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ù‡ ÛŒØ§ permission Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¬Ø¯ÛŒØ¯
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null
if [ $? -eq 0 ]; then
    echo "âœ… Sound works!"
else
    echo "âŒ Still not working"
fi
then dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ø³Ø§Ø¯Ù‡
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav && echo "âœ… Sound works!" || echo "âŒ Still not working"
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ù…Ø³ØªÙ‚ÛŒÙ…
timeout 3s speaker-test -D hw:0,0 -c 2 -t wav

speaker-test 1.2.14

Playback device is hw:0,0
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Playback open error: -19,No such device
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # ØªØ³Øª Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ø®Ø±ÙˆØ¬ÛŒ
speaker-test -D hw:0,0 -c 2 -t wav 2>&1 | head -10

speaker-test 1.2.14

Playback device is hw:0,0
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Playback open error: -19,No such device
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Checking audio devices ==="
aplay -l

echo "=== Checking ALSA devices ==="
aplay -L | head -10
=== Checking audio devices ===
**** List of PLAYBACK Hardware Devices ****
=== Checking ALSA devices ===
null
    Discard all samples (playback) or generate zero samples (capture)
default
    Playback/recording through the PulseAudio sound server
lavrate
    Rate Converter Plugin Using Libav/FFmpeg Library
samplerate
    Rate Converter Plugin Using Samplerate Library
speexrate
    Rate Converter Plugin Using Speex Resampler
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Checking sound modules ==="
lsmod | grep snd

echo "=== Checking device nodes ==="
ls -la /dev/snd/
=== Checking sound modules ===
snd_hda_codec_cs8409    36864  1
snd_hda_intel          61440  0
snd_hda_codec_hdmi     98304  0
snd_seq_dummy          12288  0
snd_hrtimer            12288  1
snd_seq               110592  7 snd_seq_dummy
snd_seq_device         16384  1 snd_seq
snd_sof_pci_intel_skl    24576  0
snd_sof_intel_hda_generic    36864  1 snd_sof_pci_intel_skl
soundwire_intel        73728  1 snd_sof_intel_hda_generic
snd_sof_intel_hda_common   184320  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_soc_hdac_hda       28672  1 snd_sof_intel_hda_common
snd_sof_intel_hda_mlink    36864  3 soundwire_intel,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_sof_intel_hda      24576  2 snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_sof_pci            24576  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_sof_xtensa_dsp     16384  1 snd_sof_intel_hda_generic
snd_sof               389120  5 snd_sof_pci,snd_sof_intel_hda_common,snd_sof_intel_hda_generic,snd_sof_intel_hda,snd_sof_pci_intel_skl
snd_sof_utils          16384  1 snd_sof
snd_soc_acpi_intel_match   118784  2 snd_sof_intel_hda_generic,snd_sof_pci_intel_skl
snd_soc_acpi           16384  2 snd_soc_acpi_intel_match,snd_sof_intel_hda_generic
snd_soc_avs           212992  0
snd_soc_hda_codec      24576  1 snd_soc_avs
snd_hda_ext_core       36864  6 snd_soc_avs,snd_soc_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda_mlink,snd_sof_intel_hda
snd_soc_core          421888  6 snd_soc_avs,snd_soc_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_soc_hdac_hda
snd_hda_codec_generic   114688  1 snd_hda_codec_cs8409
snd_compress           28672  2 snd_soc_avs,snd_soc_core
snd_pcm_dmaengine      16384  1 snd_soc_core
snd_intel_dspcfg       40960  5 snd_soc_avs,snd_hda_intel,snd_sof,snd_sof_intel_hda_common,snd_sof_intel_hda_generic
snd_intel_sdw_acpi     16384  2 snd_intel_dspcfg,snd_sof_intel_hda_generic
snd_hda_codec         217088  8 snd_hda_codec_generic,snd_soc_avs,snd_hda_codec_hdmi,snd_soc_hda_codec,snd_hda_codec_cs8409,snd_hda_intel,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hda_core          143360  11 snd_hda_codec_generic,snd_soc_avs,snd_hda_codec_hdmi,snd_soc_hda_codec,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_ext_core,snd_hda_codec,snd_sof_intel_hda_common,snd_soc_hdac_hda,snd_sof_intel_hda
snd_hwdep              20480  1 snd_hda_codec
snd_pcm               188416  13 snd_soc_avs,snd_hda_codec_hdmi,snd_hda_intel,snd_hda_codec,soundwire_intel,snd_sof,snd_sof_intel_hda_common,snd_compress,snd_soc_core,snd_sof_utils,snd_hda_core,snd_sof_pci_intel_skl,snd_pcm_dmaengine
snd_timer              53248  3 snd_seq,snd_hrtimer,snd_pcm
snd                   151552  15 snd_hda_codec_generic,snd_seq,snd_seq_device,snd_hda_codec_hdmi,snd_hwdep,snd_hda_codec_cs8409,snd_hda_intel,snd_hda_codec,snd_sof,snd_timer,snd_compress,snd_soc_core,snd_pcm
soundcore              16384  1 snd
=== Checking device nodes ===
total 0
drwxr-xr-x   3 root root      180 Aug 31 02:36 .
drwxr-xr-x  17 root root     3240 Aug 31 02:05 ..
drwxr-xr-x   2 root root       60 Aug 31 02:34 by-path
crw-rw----+  1 root audio 116,  3 Aug 31 02:34 controlC0
crw-rw----+  1 root audio 116,  2 Aug 31 02:34 hwC0D0
crw-rw-rw-   1 root root  116, 24 Aug 31 02:36 pcmC0D0c
crw-rw-rw-   1 root root  116,  0 Aug 31 02:36 pcmC0D0p
crw-rw----+  1 root audio 116,  1 Aug 31 02:05 seq
crw-rw----+  1 root audio 116, 33 Aug 31 02:05 timer
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ echo "=== Reloading audio modules ==="
# ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod snd_hda_codec_cs8409
sudo rmmod snd_hda_intel
sudo rmmod snd_hda_codec
sudo rmmod snd_hda_core
sudo rmmod snd_pcm

sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec
sudo modprobe snd_hda_codec_cs8409

sleep 3

# Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬Ø¯Ø¯
echo "=== Status after reload ==="
aplay -l
ls -la /dev/snd/
=== Reloading audio modules ===
rmmod: ERROR: Module snd_hda_codec_cs8409 is in use
rmmod: ERROR: Module snd_hda_codec is in use by: snd_hda_codec_generic snd_soc_avs snd_hda_codec_hdmi snd_soc_hda_codec snd_hda_codec_cs8409 snd_soc_hdac_hda snd_sof_intel_hda
rmmod: ERROR: Module snd_hda_core is in use by: snd_hda_codec_generic snd_soc_avs snd_hda_codec_hdmi snd_soc_hda_codec snd_hda_codec_cs8409 snd_hda_ext_core snd_hda_codec snd_sof_intel_hda_common snd_soc_hdac_hda snd_sof_intel_hda
rmmod: ERROR: Module snd_pcm is in use by: snd_soc_avs snd_hda_codec_hdmi snd_hda_codec soundwire_intel snd_sof snd_sof_intel_hda_common snd_compress snd_soc_core snd_sof_utils snd_hda_core snd_sof_pci_intel_skl snd_pcm_dmaengine
=== Status after reload ===
**** List of PLAYBACK Hardware Devices ****
total 0
drwxr-xr-x   3 root root      180 Aug 31 02:39 .
drwxr-xr-x  17 root root     3240 Aug 31 02:05 ..
drwxr-xr-x   2 root root       60 Aug 31 02:39 by-path
crw-rw----+  1 root audio 116,  3 Aug 31 02:39 controlC0
crw-rw----+  1 root audio 116,  2 Aug 31 02:39 hwC0D0
crw-rw-rw-   1 root root  116, 24 Aug 31 02:36 pcmC0D0c
crw-rw-rw-   1 root root  116,  0 Aug 31 02:36 pcmC0D0p
crw-rw----+  1 root audio 116,  1 Aug 31 02:05 seq
crw-rw----+  1 root audio 116, 33 Aug 31 02:05 timer
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ø§ØµÙ„ÛŒ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ ØªÙˆØ³Ø· processes Ø¯ÛŒÚ¯Ø± Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù‡Ø³ØªÙ†Ø¯ Ùˆ Ù†Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒÙ… unload Ú©Ù†ÛŒÙ…. Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ… Ú©Ù‡ aplay -l Ù‡ÛŒÚ† Ø®Ø±ÙˆØ¬ÛŒ Ù†Ø¯Ø§Ø±Ù‡ Ú©Ù‡ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµÙˆØªÛŒ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ initialize Ù†Ø´Ø¯Ù†.

Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª Ø±ÛŒØ´Ù‡â€ŒØ§ÛŒ Ø­Ù„ Ú©Ù†ÛŒÙ…:
1. Ø§Ø¨ØªØ¯Ø§ ØªÙ…Ø§Ù… processes Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù†Ø¯Ù‡ Ø§Ø² ØµØ¯Ø§ Ø±Ùˆ kill Ú©Ù†ÛŒÙ…:
bash

# Kill ØªÙ…Ø§Ù… processes ØµÙˆØªÛŒ
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio
sudo pkill -9 -f alsa

# Kill processesØ§ÛŒ Ú©Ù‡ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯
for pid in $(sudo lsof /dev/snd/* 2>/dev/null | awk '{print $2}' | uniq | grep -v PID); do
    sudo kill -9 $pid 2>/dev/null
done

sleep 2

2. Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§:
bash

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sudo rmmod -f snd 2>/dev/null || true

sleep 3

3. Ø­Ø°Ù device nodes Ù‚Ø¯ÛŒÙ…ÛŒ:
bash

# Ø­Ø°Ù device nodes Ù‚Ø¯ÛŒÙ…ÛŒ
sudo rm -f /dev/snd/pcmC0D0p /dev/snd/pcmC0D0c /dev/snd/controlC0 /dev/snd/hwC0D0

sleep 1

4. Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§:
bash

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­
sudo modprobe snd_hda_intel
sleep 2
sudo modprobe snd_hda_codec
sudo modprobe snd_hda_codec_hdmi
sudo modprobe snd_hda_codec_cs8409

sleep 3

5. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª:
bash

echo "=== Status after hard reset ==="
ls -la /dev/snd/
aplay -l

# Ø§Ú¯Ø± device nodes Ø§ÛŒØ¬Ø§Ø¯ Ù†Ø´Ø¯Ù†ØŒ manually Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒÙ…
if [ ! -c /dev/snd/pcmC0D0p ]; then
    echo "Creating device nodes manually..."
    sudo mknod /dev/snd/pcmC0D0p c 116 0
    sudo mknod /dev/snd/pcmC0D0c c 116 24
    sudo mknod /dev/snd/controlC0 c 116 3
    sudo mknod /dev/snd/hwC0D0 c 116 2
    sudo chown root:audio /dev/snd/*
    sudo chmod 660 /dev/snd/pcmC0D0* /dev/snd/controlC0 /dev/snd/hwC0D0
fi

6. ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

echo "=== Final test ==="
aplay -l
timeout 3s speaker-test -c 2 -t wav 2>/dev/null && \
echo "âœ… Sound works!" || echo "âŒ No sound - trying direct device"

# ØªØ³Øª Ù…Ø³ØªÙ‚ÛŒÙ…
if [ -c /dev/snd/pcmC0D0p ]; then
    timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && \
    echo "âœ… Direct device works!" || echo "âŒ Direct device failed"
fi

7. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª - Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ø§Ù…Ù„:
bash

echo "=== Full reboot required ==="
echo "The audio subsystem needs a complete reboot to initialize properly"
sudo reboot

Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ±Ø§Øª Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:
bash

aplay -l
speaker-test -c 2 -t wav -f 440

Ù…Ø´Ú©Ù„ Ø¨Ù‡ Ù†Ø¸Ø± Ù…ÛŒâ€ŒØ±Ø³Ù‡ Ø§Ø² initialization Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµÙˆØªÛŒ Ù‡Ø³Øª. Ø§Ú¯Ø± Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª Ù‡Ù… Ù…Ø´Ú©Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ù…Ù…Ú©Ù†Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¢Ù¾Ø¯ÛŒØª kernel ÛŒØ§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² kernel Ø¯ÛŒÚ¯Ù‡â€ŒØ§ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Kill ØªÙ…Ø§Ù… processes ØµÙˆØªÛŒ
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio
sudo pkill -9 -f alsa

# Kill processesØ§ÛŒ Ú©Ù‡ Ø§Ø² Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒ<200c>Ú©Ù†Ù†Ø¯
for pid in $(sudo lsof /dev/snd/* 2>/dev/null | awk '{print $2}' | uniq | grep -v PID); do
    sudo kill -9 $pid 2>/dev/null
done

sleep 2
zsh: killed     sudo pkill -9 -f pipewire
                                         zsh: killed     sudo pkill -9 -f wireplumber
          zsh: killed     sudo pkill -9 -f pulseaudio
                                                     zsh: killed     sudo pkill -9 -f alsa
                                                                                          
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
    # Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sudo rmmod -f snd 2>/dev/null || true

sleep 3
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
    # Ø­Ø°Ù device nodes Ù‚Ø¯ÛŒÙ…ÛŒ$ # Ø­Ø°Ù device nodes Ù‚Ø¯ÛŒÙ…ÛŒ
sudo rm -f /dev/snd/pcmC0D0p /dev/snd/pcmC0D0c /dev/snd/controlC0 /dev/snd/hwC0D0

sleep 1
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
    # Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§ Ø¨Ù‡ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­
sudo modprobe snd_hda_intel
sleep 2
sudo modprobe snd_hda_codec
sudo modprobe snd_hda_codec_hdmi
sudo modprobe snd_hda_codec_cs8409

sleep 3
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
    echo "=== Status after hard reset ==="atus after hard reset ==="
ls -la /dev/snd/
aplay -l

# Ø§Ú¯Ø± device nodes Ø§ÛŒØ¬Ø§Ø¯ Ù†Ø´Ø¯Ù†ØŒ manually Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒÙ…
if [ ! -c /dev/snd/pcmC0D0p ]; then
    echo "Creating device nodes manually..."
    sudo mknod /dev/snd/pcmC0D0p c 116 0
    sudo mknod /dev/snd/pcmC0D0c c 116 24
    sudo mknod /dev/snd/controlC0 c 116 3
    sudo mknod /dev/snd/hwC0D0 c 116 2
    sudo chown root:audio /dev/snd/*
    sudo chmod 660 /dev/snd/pcmC0D0* /dev/snd/controlC0 /dev/snd/hwC0D0
fi
=== Status after hard reset ===
                               total 0
                                      drwxr-xr-x   3 root root      140 Aug 31 02:40 .
           drwxr-xr-x  17 root root     3240 Aug 31 02:05 ..
                                                            drwxr-xr-x   2 root root       60 Aug 31 02:40 by-path
                                       crw-rw----+  1 root audio 116,  3 Aug 31 02:40 controlC0
                    crw-rw----+  1 root audio 116,  2 Aug 31 02:40 hwC0D0
                                                                         crw-rw----+  1 root audio 116,  1 Aug 31 02:05 seq
                                                crw-rw----+  1 root audio 116, 33 Aug 31 02:05 timer
                         **** List of PLAYBACK Hardware Devices ****
                                                                    Creating device nodes manually...
                          mknod: /dev/snd/controlC0: File exists
                                                                mknod: /dev/snd/hwC0D0: File exists
                                                                                                   
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
    echo "=== Final test ===" echo "=== Final test ==="
aplay -l
timeout 3s speaker-test -c 2 -t wav 2>/dev/null && \
echo "âœ… Sound works!" || echo "âŒ No sound - trying direct device"

# ØªØ³Øª Ù…Ø³ØªÙ‚ÛŒÙ…
if [ -c /dev/snd/pcmC0D0p ]; then
    timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && \
    echo "âœ… Direct device works!" || echo "âŒ Direct device failed"
fi
cmdand dquote> 

Ø¨Ù‡ ØµÙˆØ±Øª Ø´Ù„ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ù‡Ù… Ø¨Ø¯Ù‡ Ú©Ø¯Ù‡Ø§Øª Ø±Ùˆ
bash

#!/bin/bash
# MacBook Audio Fix Script
# Author: Buddha

echo "=== MacBook Audio Fix ==="

# Kill all audio processes
echo "Killing audio processes..."
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio
sudo pkill -9 -f alsa

# Kill processes using audio devices
for pid in $(sudo lsof /dev/snd/* 2>/dev/null | awk '{print $2}' | uniq | grep -v PID); do
    sudo kill -9 $pid 2>/dev/null
done
sleep 2

# Force remove audio modules
echo "Force removing audio modules..."
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sudo rmmod -f snd 2>/dev/null || true
sleep 3

# Remove old device nodes
echo "Removing old device nodes..."
sudo rm -f /dev/snd/pcmC0D0p /dev/snd/pcmC0D0c /dev/snd/controlC0 /dev/snd/hwC0D0
sleep 1

# Load modules in correct order
echo "Loading audio modules..."
sudo modprobe snd_hda_intel
sleep 2
sudo modprobe snd_hda_codec
sudo modprobe snd_hda_codec_hdmi
sudo modprobe snd_hda_codec_cs8409
sleep 3

# Check status
echo "=== Status after hard reset ==="
ls -la /dev/snd/
aplay -l

# Create device nodes manually if needed
if [ ! -c /dev/snd/pcmC0D0p ]; then
    echo "Creating device nodes manually..."
    sudo mknod /dev/snd/pcmC0D0p c 116 0
    sudo mknod /dev/snd/pcmC0D0c c 116 24
    sudo mknod /dev/snd/controlC0 c 116 3
    sudo mknod /dev/snd/hwC0D0 c 116 2
    sudo chown root:audio /dev/snd/*
    sudo chmod 660 /dev/snd/pcmC0D0* /dev/snd/controlC0 /dev/snd/hwC0D0
fi

# Final test
echo "=== Final test ==="
aplay -l

timeout 3s speaker-test -c 2 -t wav 2>/dev/null && \
echo "âœ… Sound works!" || echo "âŒ No sound - trying direct device"

# Direct device test
if [ -c /dev/snd/pcmC0D0p ]; then
    timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && \
    echo "âœ… Direct device works!" || echo "âŒ Direct device failed"
fi

echo "=== Script completed ==="

Ø°Ø®ÛŒØ±Ù‡ Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† fix_audio.sh Ùˆ Ø³Ù¾Ø³ Ø§Ø¬Ø±Ø§ÛŒ Ø¢Ù†:
bash

chmod +x fix_audio.sh
sudo ./fix_audio.sh

]
â””â”€$ sudo nano fixSound.sh   
[sudo] password for buddha: 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ ./fixSound.sh
=== MacBook Audio Fix ===
Killing audio processes...
./fixSound.sh: line 9: 166161 Killed                  sudo pkill -9 -f pipewire
    ./fixSound.sh: line 10: 166165 Killed                  sudo pkill -9 -f wireplumber
            ./fixSound.sh: line 11: 166174 Killed                  sudo pkill -9 -f pulseaudio
                   ./fixSound.sh: line 12: 166179 Killed                  sudo pkill -9 -f alsa
                    Force removing audio modules...
                                                   Removing old device nodes...
    Loading audio modules...
                            === Status after hard reset ===
                                                           total 0
                                                                  drwxr-xr-x   3 root root      140 Aug 31 02:42 .
                                       drwxr-xr-x  17 root root     3240 Aug 31 02:05 ..
             drwxr-xr-x   2 root root       60 Aug 31 02:42 by-path
                                                                   crw-rw----+  1 root audio 116,  3 Aug 31 02:42 controlC0
                                                crw-rw----+  1 root audio 116,  2 Aug 31 02:42 hwC0D0
                          crw-rw----+  1 root audio 116,  1 Aug 31 02:05 seq
 crw-rw----+  1 root audio 116, 33 Aug 31 02:05 timer
                                                     **** List of PLAYBACK Hardware Devices ****
                     Creating device nodes manually...
                                                      mknod: /dev/snd/controlC0: File exists
                 mknod: /dev/snd/hwC0D0: File exists
                                                    === Final test ===
                                                                      **** List of PLAYBACK Hardware Devices ****

                                      speaker-test 1.2.14

                                                         Playback device is default
        Stream parameters are 48000Hz, S16_LE, 2 channels
                                                         WAV file(s)
                                                                    Rate set to 48000Hz (requested 48000Hz)
                                Buffer size range from 96 to 1048576
                                                                    Period size range from 32 to 349526
                            Periods = 4
                                       was set period_size = 12000
                                                                  was set buffer_size = 48000
                   0 - Front Left
                                  1 - Front Right
                                                 Time per period = 2.009924
 0 - Front Left
               âŒ No sound - trying direct device

                                                 speaker-test 1.2.14

                                                                    Playback device is hw:0,0
                  Stream parameters are 48000Hz, S16_LE, 2 channels
                                                                   WAV file(s)
   Playback open error: -19,No such device
                                          âŒ Direct device failed
                                                                 === Script completed ===
                                                                                         
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
                          â””â”€$

Ù…Ø´Ú©Ù„ Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø±Ù‡. Ø®Ø·Ø§ÛŒ Playback open error: -19,No such device Ù†Ø´ÙˆÙ† Ù…ÛŒâ€ŒØ¯Ù‡ Ú©Ù‡ Ø¯Ø³ØªÚ¯Ø§Ù‡ ØµÙˆØªÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ù‡ ÛŒØ§ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ initialize Ù†Ø´Ø¯Ù‡. Ø¨ÛŒØ§ÛŒÛŒØ¯ ÛŒÚ© Ø±Ø§Ù‡ Ø­Ù„ Ø§Ø³Ø§Ø³ÛŒâ€ŒØªØ± Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒÙ…:
bash

#!/bin/bash
# MacBook Audio Ultimate Fix
# Author: Buddha

echo "=== MacBook Audio Ultimate Fix ==="

# 1. Ú©Ø§Ù…Ù„Ø§Ù‹ Ø³ÛŒØ³ØªÙ… ØµØ¯Ø§ Ø±Ùˆ reset Ú©Ù†ÛŒÙ…
echo "1. Completely resetting audio system..."
sudo systemctl stop --user pipewire pipewire-pulse wireplumber 2>/dev/null || true
sudo pkill -9 -f pipewire
sudo pkill -9 -f wireplumber
sudo pkill -9 -f pulseaudio

# 2. Ø­Ø°Ù ØªÙ…Ø§Ù… Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµÙˆØªÛŒ
echo "2. Removing all audio modules..."
sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
sudo rmmod -f snd_hda_codec_hdmi 2>/dev/null || true
sudo rmmod -f snd_hda_intel 2>/dev/null || true
sudo rmmod -f snd_hda_codec 2>/dev/null || true
sudo rmmod -f snd_hda_core 2>/dev/null || true
sudo rmmod -f snd_pcm 2>/dev/null || true
sudo rmmod -f snd_timer 2>/dev/null || true
sudo rmmod -f snd 2>/dev/null || true
sudo rmmod -f soundcore 2>/dev/null || true

sleep 3

# 3. Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ device nodes
echo "3. Cleaning device nodes..."
sudo rm -f /dev/snd/*

# 4. Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø¨Ø§ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­
echo "4. Loading modules in correct order..."
sudo modprobe snd
sudo modprobe snd_hda_intel model=mbp16
sleep 2
sudo modprobe snd_hda_codec
sudo modprobe snd_hda_codec_hdmi
sudo modprobe snd_hda_codec_cs8409
sudo modprobe snd_pcm
sudo modprobe snd_timer

sleep 3

# 5. Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø§ÛŒØ¬Ø§Ø¯ device nodes
echo "5. Checking device nodes..."
if [ ! -c /dev/snd/pcmC0D0p ]; then
    echo "Creating missing device nodes..."
    sudo mknod /dev/snd/pcmC0D0p c 116 0
    sudo mknod /dev/snd/pcmC0D0c c 116 24
    sudo mknod /dev/snd/controlC0 c 116 3
    sudo mknod /dev/snd/hwC0D0 c 116 2
    sudo chown root:audio /dev/snd/*
    sudo chmod 660 /dev/snd/*
fi

# 6. Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ
echo "6. Final status check..."
ls -la /dev/snd/
aplay -l

# 7. ØªØ³Øª ØµØ¯Ø§
echo "7. Testing audio..."
timeout 5s speaker-test -c 2 -t wav 2>/dev/null && {
    echo "âœ… SUCCESS! Audio is working!"
} || {
    echo "âŒ Audio still not working"
    echo "Trying alternative methods..."
    
    # ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ…
    if [ -c /dev/snd/pcmC0D0p ]; then
        timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && \
        echo "âœ… Direct device works!" || echo "âŒ Direct device failed"
    fi
    
    # ØªØ³Øª Ø¨Ø§ aplay
    echo "TEST" | aplay -D hw:0,0 2>/dev/null && \
    echo "âœ… aplay works!" || echo "âŒ aplay failed"
}

echo "=== Ultimate fix completed ==="

Ø§Ú¯Ø± Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù‡Ù… Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ Ù…Ø´Ú©Ù„ Ø§Ø² kernel ÛŒØ§ Ø¯Ø±Ø§ÛŒÙˆØ±Ù‡Ø§Ø³Øª. Ø¯Ø± Ø§ÛŒÙ† caseØŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ù…:

    Ú©ernel Ø±Ùˆ Ø¢Ù¾Ø¯ÛŒØª Ú©Ù†ÛŒØ¯

    Ø§Ø² ÛŒÚ© distribution Ø¯ÛŒÚ¯Ù‡ ØªØ³Øª Ú©Ù†ÛŒØ¯ (Ù…Ø«Ù„ Ubuntu Live USB)

    Ø§Ø² USB sound adapter Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯

Ø¨Ø±Ø§ÛŒ Ø¢Ù¾Ø¯ÛŒØª kernel Ø¯Ø± Kali:
bash

sudo apt update
sudo apt install linux-image-amd64
sudo reboot

ÛŒØ§ Ø¨Ø±Ø§ÛŒ kernel Ø¬Ø¯ÛŒØ¯ØªØ±:
bash

sudo apt install linux-image-6.1.0-kali9-amd64

â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
                          â””â”€$ cat fixSound.sh 
#!/bin/bash
           # MacBook Audio Ultimate Fix
                                       # Author: Buddha

                                                       echo "=== MacBook Audio Ultimate Fix ==="

                     # 1. Ú©Ø§Ù…Ù„Ø§Ù‹ Ø³ÛŒØ³ØªÙ… ØµØ¯Ø§ Ø±Ùˆ reset Ú©Ù†ÛŒÙ…
                                                       echo "1. Completely resetting audio system..."
                          sudo systemctl stop --user pipewire pipewire-pulse wireplumber 2>/dev/null || true
                                 sudo pkill -9 -f pipewire
                                                          sudo pkill -9 -f wireplumber
           sudo pkill -9 -f pulseaudio

                                      # 2. Ø­Ø°Ù ØªÙ…Ø§Ù… Ù…Ø§Ú˜ÙˆÙ„Ù‡Ø§ÛŒ ØµÙˆØªÛŒ
                                                                 echo "2. Removing all audio modules..."
                             sudo rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
        sudo rmmod -f snd_hda_codec_hdmi 2>/dev/null || true
                                                            sudo rmmod -f snd_hda_intel 2>/dev/null || true
                                sudo rmmod -f snd_hda_codec 2>/dev/null || true
    sudo rmmod -f snd_hda_core 2>/dev/null || true
                                                  sudo rmmod -f snd_pcm 2>/dev/null || true
                sudo rmmod -f snd_timer 2>/dev/null || true
                                                           sudo rmmod -f snd 2>/dev/null || true
                     sudo rmmod -f soundcore 2>/dev/null || true

                                                                sleep 3

                                                                       # 3. Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ device nodes
                     echo "3. Cleaning device nodes..."
                                                       sudo rm -f /dev/snd/*

 # 4. Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„Ù‡Ø§ Ø¨Ø§ ØªØ±ØªÛŒØ¨ ØµØ­ÛŒØ­
                                    echo "4. Loading modules in correct order..."
      sudo modprobe snd
                       sudo modprobe snd_hda_intel model=mbp16
                                                              sleep 2
                                                                     sudo modprobe snd_hda_codec
                     sudo modprobe snd_hda_codec_hdmi
                                                     sudo modprobe snd_hda_codec_cs8409
            sudo modprobe snd_pcm
                                 sudo modprobe snd_timer

                                                        sleep 3

                                                               # 5. Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø§ÛŒØ¬Ø§Ø¯ device nodes
                   echo "5. Checking device nodes..."
                                                     if [ ! -c /dev/snd/pcmC0D0p ]; then
                 echo "Creating missing device nodes..."
                                                            sudo mknod /dev/snd/pcmC0D0p c 116 0
                         sudo mknod /dev/snd/pcmC0D0c c 116 24
                                                                  sudo mknod /dev/snd/controlC0 c 116 3
                                sudo mknod /dev/snd/hwC0D0 c 116 2
                                                                      sudo chown root:audio /dev/snd/*
                               sudo chmod 660 /dev/snd/*
                                                        fi

                                                          # 6. Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ
                                                                          echo "6. Final status check..."
                              ls -la /dev/snd/
                                              aplay -l

                                                      # 7. ØªØ³Øª ØµØ¯Ø§
                                                                  echo "7. Testing audio..."
                 timeout 5s speaker-test -c 2 -t wav 2>/dev/null && {
                                                                         echo "âœ… SUCCESS! Audio is working!"
                                  } || {
                                            echo "âŒ Audio still not working"
      echo "Trying alternative methods..."
                                              
                                                  # ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ…
                                                                            if [ -c /dev/snd/pcmC0D0p ]; then
                                          timeout 3s speaker-test -D hw:0,0 -c 2 -t wav 2>/dev/null && \
                                     echo "âœ… Direct device works!" || echo "âŒ Direct device failed"
                              fi
                                    
                                        # ØªØ³Øª Ø¨Ø§ aplay
                                                          echo "TEST" | aplay -D hw:0,0 2>/dev/null && \
                                 echo "âœ… aplay works!" || echo "âŒ aplay failed"
      }

       echo "=== Ultimate fix completed ==="
                                                                                                                       
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
                          â””â”€$ ./fixSound.sh
=== MacBook Audio Ultimate Fix ===
                                  1. Completely resetting audio system...
                                                                         ./fixSound.sh: line 10: 167079 Killed                  sudo pkill -9 -f pipewire
   ./fixSound.sh: line 11: 167083 Killed                  sudo pkill -9 -f wireplumber
           ./fixSound.sh: line 12: 167092 Killed                  sudo pkill -9 -f pulseaudio
                  2. Removing all audio modules...
                                                  3. Cleaning device nodes...
  4. Loading modules in correct order...
                                        5. Checking device nodes...
                                                                   Creating missing device nodes...
                        mknod: /dev/snd/controlC0: File exists
                                                              mknod: /dev/snd/hwC0D0: File exists
                      6. Final status check...
                                              total 0
                                                     drwxr-xr-x   3 root root      140 Aug 31 02:44 .
                          drwxr-xr-x  17 root root     3240 Aug 31 02:05 ..
drw-rw----   2 root audio      60 Aug 31 02:44 by-path
                                                      crw-rw----+  1 root audio 116,  3 Aug 31 02:44 controlC0
                                   crw-rw----+  1 root audio 116,  2 Aug 31 02:44 hwC0D0
             crw-rw----   1 root audio 116, 24 Aug 31 02:44 pcmC0D0c
                                                                    crw-rw----   1 root audio 116,  0 Aug 31 02:44 pcmC0D0p
                                                **** List of PLAYBACK Hardware Devices ****
                7. Testing audio...

                                   speaker-test 1.2.14

                                                      Playback device is default
     Stream parameters are 48000Hz, S16_LE, 2 channels
                                                      WAV file(s)
                                                                 Rate set to 48000Hz (requested 48000Hz)
                             Buffer size range from 96 to 1048576
                                                                 Period size range from 32 to 349526
                         Periods = 4
                                    was set period_size = 12000
                                                               was set buffer_size = 48000
                0 - Front Left
                               1 - Front Right
                                              Time per period = 2.051905
                                                                         0 - Front Left
             1 - Front Right
                            âŒ Audio still not working
                                                      Trying alternative methods...

        speaker-test 1.2.14

                           Playback device is hw:0,0
                                                    Stream parameters are 48000Hz, S16_LE, 2 channels
                          WAV file(s)
                                     Playback open error: -19,No such device
 âŒ Direct device failed
                        âŒ aplay failed
                                       === Ultimate fix completed ===
                                                                                                                                                
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
                          â””â”€$

Ù…Ø´Ú©Ù„ Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø±Ù‡. Ø®Ø·Ø§ÛŒ Playback open error: -19,No such device Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ø¯Ø³ØªÚ¯Ø§Ù‡ ØµÙˆØªÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯ ÛŒØ§ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ initialize Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø§ÛŒÙ† Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ù‡ Ø¯Ù„Ø§ÛŒÙ„ Ø²ÛŒØ± Ø§ØªÙØ§Ù‚ Ù…ÛŒâ€ŒØ§ÙØªØ¯:

    Ù…Ø´Ú©Ù„ Ø¯Ø± Ø¯Ø±Ø§ÛŒÙˆØ± CS8409

    Ù…Ø´Ú©Ù„ Ø¯Ø± kernel

    Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾Ú† Ø®Ø§Øµ

Ø±Ø§Ù‡ Ø­Ù„ Ù†Ù‡Ø§ÛŒÛŒ:
1. Ø¢Ù¾Ø¯ÛŒØª kernel (Ù…Ù‡Ù…ØªØ±ÛŒÙ† Ø±Ø§Ù‡ Ø­Ù„):
bash

# Ø¢Ù¾Ø¯ÛŒØª Ø³ÛŒØ³ØªÙ… Ùˆ kernel
sudo apt update
sudo apt full-upgrade -y

# Ø¨Ø±Ø±Ø³ÛŒ kernelÙ‡Ø§ÛŒ available
apt search linux-image | grep -E "(6\.1[0-9]|6\.2)" | head -5

# Ù†ØµØ¨ kernel Ø¬Ø¯ÛŒØ¯ØªØ±
sudo apt install linux-image-6.2.0-kali3-amd64

# Ø±ÛŒØ³ØªØ§Ø±Øª
sudo reboot

2. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² kernel mainline:
bash

# Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† repository mainline
echo "deb http://http.kali.org/kali kali-rolling main non-free contrib" | sudo tee /etc/apt/sources.list

# Ø¢Ù¾Ø¯ÛŒØª Ùˆ Ù†ØµØ¨ kernel Ø¬Ø¯ÛŒØ¯
sudo apt update
sudo apt install linux-image-amd64

# Ø±ÛŒØ³ØªØ§Ø±Øª
sudo reboot

3. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² SOF firmware Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
bash

# Ù†ØµØ¨ SOF firmware
sudo apt install firmware-sof-signed sof-tools

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª SOF
echo "options snd-intel-dspcfg dsp_driver=3" | sudo tee /etc/modprobe.d/sof.conf
sudo update-initramfs -u
sudo reboot

4. Ø±Ø§Ù‡ Ø­Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² USB audio adapter

Ø§Ú¯Ø± Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù… Ø§Ø² Ø±ÙˆØ´â€ŒÙ‡Ø§ Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒØ¯ Ø§Ø² ÛŒÚ© USB sound adapter Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø®Ø§ØµÛŒ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡.
5. ØªØ³Øª Ø¨Ø§ distribution Ø¯ÛŒÚ¯Ø±:

ÛŒÚ© USB live Ø§Ø² Ubuntu ÛŒØ§ Fedora ØªÙ‡ÛŒÙ‡ Ú©Ù†ÛŒØ¯ Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØ¯ Ø¢ÛŒØ§ ØµØ¯Ø§ Ø¯Ø± Ø§ÙˆÙ†Ù‡Ø§ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡ ÛŒØ§ Ù†Ù‡. Ø§Ú¯Ø± Ú©Ø§Ø± Ú©Ø±Ø¯ØŒ Ù…Ø´Ú©Ù„ Ø§Ø² Kali Linux Ù‡Ø³Øª.
6. Ú¯Ø²Ø§Ø±Ø´ Ø®Ø·Ø§ Ø¨Ù‡ ØªÙˆØ³Ø¹Ù‡ Ø¯Ù‡Ù†Ø¯Ú¯Ø§Ù†:

Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø²ÛŒØ± Ø±Ùˆ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ùˆ Ú¯Ø²Ø§Ø±Ø´ Ø¨Ø¯ÛŒØ¯:
bash

# Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø§ÛŒ bug report
echo "=== System Information ===" > audio_bug_report.txt
uname -a >> audio_bug_report.txt
lsb_release -a >> audio_bug_report.txt 2>/dev/null
echo "=== Audio Hardware ===" >> audio_bug_report.txt
lspci -v | grep -i audio -A 10 >> audio_bug_report.txt
echo "=== Kernel Messages ===" >> audio_bug_report.txt
dmesg | grep -i "audio\|snd\|hda\|cs8409" >> audio_bug_report.txt
echo "=== Loaded Modules ===" >> audio_bug_report.txt
lsmod | grep snd >> audio_bug_report.txt

echo "Bug report saved to audio_bug_report.txt"

Ù…ØªØ£Ø³ÙØ§Ù†Ù‡ Ù…Ø´Ú©Ù„ CS8409 Ø±ÙˆÛŒ Ø¨Ø±Ø®ÛŒ MacBookâ€ŒÙ‡Ø§ ÛŒÚ© Ù…Ø´Ú©Ù„ Ø´Ù†Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø§Ø³Øª Ùˆå¯èƒ½éœ€è¦ Ù¾Ú† Ø®Ø§Øµ kernel Ø¯Ø§Ø±Ø¯.
Ù…Ù† Ù‚Ø¨Ù„Ø§ Ø±ÙˆÛŒ Ø§ÙˆØ¨Ù†ØªÙˆ Ø¨Ø§ Ø§ÛŒÙ†Ù‡Ø§ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ø±Ø¯Ù… Ø¨Ø¨ÛŒÙ† Ù…ÛŒØªÙˆÙ†ÛŒ Ø¨Ø§ ØªØºÛŒÛŒØ±Ø§ØªÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù„ÛŒ Ù‡Ù… Ø§ØµÙ„Ø§Ø­ Ú©Ù†ÛŒ
site logo
Skip to main content

Ask Ubuntu

Home
Questions
Unanswered
AI Assist
Labs
Tags
Chat
Users

    Companies

Teams

Ask questions, find answers and collaborate at work with Stack Overflow for Teams.

Illustration of upvote icon after it is clicked

Illustration of upvote icon after it is clicked

Sound Macbook pro Ubuntu 22.04
Asked 2 years, 2 months ago
Modified 7 months ago
Viewed 12k times
3

Please could someone help here is my system information;

System:
  Host: lewis-host Kernel: 5.19.0-45-generic x86_64 bits: 64
    Desktop: GNOME 42.5 Distro: Ubuntu 22.04.2 LTS (Jammy Jellyfish)
Machine:
  Type: Laptop System: Apple product: MacBookPro13,1 v: 1.0
    serial: <superuser required>
  Mobo: Apple model: Mac-473D31EABEB93F9B v: MacBookPro13,1
    serial: <superuser required> UEFI: Apple v: 499.40.2.0.0 date: 08/22/2022
Audio:
  Device-1: Intel Sunrise Point-LP HD Audio driver: snd_hda_intel
  Device-2: Broadcom 720p FaceTime HD Camera driver: N/A
  Sound Server-1: ALSA v: k5.19.0-45-generic running: yes
  Sound Server-2: PulseAudio v: 15.99.1 running: yes
  Sound Server-3: PipeWire v: 0.3.48 running: yes

I have no sound on my macbook pro that is running ubuntu please if you can point me in the direction for the correct driver thanks.

    soundmacbook

Share
Improve this question
Follow
edited Jun 28, 2023 at 2:49
Archisman Panigrahi's user avatar
Archisman Panigrahi
39.2k2929 gold badges146146 silver badges283283 bronze badges
asked Jun 27, 2023 at 23:00
Lew's user avatar
Lew
3111 gold badge11 silver badge33 bronze badges

    Can you tell us which model of Macbook Pro this is? â€“ 
    Archisman Panigrahi
    Commented Jun 28, 2023 at 4:14
    Early 2016 Macbook Pro â€“ 
    Lew
    Commented Jul 27, 2023 at 13:46
    Does this answer your question? Ubuntu 20.04 LTS no sound on MacbookPro â€“ 
    muru
    â™¦
    Commented Jul 29, 2023 at 2:30

Add a comment
1 Answer
Sorted by:
3

The top answer here worked for me on a 2017 Macbook Pro (MacBookPro14,3) with Ubuntu 23.04.

    apt install wget make gcc linux-headers-generic
    git clone https://github.com/davidjo/snd_hda_macbookpro.git
    cd snd_hda_macbookpro/
    ./install.cirrus.driver.sh
    reboot

Microphone is working as well.
Share
Improve this answer
Follow
answered Jul 26, 2023 at 16:10
Rade0nFighter's user avatar
Rade0nFighter
4744 bronze badges

    I encountered a problem when executing the last command mkdir: cannot create directory â€˜/lib/modules/6.5.0-1009-apple-arm/updatesâ€™: Permission denied Please help â€“ 
    Sijia Li
    Commented Dec 16, 2023 at 19:39
    Helped me lot. Thank you very much! Also on same version of Macbook pro and with manual installation of kernel 5.15.0-106-generic. Last issue was sound and now everything works :) â€“ 
    Almas
    Commented May 10, 2024 at 12:59
    Thank you!! It worked smoothly with Ubuntu 24.04 (and snd_hda_macbookpro repo git commit hash 259cc39). Unfortunately suspension causes a muted audio, but at least it works. â€“ 
    sarusso
    Commented Oct 24, 2024 at 21:48
    @sarusso glad I could help! I havenâ€™t had much luck with suspend/hibernate - screen and keyboard never come back on - do you have any tips or useful links? â€“ 
    Rade0nFighter
    Commented Oct 26, 2024 at 10:22 

Add a comment
You must log in to answer this question.
Protected question. To answer this question, you need to have at least 10 reputation on this site (not counting the association bonus). The reputation requirement helps protect this question from spam and non-answer activity.

Start asking to get answers

Find the answer to your question by asking.

Explore related questions

    soundmacbook

See similar questions with these tags.

    The Overflow Blog

Open-source is for the people, by the people

    Moving the public Stack Overflow sites to the cloud: Part 1

Linked
3
Ubuntu 20.04 LTS no sound on MacbookPro
1
Ubuntu 24.04 on macbook pro 2017 13.3 - issues wake from sleep, wifi, and sound
Related
1
Sound not working on Ubuntu 21.10
1
Sound not working through speakers, but works through headphones Ubuntu 22.04
1
Sound & bluetooth not working on Ubuntu on MacBookPro14,1
2
Only "Dummy Output" appearing for audio in Ubuntu 22.04 and 22.10
4
No Sound Issue: "Dummy Output" on Ubuntu 22.04 with Intel Sunrise Point-LP HD Audio
1
UBUNTU on Macbook Pro 2017 sound not working
Hot Network Questions

    Relay Voltage Transient: Releasing Coil to NC vs. GND and With vs. Without Snubber Diode
    Which two stars of the Pleiades appear as a single star?
    Linux file encryption using GPG key
    A single man to save mankind
    DNA fingerprinting - necessity of steps
    What is the difference between a compiler "frontend" and "backend"?
    Is there a name for this mouth expression?
    What is difference between nowcasting and forecasting?
    What was the first film to use the imaginary character twist?
    Can my Charisma modifier keep stacking on a single action?
    Explanation of method to solve limits
    Fiery tsunami on a sunny day
    Did Napoleon III serve his guests with aluminium plates?
    mean value theorem: applications

more hot questions
Question feed

Ask Ubuntu

    Tour
    Help
    Chat
    Contact
    Feedback

Company

    Stack Overflow
    Teams
    Advertising
    Talent
    About
    Press
    Legal
    Privacy Policy
    Terms of Service
    Cookie Settings
    Cookie Policy

Stack Exchange Network

    Technology
    Culture & recreation
    Life & arts
    Science
    Professional
    Business
    API
    Data

    Blog
    Facebook
    Twitter
    LinkedIn
    Instagram

Site design / logo Â© 2025 Stack Exchange Inc; user contributions licensed under CC BY-SA . rev 2025.8.29.33370
Ubuntu and the circle of friends logo are trade marks of Canonical Limited and are used under licence.


Linux Mint Forums

Welcome to the Linux Mint forums!

Skip to content

    Quick links
    FAQ
    Login
    Register

    Board index Main Edition Support Hardware Support Sound

Sound not working? [SOLVED]
Forum rules
Before you post read how to get help. Topics in this forum are automatically closed 6 months after creation.
11 posts â€¢ Page 1 of 1

Danosso	
    Level 1
    Level 1	
    Posts: 6	
    Joined: Sun Aug 20, 2023 6:56 am	

Sound not working? [SOLVED]

Post by Danosso Â» Sun Aug 20, 2023 7:09 am
I am running Linux Mint 21.2 on a 2017 MacBook Pro. Sound does not work. The internal speakers do not work and when I plug in headphones they do not work either. I would greatly appreciate if someone could help with this.

Code: Select all

System:
  Kernel: 5.15.0-79-generic x86_64 bits: 64 compiler: gcc v: 11.3.0 Desktop: Cinnamon 5.8.4
    tk: GTK 3.24.33 wm: muffin dm: LightDM Distro: Linux Mint 21.2 Victoria base: Ubuntu 22.04 jammy
Machine:
  Type: Laptop System: Apple product: MacBookPro14,1 v: 1.0 serial: <superuser required> Chassis:
    type: 9 v: Mac-B4831CEBD52A0C4C serial: <superuser required>
  Mobo: Apple model: Mac-B4831CEBD52A0C4C v: MacBookPro14,1 serial: <superuser required>
    UEFI: Apple v: 451.120.7.0.0 date: 03/16/2022
Battery:
  ID-1: BAT0 charge: 42.0 Wh (101.7%) condition: 41.3/54.6 Wh (75.6%) volts: 12.9 min: 11.4
    model: SMP bq20z451 serial: N/A status: Full
CPU:
  Info: dual core model: Intel Core i5-7360U bits: 64 type: MT MCP arch: Amber/Kaby Lake
    note: check rev: 9 cache: L1: 128 KiB L2: 512 KiB L3: 4 MiB
  Speed (MHz): avg: 3600 min/max: 400/3600 cores: 1: 3600 2: 3600 3: 3600 4: 3600
    bogomips: 18399
  Flags: avx avx2 ht lm nx pae sse sse2 sse3 sse4_1 sse4_2 ssse3 vmx
Graphics:
  Device-1: Intel Iris Plus Graphics 640 vendor: Apple driver: i915 v: kernel ports: active: eDP-1
    empty: DP-1, DP-2, HDMI-A-1, HDMI-A-2 bus-ID: 00:02.0 chip-ID: 8086:5926
  Display: x11 server: X.Org v: 1.21.1.4 driver: X: loaded: modesetting unloaded: fbdev,vesa
    gpu: i915 display-ID: :0 screens: 1
  Screen-1: 0 s-res: 2560x1600 s-dpi: 96
  Monitor-1: eDP-1 model: Apple Color LCD res: 2560x1600 dpi: 227 diag: 337mm (13.3")
  OpenGL: renderer: Mesa Intel Iris Plus Graphics 640 (Kaby Lake GT3e) (KBL GT3)
    v: 4.6 Mesa 23.0.4-0ubuntu1~22.04.1 direct render: Yes
Audio:
  Device-1: Intel Sunrise Point-LP HD Audio driver: snd_hda_intel v: kernel bus-ID: 00:1f.3
    chip-ID: 8086:9d71
  Device-2: Broadcom 720p FaceTime HD Camera driver: N/A pcie: speed: 5 GT/s lanes: 1
    bus-ID: 03:00.0 chip-ID: 14e4:1570
  Sound Server-1: ALSA v: k5.15.0-79-generic running: yes
  Sound Server-2: PulseAudio v: 15.99.1 running: yes
  Sound Server-3: PipeWire v: 0.3.48 running: yes
Network:
  Device-1: Broadcom BCM4350 802.11ac Wireless Network Adapter vendor: Apple driver: brcmfmac
    v: kernel pcie: speed: 2.5 GT/s lanes: 1 bus-ID: 02:00.0 chip-ID: 14e4:43a3
  IF: wlp2s0 state: up mac: <filter>
RAID:
  Device-1: bpool type: zfs status: ONLINE level: linear raw: size: 1.88 GiB free: 1.6 GiB zfs-fs:
    size: 1.75 GiB free: 1.48 GiB
  Components: Online: N/A
  Device-2: rpool type: zfs status: ONLINE level: linear raw: size: 228 GiB free: 208 GiB
    zfs-fs: size: 220.94 GiB free: 200.82 GiB
  Components: Online: N/A
Drives:
  Local Storage: total: raw: 233.76 GiB usable: 456.45 GiB used: 20.4 GiB (4.5%)
  ID-1: /dev/nvme0n1 vendor: Apple model: SSD AP0256J size: 233.76 GiB speed: 31.6 Gb/s lanes: 4
    serial: <filter> temp: 42.9 C
  ID-2: /dev/nvme0n2 vendor: Apple model: SSD AP0256J size: 8 KiB speed: 31.6 Gb/s lanes: 4
    serial: <filter> temp: 42.9 C
Partition:
  ID-1: / size: 208.71 GiB used: 7.9 GiB (3.8%) fs: zfs logical: rpool/ROOT/ubuntu_6a6luu
  ID-2: /boot size: 1.75 GiB used: 277.2 MiB (15.5%) fs: zfs logical: bpool/BOOT/ubuntu_6a6luu
  ID-3: /boot/efi size: 510.9 MiB used: 14.3 MiB (2.8%) fs: vfat dev: /dev/nvme0n1p1
  ID-4: /var/log size: 200.83 GiB used: 14.5 MiB (0.0%) fs: zfs
    logical: rpool/ROOT/ubuntu_6a6luu/var/log
Swap:
  ID-1: swap-1 type: partition size: 2 GiB used: 2.8 MiB (0.1%) priority: -2 dev: /dev/nvme0n1p2
USB:
  Hub-1: 1-0:1 info: Hi-speed hub with single TT ports: 12 rev: 2.0 speed: 480 Mb/s
    chip-ID: 1d6b:0002
  Hub-2: 2-0:1 info: Super-speed hub ports: 6 rev: 3.0 speed: 5 Gb/s chip-ID: 1d6b:0003
  Hub-3: 3-0:1 info: Hi-speed hub with single TT ports: 2 rev: 2.0 speed: 480 Mb/s
    chip-ID: 1d6b:0002
  Hub-4: 4-0:1 info: Super-speed hub ports: 2 rev: 3.1 speed: 10 Gb/s chip-ID: 1d6b:0003
Sensors:
  System Temperatures: cpu: 65.0 C mobo: N/A
  Fan Speeds (RPM): N/A
Repos:
  Packages: apt: 2491
  No active apt repos in: /etc/apt/sources.list
  Active apt repos in: /etc/apt/sources.list.d/official-package-repositories.list
    1: deb http: //linux-mint.froonix.org victoria main upstream import backport
    2: deb http: //archive.ubuntu.com/ubuntu jammy main restricted universe multiverse
    3: deb http: //archive.ubuntu.com/ubuntu jammy-updates main restricted universe multiverse
    4: deb http: //archive.ubuntu.com/ubuntu jammy-backports main restricted universe multiverse
    5: deb http: //security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse
  No active apt repos in: /etc/apt/sources.list.d/steam-beta.list
  Active apt repos in: /etc/apt/sources.list.d/steam-stable.list
    1: deb [arch=amd64,i386 signed-by=/usr/share/keyrings/steam.gpg] https: //repo.steampowered.com/steam/ stable steam
    2: deb-src [arch=amd64,i386 signed-by=/usr/share/keyrings/steam.gpg] https: //repo.steampowered.com/steam/ stable steam
  Active apt repos in: /etc/apt/sources.list.d/winehq-jammy.sources
    1: deb [arch=amd64 i386] https: //dl.winehq.org/wine-builds/ubuntu jammy main
Info:
  Processes: 325 Uptime: 2h 4m Memory: 7.62 GiB used: 7.25 GiB (95.1%) Init: systemd v: 249
  runlevel: 5 Compilers: gcc: 11.4.0 alt: 11/12 Client: Unknown python3.10 client inxi: 3.3.13

Last edited by LockBot on Tue Feb 20, 2024 11:00 pm, edited 4 times in total.
Reason: Topic automatically closed 6 months after creation. New replies are no longer allowed.	
Top

User avatar
Midnight True	
    Level 8
    Level 8	
    Posts: 2401	
    Joined: Wed Jul 20, 2022 3:23 am	
    Location: Pilipinas ğŸ‡µğŸ‡­
    Contact: Contact Midnight True

Re: Sound not working?

Post by Midnight True Â» Sun Aug 20, 2023 8:48 am

    Danosso wrote: â¤´Sun Aug 20, 2023 7:09 am

Hi and Welcome to the forum.

We need more information about your system, please follow the instructions here viewtopic.php?p=1806121#p1806121
ğŸµ Secrets of the Silent Witch - Main Theme
ğŸµ The Secret of the Silent Witch Original Soundtrack Preview
Top

Danosso	
    Level 1
    Level 1	
    Posts: 6	
    Joined: Sun Aug 20, 2023 6:56 am	

Re: Sound not working?

Post by Danosso Â» Sun Aug 20, 2023 9:13 am

    Midnight True wrote: â¤´Sun Aug 20, 2023 8:48 am

        Danosso wrote: â¤´Sun Aug 20, 2023 7:09 am

    Hi and Welcome to the forum.

    We need more information about your system, please follow the instructions here viewtopic.php?p=1806121#p1806121 

Code: Select all

System:
  Kernel: 5.15.0-79-generic x86_64 bits: 64 compiler: gcc v: 11.3.0 Desktop: Cinnamon 5.8.4
    tk: GTK 3.24.33 wm: muffin dm: LightDM Distro: Linux Mint 21.2 Victoria base: Ubuntu 22.04 jammy
Machine:
  Type: Laptop System: Apple product: MacBookPro14,1 v: 1.0 serial: <superuser required> Chassis:
    type: 9 v: Mac-B4831CEBD52A0C4C serial: <superuser required>
  Mobo: Apple model: Mac-B4831CEBD52A0C4C v: MacBookPro14,1 serial: <superuser required>
    UEFI: Apple v: 451.120.7.0.0 date: 03/16/2022
Battery:
  ID-1: BAT0 charge: 42.0 Wh (101.7%) condition: 41.3/54.6 Wh (75.6%) volts: 12.9 min: 11.4
    model: SMP bq20z451 serial: N/A status: Full
CPU:
  Info: dual core model: Intel Core i5-7360U bits: 64 type: MT MCP arch: Amber/Kaby Lake
    note: check rev: 9 cache: L1: 128 KiB L2: 512 KiB L3: 4 MiB
  Speed (MHz): avg: 3600 min/max: 400/3600 cores: 1: 3600 2: 3600 3: 3600 4: 3600
    bogomips: 18399
  Flags: avx avx2 ht lm nx pae sse sse2 sse3 sse4_1 sse4_2 ssse3 vmx
Graphics:
  Device-1: Intel Iris Plus Graphics 640 vendor: Apple driver: i915 v: kernel ports: active: eDP-1
    empty: DP-1, DP-2, HDMI-A-1, HDMI-A-2 bus-ID: 00:02.0 chip-ID: 8086:5926
  Display: x11 server: X.Org v: 1.21.1.4 driver: X: loaded: modesetting unloaded: fbdev,vesa
    gpu: i915 display-ID: :0 screens: 1
  Screen-1: 0 s-res: 2560x1600 s-dpi: 96
  Monitor-1: eDP-1 model: Apple Color LCD res: 2560x1600 dpi: 227 diag: 337mm (13.3")
  OpenGL: renderer: Mesa Intel Iris Plus Graphics 640 (Kaby Lake GT3e) (KBL GT3)
    v: 4.6 Mesa 23.0.4-0ubuntu1~22.04.1 direct render: Yes
Audio:
  Device-1: Intel Sunrise Point-LP HD Audio driver: snd_hda_intel v: kernel bus-ID: 00:1f.3
    chip-ID: 8086:9d71
  Device-2: Broadcom 720p FaceTime HD Camera driver: N/A pcie: speed: 5 GT/s lanes: 1
    bus-ID: 03:00.0 chip-ID: 14e4:1570
  Sound Server-1: ALSA v: k5.15.0-79-generic running: yes
  Sound Server-2: PulseAudio v: 15.99.1 running: yes
  Sound Server-3: PipeWire v: 0.3.48 running: yes
Network:
  Device-1: Broadcom BCM4350 802.11ac Wireless Network Adapter vendor: Apple driver: brcmfmac
    v: kernel pcie: speed: 2.5 GT/s lanes: 1 bus-ID: 02:00.0 chip-ID: 14e4:43a3
  IF: wlp2s0 state: up mac: <filter>
RAID:
  Device-1: bpool type: zfs status: ONLINE level: linear raw: size: 1.88 GiB free: 1.6 GiB zfs-fs:
    size: 1.75 GiB free: 1.48 GiB
  Components: Online: N/A
  Device-2: rpool type: zfs status: ONLINE level: linear raw: size: 228 GiB free: 208 GiB
    zfs-fs: size: 220.94 GiB free: 200.82 GiB
  Components: Online: N/A
Drives:
  Local Storage: total: raw: 233.76 GiB usable: 456.45 GiB used: 20.4 GiB (4.5%)
  ID-1: /dev/nvme0n1 vendor: Apple model: SSD AP0256J size: 233.76 GiB speed: 31.6 Gb/s lanes: 4
    serial: <filter> temp: 42.9 C
  ID-2: /dev/nvme0n2 vendor: Apple model: SSD AP0256J size: 8 KiB speed: 31.6 Gb/s lanes: 4
    serial: <filter> temp: 42.9 C
Partition:
  ID-1: / size: 208.71 GiB used: 7.9 GiB (3.8%) fs: zfs logical: rpool/ROOT/ubuntu_6a6luu
  ID-2: /boot size: 1.75 GiB used: 277.2 MiB (15.5%) fs: zfs logical: bpool/BOOT/ubuntu_6a6luu
  ID-3: /boot/efi size: 510.9 MiB used: 14.3 MiB (2.8%) fs: vfat dev: /dev/nvme0n1p1
  ID-4: /var/log size: 200.83 GiB used: 14.5 MiB (0.0%) fs: zfs
    logical: rpool/ROOT/ubuntu_6a6luu/var/log
Swap:
  ID-1: swap-1 type: partition size: 2 GiB used: 2.8 MiB (0.1%) priority: -2 dev: /dev/nvme0n1p2
USB:
  Hub-1: 1-0:1 info: Hi-speed hub with single TT ports: 12 rev: 2.0 speed: 480 Mb/s
    chip-ID: 1d6b:0002
  Hub-2: 2-0:1 info: Super-speed hub ports: 6 rev: 3.0 speed: 5 Gb/s chip-ID: 1d6b:0003
  Hub-3: 3-0:1 info: Hi-speed hub with single TT ports: 2 rev: 2.0 speed: 480 Mb/s
    chip-ID: 1d6b:0002
  Hub-4: 4-0:1 info: Super-speed hub ports: 2 rev: 3.1 speed: 10 Gb/s chip-ID: 1d6b:0003
Sensors:
  System Temperatures: cpu: 65.0 C mobo: N/A
  Fan Speeds (RPM): N/A
Repos:
  Packages: apt: 2491
  No active apt repos in: /etc/apt/sources.list
  Active apt repos in: /etc/apt/sources.list.d/official-package-repositories.list
    1: deb http: //linux-mint.froonix.org victoria main upstream import backport
    2: deb http: //archive.ubuntu.com/ubuntu jammy main restricted universe multiverse
    3: deb http: //archive.ubuntu.com/ubuntu jammy-updates main restricted universe multiverse
    4: deb http: //archive.ubuntu.com/ubuntu jammy-backports main restricted universe multiverse
    5: deb http: //security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse
  No active apt repos in: /etc/apt/sources.list.d/steam-beta.list
  Active apt repos in: /etc/apt/sources.list.d/steam-stable.list
    1: deb [arch=amd64,i386 signed-by=/usr/share/keyrings/steam.gpg] https: //repo.steampowered.com/steam/ stable steam
    2: deb-src [arch=amd64,i386 signed-by=/usr/share/keyrings/steam.gpg] https: //repo.steampowered.com/steam/ stable steam
  Active apt repos in: /etc/apt/sources.list.d/winehq-jammy.sources
    1: deb [arch=amd64 i386] https: //dl.winehq.org/wine-builds/ubuntu jammy main
Info:
  Processes: 325 Uptime: 2h 4m Memory: 7.62 GiB used: 7.25 GiB (95.1%) Init: systemd v: 249
  runlevel: 5 Compilers: gcc: 11.4.0 alt: 11/12 Client: Unknown python3.10 client inxi: 3.3.13

Top

User avatar
Midnight True	
    Level 8
    Level 8	
    Posts: 2401	
    Joined: Wed Jul 20, 2022 3:23 am	
    Location: Pilipinas ğŸ‡µğŸ‡­
    Contact: Contact Midnight True

Re: Sound not working?

Post by Midnight True Â» Sun Aug 20, 2023 10:35 am

    Danosso wrote: â¤´Sun Aug 20, 2023 9:13 am

    Code: Select all

    Audio:
      Device-1: Intel Sunrise Point-LP HD Audio driver: snd_hda_intel v: kernel bus-ID: 00:1f.3
        chip-ID: 8086:9d71
      Device-2: Broadcom 720p FaceTime HD Camera driver: N/A pcie: speed: 5 GT/s lanes: 1
        bus-ID: 03:00.0 chip-ID: 14e4:1570

it seems you are missing some driver, this might be the reason. Moreover you are using newer hardware

    Danosso wrote: â¤´Sun Aug 20, 2023 9:13 am

    Code: Select all

    Machine:
      Type: Laptop System: Apple product: MacBookPro14,1 v: 1.0 serial: <superuser required> Chassis:
        type: 9 v: Mac-B4831CEBD52A0C4C serial: <superuser required>
      Mobo: Apple model: Mac-B4831CEBD52A0C4C v: MacBookPro14,1 serial: <superuser required>
        UEFI: Apple v: 451.120.7.0.0 date: 03/16/2022

i recommend to try the HWE kernel and see if it helps.
Please navigate to Main Menu / Start Menu --> Update Manager --> View --> Linux Kernels --> Continue --> find the latest 6.2.x kernel series --> Click --> Install
Please wait until the installation is complete, once completed reboot/restart your system and then report back if it solves the issue
ğŸµ Secrets of the Silent Witch - Main Theme
ğŸµ The Secret of the Silent Witch Original Soundtrack Preview
Top

Danosso	
    Level 1
    Level 1	
    Posts: 6	
    Joined: Sun Aug 20, 2023 6:56 am	

Re: Sound not working?

Post by Danosso Â» Sun Aug 20, 2023 11:24 am

    Midnight True wrote: â¤´Sun Aug 20, 2023 10:35 am

        Danosso wrote: â¤´Sun Aug 20, 2023 9:13 am

        Code: Select all

        Audio:
          Device-1: Intel Sunrise Point-LP HD Audio driver: snd_hda_intel v: kernel bus-ID: 00:1f.3
            chip-ID: 8086:9d71
          Device-2: Broadcom 720p FaceTime HD Camera driver: N/A pcie: speed: 5 GT/s lanes: 1
            bus-ID: 03:00.0 chip-ID: 14e4:1570

    it seems you are missing some driver, this might be the reason. Moreover you are using newer hardware

        Danosso wrote: â¤´Sun Aug 20, 2023 9:13 am

        Code: Select all

        Machine:
          Type: Laptop System: Apple product: MacBookPro14,1 v: 1.0 serial: <superuser required> Chassis:
            type: 9 v: Mac-B4831CEBD52A0C4C serial: <superuser required>
          Mobo: Apple model: Mac-B4831CEBD52A0C4C v: MacBookPro14,1 serial: <superuser required>
            UEFI: Apple v: 451.120.7.0.0 date: 03/16/2022

    i recommend to try the HWE kernel and see if it helps.
    Please navigate to Main Menu / Start Menu --> Update Manager --> View --> Linux Kernels --> Continue --> find the latest 6.2.x kernel series --> Click --> Install
    Please wait until the installation is complete, once completed reboot/restart your system and then report back if it solves the issue 

It didn't, sound still doesn't work unfortunately. Also what do you mean by newer hardware? Thanks! :)

Code: Select all

System:
  Kernel: 6.2.0-26-generic x86_64 bits: 64 compiler: N/A Desktop: Cinnamon 5.8.4 tk: GTK 3.24.33
    wm: muffin dm: LightDM Distro: Linux Mint 21.2 Victoria base: Ubuntu 22.04 jammy
Machine:
  Type: Laptop System: Apple product: MacBookPro14,1 v: 1.0 serial: <superuser required> Chassis:
    type: 9 v: Mac-B4831CEBD52A0C4C serial: <superuser required>
  Mobo: Apple model: Mac-B4831CEBD52A0C4C v: MacBookPro14,1 serial: <superuser required>
    UEFI: Apple v: 451.120.7.0.0 date: 03/16/2022
Battery:
  ID-1: BAT0 charge: 33.6 Wh (78.3%) condition: 42.9/54.6 Wh (78.5%) volts: 11.8 min: 11.4
    model: SMP bq20z451 serial: N/A status: Discharging
CPU:
  Info: dual core model: Intel Core i5-7360U bits: 64 type: MT MCP arch: Amber/Kaby Lake
    note: check rev: 9 cache: L1: 128 KiB L2: 512 KiB L3: 4 MiB
  Speed (MHz): avg: 3600 high: 3602 min/max: 400/3600 cores: 1: 3600 2: 3600 3: 3602 4: 3600
    bogomips: 18399
  Flags: avx avx2 ht lm nx pae sse sse2 sse3 sse4_1 sse4_2 ssse3 vmx
Graphics:
  Device-1: Intel Iris Plus Graphics 640 vendor: Apple driver: i915 v: kernel ports: active: eDP-1
    empty: DP-1, DP-2, HDMI-A-1, HDMI-A-2 bus-ID: 00:02.0 chip-ID: 8086:5926
  Display: x11 server: X.Org v: 1.21.1.4 driver: X: loaded: modesetting unloaded: fbdev,vesa
    gpu: i915 display-ID: :0 screens: 1
  Screen-1: 0 s-res: 2560x1600 s-dpi: 96
  Monitor-1: eDP-1 model: Apple Color LCD res: 2560x1600 dpi: 227 diag: 337mm (13.3")
  OpenGL: renderer: Mesa Intel Iris Plus Graphics 640 (Kaby Lake GT3e) (KBL GT3)
    v: 4.6 Mesa 23.0.4-0ubuntu1~22.04.1 direct render: Yes
Audio:
  Device-1: Intel Sunrise Point-LP HD Audio driver: snd_hda_intel v: kernel bus-ID: 00:1f.3
    chip-ID: 8086:9d71
  Device-2: Broadcom 720p FaceTime HD Camera driver: N/A pcie: speed: 5 GT/s lanes: 1
    bus-ID: 03:00.0 chip-ID: 14e4:1570
  Sound Server-1: ALSA v: k6.2.0-26-generic running: yes
  Sound Server-2: PulseAudio v: 15.99.1 running: yes
  Sound Server-3: PipeWire v: 0.3.48 running: yes
Network:
  Device-1: Broadcom BCM4350 802.11ac Wireless Network Adapter vendor: Apple driver: brcmfmac
    v: kernel pcie: speed: 2.5 GT/s lanes: 1 bus-ID: 02:00.0 chip-ID: 14e4:43a3
  IF: wlp2s0 state: up mac: <filter>
RAID:
  Device-1: bpool type: zfs status: ONLINE level: linear raw: size: 1.88 GiB free: 1.44 GiB
    zfs-fs: size: 1.75 GiB free: 1.32 GiB
  Components: Online: N/A
  Device-2: rpool type: zfs status: ONLINE level: linear raw: size: 228 GiB free: 205 GiB
    zfs-fs: size: 220.94 GiB free: 198.01 GiB
  Components: Online: N/A
Drives:
  Local Storage: total: raw: 233.76 GiB usable: 456.45 GiB used: 23.36 GiB (5.1%)
  ID-1: /dev/nvme0n1 vendor: Apple model: SSD AP0256J size: 233.76 GiB speed: 31.6 Gb/s lanes: 4
    serial: <filter> temp: 46.9 C
  ID-2: /dev/nvme0n2 vendor: Apple model: SSD AP0256J size: 8 KiB speed: 31.6 Gb/s lanes: 4
    serial: <filter> temp: 46.9 C
Partition:
  ID-1: / size: 206.47 GiB used: 8.46 GiB (4.1%) fs: zfs logical: rpool/ROOT/ubuntu_6a6luu
  ID-2: /boot size: 1.75 GiB used: 440.2 MiB (24.6%) fs: zfs logical: bpool/BOOT/ubuntu_6a6luu
  ID-3: /boot/efi size: 510.9 MiB used: 14.3 MiB (2.8%) fs: vfat dev: /dev/nvme0n1p1
  ID-4: /var/log size: 198.02 GiB used: 16.6 MiB (0.0%) fs: zfs
    logical: rpool/ROOT/ubuntu_6a6luu/var/log
Swap:
  ID-1: swap-1 type: partition size: 2 GiB used: 0 KiB (0.0%) priority: -2 dev: /dev/nvme0n1p2
USB:
  Hub-1: 1-0:1 info: Hi-speed hub with single TT ports: 12 rev: 2.0 speed: 480 Mb/s
    chip-ID: 1d6b:0002
  Hub-2: 2-0:1 info: Super-speed hub ports: 6 rev: 3.0 speed: 5 Gb/s chip-ID: 1d6b:0003
  Hub-3: 3-0:1 info: Hi-speed hub with single TT ports: 2 rev: 2.0 speed: 480 Mb/s
    chip-ID: 1d6b:0002
  Hub-4: 4-0:1 info: Super-speed hub ports: 2 rev: 3.1 speed: 10 Gb/s chip-ID: 1d6b:0003
Sensors:
  System Temperatures: cpu: 40.4 C mobo: N/A
  Fan Speeds (RPM): N/A
Repos:
  Packages: apt: 2499
  No active apt repos in: /etc/apt/sources.list
  Active apt repos in: /etc/apt/sources.list.d/official-package-repositories.list
    1: deb https: //www.mirrorservice.org/sites/packages.linuxmint.com/packages victoria main upstream import backport
    2: deb http: //archive.ubuntu.com/ubuntu jammy main restricted universe multiverse
    3: deb http: //archive.ubuntu.com/ubuntu jammy-updates main restricted universe multiverse
    4: deb http: //archive.ubuntu.com/ubuntu jammy-backports main restricted universe multiverse
    5: deb http: //security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse
  No active apt repos in: /etc/apt/sources.list.d/steam-beta.list
  Active apt repos in: /etc/apt/sources.list.d/steam-stable.list
    1: deb [arch=amd64,i386 signed-by=/usr/share/keyrings/steam.gpg] https: //repo.steampowered.com/steam/ stable steam
    2: deb-src [arch=amd64,i386 signed-by=/usr/share/keyrings/steam.gpg] https: //repo.steampowered.com/steam/ stable steam
  Active apt repos in: /etc/apt/sources.list.d/winehq-jammy.sources
    1: deb [arch=amd64 i386] https: //dl.winehq.org/wine-builds/ubuntu jammy main
Info:
  Processes: 321 Uptime: 38m Memory: 7.62 GiB used: 3.25 GiB (42.7%) Init: systemd v: 249
  runlevel: 5 Compilers: gcc: 11.4.0 alt: 11/12 Client: Unknown python3.10 client inxi: 3.3.13

Top

User avatar
SMG	
    Level 25
    Level 25	
    Posts: 43764	
    Joined: Sun Jul 26, 2020 6:15 pm	
    Location: USA

Re: Sound not working?

Post by SMG Â» Sun Aug 20, 2023 12:11 pm

    Danosso wrote: â¤´Sun Aug 20, 2023 7:09 am
    I am running Linux Mint 21.2 on a 2017 MacBook Pro. Sound does not work. The internal speakers do not work and when I plug in headphones they do not work either. I would greatly appreciate if someone could help with this.

Welcome to the forum, Danosso.

Did you do or review any of the steps in the Tips for Troubleshooting Sound Issues Rev. 1?

Your hardware is not new, but it is Apple hardware which means specialized drivers may be needed depending upon what hardware was used in your system.

Please provide the output of aplay -l and the output of

Code: Select all

journalctl -k | grep -Ei "ALSA|HDA|sof[-]|HDMI|snd[_-]|sound|hda.codec|hda.intel"

and enclose the results in code tags as described in this tutorial How to use code display tags on forums.linuxmint.com.
Image
A woman typing on a laptop with LM22.2 Cinnamon beta.
Top

Danosso	
    Level 1
    Level 1	
    Posts: 6	
    Joined: Sun Aug 20, 2023 6:56 am	

Re: Sound not working?

Post by Danosso Â» Sun Aug 20, 2023 12:49 pm

    SMG wrote: â¤´Sun Aug 20, 2023 12:11 pm

        Danosso wrote: â¤´Sun Aug 20, 2023 7:09 am
        I am running Linux Mint 21.2 on a 2017 MacBook Pro. Sound does not work. The internal speakers do not work and when I plug in headphones they do not work either. I would greatly appreciate if someone could help with this.

    Welcome to the forum, Danosso.

    Did you do or review any of the steps in the Tips for Troubleshooting Sound Issues Rev. 1?

    Your hardware is not new, but it is Apple hardware which means specialized drivers may be needed depending upon what hardware was used in your system.

    Please provide the output of aplay -l and the output of

    Code: Select all

    journalctl -k | grep -Ei "ALSA|HDA|sof[-]|HDMI|snd[_-]|sound|hda.codec|hda.intel"

    and enclose the results in code tags as described in this tutorial How to use code display tags on forums.linuxmint.com. 

Code: Select all

**** List of PLAYBACK Hardware Devices ****
card 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]
  Subdevices: 1/1
  Subdevice #0: subdevice #0

and

Code: Select all

Aug 20 17:38:05 dan-MacBookPro kernel: snd_hda_intel 0000:00:1f.3: bound 0000:00:02.0 (ops i915_audio_component_bind_ops [i915])
Aug 20 17:38:05 dan-MacBookPro kernel: snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
Aug 20 17:38:05 dan-MacBookPro kernel: snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
Aug 20 17:38:05 dan-MacBookPro kernel: snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
Aug 20 17:38:05 dan-MacBookPro kernel: snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
Aug 20 17:38:05 dan-MacBookPro kernel: snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
Aug 20 17:38:05 dan-MacBookPro kernel: snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
Aug 20 17:38:05 dan-MacBookPro kernel: snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c
Aug 20 17:38:05 dan-MacBookPro kernel: input: HDA Intel PCH HDMI/DP,pcm=3 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input7
Aug 20 17:38:05 dan-MacBookPro kernel: input: HDA Intel PCH HDMI/DP,pcm=7 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input8
Aug 20 17:38:05 dan-MacBookPro kernel: input: HDA Intel PCH HDMI/DP,pcm=8 as /devices/pci0000:00/0000:00:1f.3/sound/card0/input9

Top

User avatar
SMG	
    Level 25
    Level 25	
    Posts: 43764	
    Joined: Sun Jul 26, 2020 6:15 pm	
    Location: USA

Re: Sound not working?

Post by SMG Â» Sun Aug 20, 2023 1:30 pm

    Danosso wrote: â¤´Sun Aug 20, 2023 12:49 pm

    Code: Select all

    **** List of PLAYBACK Hardware Devices ****
    card 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]
      Subdevices: 1/1
      Subdevice #0: subdevice #0
    card 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]
      Subdevices: 1/1
      Subdevice #0: subdevice #0
    card 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]
      Subdevices: 1/1
      Subdevice #0: subdevice #0

This shows no sound card which means there will be no sound until it can be seen by the operating system.

It just so happens the topic of the last person I helped with Apple hardware and a cs8409 codec was bumped today because an additional person was helped by the instructions. (So I didn't even have to search for the topic. :mrgreen: ) However, they have an iMac18,1 (and there were also some with 18,3s) and not the 14,1 you have so make sure to take a Timeshift snapshot before trying it.

Aug 20 17:38:05 dan-MacBookPro kernel: snd_hda_codec_CS8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker

Here are directions for several options you can try. Neither option specifies an iMac version. The GitHub for the first option, which is why I think most people have used, says, "Linux Kernel Sound Driver for Cirrus Logic CS8409 (e.g. for iMac27 5k)". The GitHub for the second option says, "Kernel audio driver for Macs with 8409 HDA chip + MAX98706/SSM3515 amps".

If you try the first version and it does not work for you, roll back to your Timeshift snapshot before trying the second version.

If you have any questions about the options, just let us know what they are.
Image
A woman typing on a laptop with LM22.2 Cinnamon beta.
Top

Danosso	
    Level 1
    Level 1	
    Posts: 6	
    Joined: Sun Aug 20, 2023 6:56 am	

Re: Sound not working?

Post by Danosso Â» Sun Aug 20, 2023 2:47 pm

    SMG wrote: â¤´Sun Aug 20, 2023 1:30 pm

        Danosso wrote: â¤´Sun Aug 20, 2023 12:49 pm

        Code: Select all

        **** List of PLAYBACK Hardware Devices ****
        card 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]
          Subdevices: 1/1
          Subdevice #0: subdevice #0
        card 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]
          Subdevices: 1/1
          Subdevice #0: subdevice #0
        card 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]
          Subdevices: 1/1
          Subdevice #0: subdevice #0

    This shows no sound card which means there will be no sound until it can be seen by the operating system.

    It just so happens the topic of the last person I helped with Apple hardware and a cs8409 codec was bumped today because an additional person was helped by the instructions. (So I didn't even have to search for the topic. :mrgreen: ) However, they have an iMac18,1 (and there were also some with 18,3s) and not the 14,1 you have so make sure to take a Timeshift snapshot before trying it.

    Aug 20 17:38:05 dan-MacBookPro kernel: snd_hda_codec_CS8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker

    Here are directions for several options you can try. Neither option specifies an iMac version. The GitHub for the first option, which is why I think most people have used, says, "Linux Kernel Sound Driver for Cirrus Logic CS8409 (e.g. for iMac27 5k)". The GitHub for the second option says, "Kernel audio driver for Macs with 8409 HDA chip + MAX98706/SSM3515 amps".

    If you try the first version and it does not work for you, roll back to your Timeshift snapshot before trying the second version.

    If you have any questions about the options, just let us know what they are. 

AWESOME!!! You fixed it :D thank youuu!! I wish to be as knowledgeable as you in the future. I heard the Linux community was rude and unhelpful but I guess that wasn't true! Thanks again, have a nice day!
Top

User avatar
SMG	
    Level 25
    Level 25	
    Posts: 43764	
    Joined: Sun Jul 26, 2020 6:15 pm	
    Location: USA

Re: Sound not working?

Post by SMG Â» Sun Aug 20, 2023 2:58 pm

    Danosso wrote: â¤´Sun Aug 20, 2023 2:47 pm
    AWESOME!!! You fixed it :D thank youuu!! 

You used the first option or the second one?

This is helping enough people that I'm going to add a section this week to the Sound Troubleshooting tips topic with the info.

Please go to your first post in this topic, click the pencil icon, and add [SOLVED] to the beginning of the title so others know you are no longer seeking help on this issue.
Image
A woman typing on a laptop with LM22.2 Cinnamon beta.
Top

Danosso	
    Level 1
    Level 1	
    Posts: 6	
    Joined: Sun Aug 20, 2023 6:56 am	

Re: Sound not working?

Post by Danosso Â» Sun Aug 20, 2023 3:09 pm

    SMG wrote: â¤´Sun Aug 20, 2023 2:58 pm

        Danosso wrote: â¤´Sun Aug 20, 2023 2:47 pm
        AWESOME!!! You fixed it :D thank youuu!! 

    You used the first option or the second one?

    This is helping enough people that I'm going to add a section this week to the Sound Troubleshooting tips topic with the info.

    Please go to your first post in this topic, click the pencil icon, and add [SOLVED] to the beginning of the title so others know you are no longer seeking help on this issue. 

first option
Top
11 posts â€¢ Page 1 of 1

Return to â€œSoundâ€

    Board index	
    All times are UTC-04:00
    Delete cookies
    Contact us

Powered by phpBBÂ® Forum Software Â© phpBB Limited

Privacy | Terms

Ø¹Ø§Ù„ÛŒ! Ù…Ù† Ø±Ø§Ù‡ Ø­Ù„ Ø±Ùˆ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù…. Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ Ú©Ù‡ Ø§Ø² Ø§Ù†Ø¬Ù…Ù†â€ŒÙ‡Ø§ÛŒ Ubuntu Ùˆ Linux Mint Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù…ØŒ Ù…Ø´Ú©Ù„ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ MacBook Ø¨Ø§ Ú©Ø¯Ú© CS8409 ÛŒÚ© Ù…Ø´Ú©Ù„ Ø´Ù†Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø§Ø³Øª Ùˆ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ø±Ø§ÛŒÙˆØ± Ø®Ø§Øµ Ø¯Ø§Ø±Ø¯.
Ø±Ø§Ù‡ Ø­Ù„ Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Kali Linux:
1. Ù†ØµØ¨ Ø¯Ø±Ø§ÛŒÙˆØ± Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ CS8409:
bash

# Ù†ØµØ¨ prerequisites
sudo apt update
sudo apt install wget make gcc linux-headers-$(uname -r)

# Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¯Ø±Ø§ÛŒÙˆØ± Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ MacBook
git clone https://github.com/davidjo/snd_hda_macbookpro.git
cd snd_hda_macbookpro/

# Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù†ØµØ¨
chmod +x install.cirrus.driver.sh
sudo ./install.cirrus.driver.sh

2. Ø§Ú¯Ø± Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø§Ù„Ø§ Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø§Ø² Ø§ÛŒÙ† Ø±ÙˆØ´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
bash

# Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø¯Ø³ØªÛŒ Ø¯Ø±Ø§ÛŒÙˆØ±
cd snd_hda_macbookpro/
make
sudo make install

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„
sudo depmod -a
sudo modprobe snd_hda_macbookpro

3. Ø±ÛŒØ³ØªØ§Ø±Øª Ø³ÛŒØ³ØªÙ…:
bash

sudo reboot

4. Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡
lsmod | grep snd

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª ØµØ¯Ø§
speaker-test -c 2 -t wav

5. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ø§ÛŒÙ† Ù¾Ú† Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
bash

# Ù¾Ú† Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø¨Ø±Ø§ÛŒ CS8409
git clone https://github.com/egorenar/snd-hda-codec-cs8409.git
cd snd-hda-codec-cs8409/
make
sudo make install
sudo depmod -a
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe snd_hda_codec_cs8409

6. Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø¯Ø§Ø¦Ù…ÛŒ:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ config Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ø§Ú˜ÙˆÙ„
echo "snd_hda_macbookpro" | sudo tee -a /etc/modules-load.d/sound.conf
echo "options snd_hda_intel model=mbp16" | sudo tee /etc/modprobe.d/macbook-audio.conf

# Ø¢Ù¾Ø¯ÛŒØª initramfs
sudo update-initramfs -u

7. Ø±ÛŒØ³ØªØ§Ø±Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

sudo reboot

Ø§Ú¯Ø± Ù‡Ù…Ú†Ù†Ø§Ù† Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª:
1. Ø¨Ø±Ø±Ø³ÛŒ kernel logs:
bash

dmesg | grep -i "cs8409\|audio\|snd"

2. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² kernel Ø¬Ø¯ÛŒØ¯ØªØ±:
bash

# Ù†ØµØ¨ kernel Ø¬Ø¯ÛŒØ¯ØªØ±
sudo apt install linux-image-6.5.0-kali2-amd64
sudo reboot

3. Ú¯Ø²Ø§Ø±Ø´ Ø®Ø·Ø§:

Ø§Ú¯Ø± Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù… Ø§Ø² Ø±ÙˆØ´â€ŒÙ‡Ø§ Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø²ÛŒØ± Ø±Ùˆ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ú©Ù†ÛŒØ¯:
bash

# Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø®Ø·Ø§
echo "=== System Info ===" > audio_bug_report.txt
uname -a >> audio_bug_report.txt
echo "=== Audio Hardware ===" >> audio_bug_report.txt
lspci -v | grep -i audio -A 10 >> audio_bug_report.txt
echo "=== Kernel Messages ===" >> audio_bug_report.txt
dmesg | grep -i "cs8409\|audio\|snd" >> audio_bug_report.txt
echo "=== Loaded Modules ===" >> audio_bug_report.txt
lsmod | grep snd >> audio_bug_report.txt

cat audio_bug_report.txt

Ø§ÛŒÙ† Ø¯Ø±Ø§ÛŒÙˆØ±Ù‡Ø§ÛŒ Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ MacBookâ€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ Ú©Ø¯Ú© CS8409 Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ Ùˆ Ø¯Ø± Ø¨Ø³ÛŒØ§Ø±ÛŒ Ø§Ø² Ù…ÙˆØ§Ø±Ø¯ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ù†ØµØ¨ prerequisites
sudo apt update
sudo apt install wget make gcc linux-headers-$(uname -r)

# Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¯Ø±Ø§ÛŒÙˆØ± Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ MacBook
git clone https://github.com/davidjo/snd_hda_macbookpro.git
cd snd_hda_macbookpro/

# Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù†ØµØ¨
chmod +x install.cirrus.driver.sh
sudo ./install.cirrus.driver.sh
[sudo] password for buddha: 
Hit:1 http://http.kali.org/kali kali-rolling InRelease                    
Hit:2 https://dl.google.com/linux/chrome/deb stable InRelease             
Hit:3 https://packages.microsoft.com/repos/code stable InRelease          
All packages are up to date.                         
wget is already the newest version (1.25.0-2).
make is already the newest version (4.4.1-2).
make set to manually installed.
gcc is already the newest version (4:14.2.0-1).
gcc set to manually installed.
linux-headers-6.12.38+kali-amd64 is already the newest version (6.12.38-1kali1).
Summary:
  Upgrading: 0, Installing: 0, Removing: 0, Not Upgrading: 0
fatal: destination path 'snd_hda_macbookpro' already exists and is not an empty directory.
--2025-08-31 02:49:20--  https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.12.38+kali.tar.xz
Resolving cdn.kernel.org (cdn.kernel.org)... 151.101.65.176, 151.101.193.176, 151.101.1.176, ...
Connecting to cdn.kernel.org (cdn.kernel.org)|151.101.65.176|:443... connected.
HTTP request sent, awaiting response... 404 Not Found
2025-08-31 02:49:21 ERROR 404: Not Found.

Failed to download linux-6.12.38+kali.tar.xz
Trying to download base kernel version linux-6.12.tar.xz
This may lead to build failures as too old
If this is an Ubuntu-based distribution this almost certainly will fail to build

--2025-08-31 02:49:21--  https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.12.tar.xz
Resolving cdn.kernel.org (cdn.kernel.org)... 151.101.65.176, 151.101.193.176, 151.101.1.176, ...
Connecting to cdn.kernel.org (cdn.kernel.org)|151.101.65.176|:443... connected.
HTTP request sent, awaiting response... 206 Partial Content
Length: 147906904 (141M), 80839836 (77M) remaining [application/x-xz]
Saving to: â€˜build/linux-6.12.tar.xzâ€™

linux-6.12.tar.xz   82%[+++++++=====>   ] 116.71M   270KB/s    in 5m 1s   

2025-08-31 02:54:24 (179 KB/s) - Read error at byte 122378430/147906904 (Error decoding the received TLS packet.). Retrying.

--2025-08-31 02:54:25--  (try: 2)  https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.12.tar.xz
Connecting to cdn.kernel.org (cdn.kernel.org)|151.101.65.176|:443... connected.
HTTP request sent, awaiting response... 416 Range Not Satisfiable

    The file is already fully retrieved; nothing to do.

xz: (stdin): Compressed data is corrupt
tar: Unexpected EOF in archive
tar: Error is not recoverable: exiting now
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$

Ù…Ø´Ú©Ù„ Ø¯Ø± Ø¯Ø§Ù†Ù„ÙˆØ¯ kernel source Ù‡Ø³Øª. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø³ØªÛŒ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
Ø±Ø§Ù‡ Ø­Ù„ Ø¯Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ Ù†ØµØ¨ Ø¯Ø±Ø§ÛŒÙˆØ± MacBook:
1. Ø§Ø¨ØªØ¯Ø§ kernel headers Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
bash

# Ø¨Ø±Ø±Ø³ÛŒ kernel version ÙØ¹Ù„ÛŒ
echo "Kernel version: $(uname -r)"

# Ø¨Ø±Ø±Ø³ÛŒ kernel headers Ù†ØµØ¨ Ø´Ø¯Ù‡
dpkg -l | grep linux-headers

2. Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø¯Ø±Ø§ÛŒÙˆØ± Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø³ØªÛŒ:
bash

# Ø±ÙØªÙ† Ø¨Ù‡ Ø¯Ø§ÛŒØ±Ú©ØªÙˆØ±ÛŒ Ø¯Ø±Ø§ÛŒÙˆØ±
cd ~/snd_hda_macbookpro

# Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯
ls -la

# Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø¯ÙˆÙ† Ø¯Ø§Ù†Ù„ÙˆØ¯ kernel
make KERNELRELEASE=$(uname -r)

# Ø§Ú¯Ø± Ø®Ø·Ø§ Ø¯Ø§Ø¯ØŒ Ø§Ø² Ø§ÛŒÙ† Ø±ÙˆØ´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
make -C /lib/modules/$(uname -r)/build M=$(pwd) modules

3. Ù†ØµØ¨ Ù…Ø§Ú˜ÙˆÙ„:
bash

# Ù†ØµØ¨ Ù…Ø§Ú˜ÙˆÙ„ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø´Ø¯Ù‡
sudo cp snd-hda-codec-cs8409.ko /lib/modules/$(uname -r)/kernel/sound/pci/hda/
sudo depmod -a
sudo modprobe snd-hda-codec-cs8409

4. Ø§Ú¯Ø± Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ù…ÙˆÙÙ‚ Ù†Ø¨ÙˆØ¯ØŒ Ø§Ø² Ø±ÙˆØ´ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø­Ø°Ù Ø¯Ø§ÛŒØ±Ú©ØªÙˆØ±ÛŒ ÙØ¹Ù„ÛŒ Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù…Ø¬Ø¯Ø¯
cd ~
rm -rf snd_hda_macbookpro
git clone https://github.com/davidjo/snd_hda_macbookpro.git
cd snd_hda_macbookpro

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø¯Ù‡â€ŒØªØ±
chmod +x install.cirrus.driver.sh

# Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø§ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
sudo ./install.cirrus.driver.sh --no-download

5. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ù¾Ú† Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ú† Ø¯Ø³ØªÛŒ
echo "options snd-hda-intel model=mbp16" | sudo tee /etc/modprobe.d/macbook-audio.conf
echo "options snd-hda-codec-cs8409 model=macbook-pro" | sudo tee -a /etc/modprobe.d/macbook-audio.conf

# Ø¢Ù¾Ø¯ÛŒØª initramfs
sudo update-initramfs -u

# Ø±ÛŒØ³ØªØ§Ø±Øª
sudo reboot

6. Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
bash

# Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
lsmod | grep snd

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª ØµØ¯Ø§
speaker-test -c 2 -t wav -f 440

7. Ø§Ú¯Ø± Ù‡Ù…Ú†Ù†Ø§Ù† Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ø§ÛŒÙ† repository Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
bash

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² repository Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†
cd ~
git clone https://github.com/egorenar/snd-hda-codec-cs8409.git
cd snd-hda-codec-cs8409

# Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ùˆ Ù†ØµØ¨
make
sudo make install
sudo depmod -a
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe snd_hda_codec_cs8409

8. Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø¨Ø±Ø±Ø³ÛŒ logs
dmesg | grep -i "cs8409\|audio" | tail -10

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ
timeout 5s speaker-test -c 2 -t wav && echo "âœ… Success!" || echo "âŒ Failed"

Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† Ù…Ø±Ø§Ø­Ù„ Ø±Ùˆ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯ÛŒØ¯ Ùˆ Ø§Ú¯Ø± Ø®Ø·Ø§ÛŒÛŒ occurredØŒ Ø®Ø±ÙˆØ¬ÛŒ Ø®Ø·Ø§ Ø±Ùˆ Ø¨ÙØ±Ø³ØªÛŒØ¯. Ù…Ø´Ú©Ù„ Ø§ØµÙ„ÛŒ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù…ÛŒâ€ŒØ®ÙˆØ§Ø¯ kernel source Ø±Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ù†Ù‡ Ú©Ù‡ Ø¯Ø± Kali Ù…Ù…Ú©Ù†Ù‡ Ø¨Ø§ version mismatch Ù…ÙˆØ§Ø¬Ù‡ Ø¨Ø´Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø¯Ø³ØªÛŒ Ø¯Ø±Ø§ÛŒÙˆØ±
cd snd_hda_macbookpro/
make
sudo make install

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„
sudo depmod -a
sudo modprobe snd_hda_macbookpro
cd: no such file or directory: snd_hda_macbookpro/
make -C /lib/modules/6.12.38+kali-amd64/build CFLAGS_MODULE="-DAPPLE_PINSENSE_FIXUP -DAPPLE_CODECS -DCONFIG_SND_HDA_RECONFIG=1 -Wno-unused-variable -Wno-unused-function" M=/home/buddha/snd_hda_macbookpro/build/hda modules
make[1]: Entering directory '/usr/src/linux-headers-6.12.38+kali-amd64'
/usr/src/linux-headers-6.12.38+kali-common/scripts/Makefile.build:41: /home/buddha/snd_hda_macbookpro/build/hda/Makefile: No such file or directory
make[3]: *** No rule to make target '/home/buddha/snd_hda_macbookpro/build/hda/Makefile'.  Stop.
make[2]: *** [/usr/src/linux-headers-6.12.38+kali-common/Makefile:1970: /home/buddha/snd_hda_macbookpro/build/hda] Error 2
make[1]: *** [/usr/src/linux-headers-6.12.38+kali-common/Makefile:236: __sub-make] Error 2
make[1]: Leaving directory '/usr/src/linux-headers-6.12.38+kali-amd64'
make: *** [Makefile:16: all] Error 2
make INSTALL_MOD_DIR=updates -C /lib/modules/6.12.38+kali-amd64/build M=/home/buddha/snd_hda_macbookpro/build/hda CONFIG_MODULE_SIG_ALL=n modules_install
make[1]: Entering directory '/usr/src/linux-headers-6.12.38+kali-amd64'
  DEPMOD  /lib/modules/6.12.38+kali-amd64
Warning: modules_install: missing 'System.map' file. Skipping depmod.
make[1]: Leaving directory '/usr/src/linux-headers-6.12.38+kali-amd64'
depmod -a
modprobe: FATAL: Module snd_hda_macbookpro not found in directory /lib/modules/6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ kernel version ÙØ¹Ù„ÛŒ
echo "Kernel version: $(uname -r)"

# Ø¨Ø±Ø±Ø³ÛŒ kernel headers Ù†ØµØ¨ Ø´Ø¯Ù‡
dpkg -l | grep linux-headers
Kernel version: 6.12.38+kali-amd64
ii  linux-headers-6.12.38+kali-amd64               6.12.38-1kali1                           amd64        Header files for Linux 6.12.38+kali-amd64
ii  linux-headers-6.12.38+kali-common              6.12.38-1kali1                           all          Common header files for Linux 6.12.38+kali
ii  linux-headers-amd64                            6.12.38-1kali1                           amd64        Header files for Linux amd64 configuration (meta-package)
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ø±ÙØªÙ† Ø¨Ù‡ Ø¯Ø§ÛŒØ±Ú©ØªÙˆØ±ÛŒ Ø¯Ø±Ø§ÛŒÙˆØ±
cd ~/snd_hda_macbookpro

# Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒÙ„<200c>Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯
ls -la

# Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø¯ÙˆÙ† Ø¯Ø§Ù†Ù„ÙˆØ¯ kernel
make KERNELRELEASE=$(uname -r)

# Ø§Ú¯Ø± Ø®Ø·Ø§ Ø¯Ø§Ø¯ØŒ Ø§Ø² Ø§ÛŒÙ† Ø±ÙˆØ´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
make -C /lib/modules/$(uname -r)/build M=$(pwd) modules
total 244
drwxrwxr-x  7 buddha buddha   4096 Aug 31 02:49 .
drwx------ 23 buddha buddha   4096 Aug 31 02:48 ..
drwxrwxr-x  7 buddha buddha   4096 Aug 31 02:46 .git
-rw-rw-r--  1 buddha buddha      7 Aug 31 02:46 .gitignore
-rw-rw-r--  1 buddha buddha  18004 Aug 31 02:46 LICENSE
-rw-rw-r--  1 buddha buddha    800 Aug 31 02:46 Makefile
-rw-rw-r--  1 buddha buddha   2434 Aug 31 02:46 NOTES.md
-rw-rw-r--  1 buddha buddha   2766 Aug 31 02:46 README.md
drwxrwxr-x  3 buddha buddha   4096 Aug 31 02:55 build
-rw-rw-r--  1 buddha buddha    399 Aug 31 02:49 dkms.conf
-rw-rw-r--  1 buddha buddha    725 Aug 31 02:46 dkms.sh
-rwxrwxr-x  1 buddha buddha   8510 Aug 31 02:46 install.cirrus.driver.sh
drwxrwxr-x  2 buddha buddha   4096 Aug 31 02:46 patch_cirrus
-rw-rw-r--  1 buddha buddha   6590 Aug 31 02:46 patch_patch_cirrus.c.diff
-rw-rw-r--  1 buddha buddha    447 Aug 31 02:46 patch_patch_cirrus_apple.h.diff
-rw-rw-r--  1 buddha buddha   1559 Aug 31 02:46 patch_patch_cs8409.c.diff
-rw-rw-r--  1 buddha buddha  16640 Aug 31 02:46 patch_patch_cs8409.h.diff
drwxrwxr-x  2 buddha buddha   4096 Aug 31 02:46 patches
drwxrwxr-x  2 buddha buddha   4096 Aug 31 02:46 tests
-rw-rw-r--  1 buddha buddha 119182 Aug 31 02:55 wget-log
make -C /lib/modules/6.12.38+kali-amd64/build CFLAGS_MODULE="-DAPPLE_PINSENSE_FIXUP -DAPPLE_CODECS -DCONFIG_SND_HDA_RECONFIG=1 -Wno-unused-variable -Wno-unused-function" M=/home/buddha/snd_hda_macbookpro/build/hda modules
make[1]: Entering directory '/usr/src/linux-headers-6.12.38+kali-amd64'
/usr/src/linux-headers-6.12.38+kali-common/scripts/Makefile.build:41: /home/buddha/snd_hda_macbookpro/build/hda/Makefile: No such file or directory
make[3]: *** No rule to make target '/home/buddha/snd_hda_macbookpro/build/hda/Makefile'.  Stop.
make[2]: *** [/usr/src/linux-headers-6.12.38+kali-common/Makefile:1970: /home/buddha/snd_hda_macbookpro/build/hda] Error 2
make[1]: *** [/usr/src/linux-headers-6.12.38+kali-common/Makefile:236: __sub-make] Error 2
make[1]: Leaving directory '/usr/src/linux-headers-6.12.38+kali-amd64'
make: *** [Makefile:16: all] Error 2
make: Entering directory '/usr/src/linux-headers-6.12.38+kali-amd64'
  MODPOST /home/buddha/snd_hda_macbookpro/Module.symvers
make: Leaving directory '/usr/src/linux-headers-6.12.38+kali-amd64'
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ù†ØµØ¨ Ù…Ø§Ú˜ÙˆÙ„ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø´Ø¯Ù‡
sudo cp snd-hda-codec-cs8409.ko /lib/modules/$(uname -r)/kernel/sound/pci/hda/
sudo depmod -a
sudo modprobe snd-hda-codec-cs8409
cp: cannot stat 'snd-hda-codec-cs8409.ko': No such file or directory
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ø­Ø°Ù Ø¯Ø§ÛŒØ±Ú©ØªÙˆØ±ÛŒ ÙØ¹Ù„ÛŒ Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù…Ø¬Ø¯Ø¯
cd ~
rm -rf snd_hda_macbookpro
git clone https://github.com/davidjo/snd_hda_macbookpro.git
cd snd_hda_macbookpro

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø¯Ù‡<200c>ØªØ±
chmod +x install.cirrus.driver.sh

# Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø§ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
sudo ./install.cirrus.driver.sh --no-download
Cloning into 'snd_hda_macbookpro'...
remote: Enumerating objects: 354, done.
remote: Counting objects: 100% (111/111), done.
remote: Compressing objects: 100% (32/32), done.
remote: Total 354 (delta 96), reused 79 (delta 79), pack-reused 243 (from 2)
Receiving objects: 100% (354/354), 8.31 MiB | 358.00 KiB/s, done.
Resolving deltas: 100% (221/221), done.
./install.cirrus.driver.sh: error - unrecognized option --no-download
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$

Ù…Ø´Ú©Ù„ Ø§Ø² Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡ Ù‡Ø³Øª. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø³ØªÛŒ Ø¯Ø±Ø§ÛŒÙˆØ± Ø±Ùˆ Ù†ØµØ¨ Ú©Ù†ÛŒÙ…:
Ù†ØµØ¨ Ø¯Ø³ØªÛŒ Ø¯Ø±Ø§ÛŒÙˆØ± CS8409 Ø¨Ø±Ø§ÛŒ MacBook:
1. Ø§Ø¨ØªØ¯Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ… Ú†Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒÛŒ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù†:
bash

cd ~/snd_hda_macbookpro
find . -name "*.c" -o -name "*.h" -o -name "*.diff" | head -10

2. Ø¨Ø±Ø±Ø³ÛŒ patchâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯:
bash

ls -la patch_cirrus/
ls -la patches/

3. Ø§Ø¹Ù…Ø§Ù„ patch Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø³ØªÛŒ:
bash

# Ø¨Ø±Ø±Ø³ÛŒ kernel source
echo "Kernel headers path: /lib/modules/$(uname -r)/build"

# Ú©Ù¾ÛŒ patch ÙØ§ÛŒÙ„â€ŒÙ‡Ø§
sudo cp patch_cirrus/* /usr/src/linux-headers-$(uname -r)/sound/pci/hda/ 2>/dev/null || echo "Copying patches..."

# Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ patch
cat patch_cirrus/patch_cs8409.c.diff | head -5

4. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø±ÙˆØ´ Ø³Ø§Ø¯Ù‡â€ŒØªØ± - Ø§Ø¹Ù…Ø§Ù„ Ù…Ø³ØªÙ‚ÛŒÙ… patch:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ ALSA
echo "options snd-hda-intel model=mbp16" | sudo tee /etc/modprobe.d/macbook-audio.conf
echo "options snd-hda-codec-cs8409 model=macbook-pro" | sudo tee -a /etc/modprobe.d/macbook-audio.conf

# Ø¢Ù¾Ø¯ÛŒØª initramfs
sudo update-initramfs -u

# Ø±ÛŒØ³ØªØ§Ø±Øª Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo modprobe -r snd_hda_intel snd_hda_codec_cs8409
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

5. ØªØ³Øª ØµØ¯Ø§:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409" | tail -5

# ØªØ³Øª ØµØ¯Ø§
timeout 3s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound"

6. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ø±ÙˆØ´ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² repository Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†
cd ~
git clone https://github.com/egorenar/snd-hda-codec-cs8409.git
cd snd-hda-codec-cs8409

# Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø³Ø§Ø¯Ù‡
make
sudo make install
sudo depmod -a

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe snd_hda_codec_cs8409

7. Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø¨Ø±Ø±Ø³ÛŒ logs
dmesg | grep -i "cs8409\|audio" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS!" || echo "âŒ Failed"

8. Ø§Ú¯Ø± Ù‡Ù…Ú†Ù†Ø§Ù† Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² kernel Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
bash

# Ù†ØµØ¨ kernel Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ±
sudo apt install linux-image-6.1.0-kali9-amd64

# Ø±ÛŒØ³ØªØ§Ø±Øª Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ kernel Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ± Ø§Ø² GRUB
sudo reboot

Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ step 4 Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯ (Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ) Ú†ÙˆÙ† Ø§ÛŒÙ† Ø³Ø§Ø¯Ù‡â€ŒØªØ±ÛŒÙ† Ø±Ø§Ù‡ Ø­Ù„ Ù‡Ø³Øª. Ø§Ú¯Ø± Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ then Ø¨Ø±ÛŒÙ… Ø³Ø±Ø§Øº Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø¯Ø³ØªÛŒ Ø¯Ø±Ø§ÛŒÙˆØ±
cd snd_hda_macbookpro/
make
sudo make install

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„
sudo depmod -a
sudo modprobe snd_hda_macbookpro
cd: no such file or directory: snd_hda_macbookpro/
make -C /lib/modules/6.12.38+kali-amd64/build CFLAGS_MODULE="-DAPPLE_PINSENSE_FIXUP -DAPPLE_CODECS -DCONFIG_SND_HDA_RECONFIG=1 -Wno-unused-variable -Wno-unused-function" M=/home/buddha/snd_hda_macbookpro/build/hda modules
make[1]: Entering directory '/usr/src/linux-headers-6.12.38+kali-amd64'
/usr/src/linux-headers-6.12.38+kali-common/scripts/Makefile.build:41: /home/buddha/snd_hda_macbookpro/build/hda/Makefile: No such file or directory
make[3]: *** No rule to make target '/home/buddha/snd_hda_macbookpro/build/hda/Makefile'.  Stop.
make[2]: *** [/usr/src/linux-headers-6.12.38+kali-common/Makefile:1970: /home/buddha/snd_hda_macbookpro/build/hda] Error 2
make[1]: *** [/usr/src/linux-headers-6.12.38+kali-common/Makefile:236: __sub-make] Error 2
make[1]: Leaving directory '/usr/src/linux-headers-6.12.38+kali-amd64'
make: *** [Makefile:16: all] Error 2
make INSTALL_MOD_DIR=updates -C /lib/modules/6.12.38+kali-amd64/build M=/home/buddha/snd_hda_macbookpro/build/hda CONFIG_MODULE_SIG_ALL=n modules_install
make[1]: Entering directory '/usr/src/linux-headers-6.12.38+kali-amd64'
  DEPMOD  /lib/modules/6.12.38+kali-amd64
Warning: modules_install: missing 'System.map' file. Skipping depmod.
make[1]: Leaving directory '/usr/src/linux-headers-6.12.38+kali-amd64'
depmod -a
modprobe: FATAL: Module snd_hda_macbookpro not found in directory /lib/modules/6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ kernel version ÙØ¹Ù„ÛŒ
echo "Kernel version: $(uname -r)"

# Ø¨Ø±Ø±Ø³ÛŒ kernel headers Ù†ØµØ¨ Ø´Ø¯Ù‡
dpkg -l | grep linux-headers
Kernel version: 6.12.38+kali-amd64
ii  linux-headers-6.12.38+kali-amd64               6.12.38-1kali1                           amd64        Header files for Linux 6.12.38+kali-amd64
ii  linux-headers-6.12.38+kali-common              6.12.38-1kali1                           all          Common header files for Linux 6.12.38+kali
ii  linux-headers-amd64                            6.12.38-1kali1                           amd64        Header files for Linux amd64 configuration (meta-package)
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ø±ÙØªÙ† Ø¨Ù‡ Ø¯Ø§ÛŒØ±Ú©ØªÙˆØ±ÛŒ Ø¯Ø±Ø§ÛŒÙˆØ±
cd ~/snd_hda_macbookpro

# Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒÙ„<200c>Ù‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯
ls -la

# Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø¯ÙˆÙ† Ø¯Ø§Ù†Ù„ÙˆØ¯ kernel
make KERNELRELEASE=$(uname -r)

# Ø§Ú¯Ø± Ø®Ø·Ø§ Ø¯Ø§Ø¯ØŒ Ø§Ø² Ø§ÛŒÙ† Ø±ÙˆØ´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯:
make -C /lib/modules/$(uname -r)/build M=$(pwd) modules
total 244
drwxrwxr-x  7 buddha buddha   4096 Aug 31 02:49 .
drwx------ 23 buddha buddha   4096 Aug 31 02:48 ..
drwxrwxr-x  7 buddha buddha   4096 Aug 31 02:46 .git
-rw-rw-r--  1 buddha buddha      7 Aug 31 02:46 .gitignore
-rw-rw-r--  1 buddha buddha  18004 Aug 31 02:46 LICENSE
-rw-rw-r--  1 buddha buddha    800 Aug 31 02:46 Makefile
-rw-rw-r--  1 buddha buddha   2434 Aug 31 02:46 NOTES.md
-rw-rw-r--  1 buddha buddha   2766 Aug 31 02:46 README.md
drwxrwxr-x  3 buddha buddha   4096 Aug 31 02:55 build
-rw-rw-r--  1 buddha buddha    399 Aug 31 02:49 dkms.conf
-rw-rw-r--  1 buddha buddha    725 Aug 31 02:46 dkms.sh
-rwxrwxr-x  1 buddha buddha   8510 Aug 31 02:46 install.cirrus.driver.sh
drwxrwxr-x  2 buddha buddha   4096 Aug 31 02:46 patch_cirrus
-rw-rw-r--  1 buddha buddha   6590 Aug 31 02:46 patch_patch_cirrus.c.diff
-rw-rw-r--  1 buddha buddha    447 Aug 31 02:46 patch_patch_cirrus_apple.h.diff
-rw-rw-r--  1 buddha buddha   1559 Aug 31 02:46 patch_patch_cs8409.c.diff
-rw-rw-r--  1 buddha buddha  16640 Aug 31 02:46 patch_patch_cs8409.h.diff
drwxrwxr-x  2 buddha buddha   4096 Aug 31 02:46 patches
drwxrwxr-x  2 buddha buddha   4096 Aug 31 02:46 tests
-rw-rw-r--  1 buddha buddha 119182 Aug 31 02:55 wget-log
make -C /lib/modules/6.12.38+kali-amd64/build CFLAGS_MODULE="-DAPPLE_PINSENSE_FIXUP -DAPPLE_CODECS -DCONFIG_SND_HDA_RECONFIG=1 -Wno-unused-variable -Wno-unused-function" M=/home/buddha/snd_hda_macbookpro/build/hda modules
make[1]: Entering directory '/usr/src/linux-headers-6.12.38+kali-amd64'
/usr/src/linux-headers-6.12.38+kali-common/scripts/Makefile.build:41: /home/buddha/snd_hda_macbookpro/build/hda/Makefile: No such file or directory
make[3]: *** No rule to make target '/home/buddha/snd_hda_macbookpro/build/hda/Makefile'.  Stop.
make[2]: *** [/usr/src/linux-headers-6.12.38+kali-common/Makefile:1970: /home/buddha/snd_hda_macbookpro/build/hda] Error 2
make[1]: *** [/usr/src/linux-headers-6.12.38+kali-common/Makefile:236: __sub-make] Error 2
make[1]: Leaving directory '/usr/src/linux-headers-6.12.38+kali-amd64'
make: *** [Makefile:16: all] Error 2
make: Entering directory '/usr/src/linux-headers-6.12.38+kali-amd64'
  MODPOST /home/buddha/snd_hda_macbookpro/Module.symvers
make: Leaving directory '/usr/src/linux-headers-6.12.38+kali-amd64'
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ù†ØµØ¨ Ù…Ø§Ú˜ÙˆÙ„ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø´Ø¯Ù‡
sudo cp snd-hda-codec-cs8409.ko /lib/modules/$(uname -r)/kernel/sound/pci/hda/
sudo depmod -a
sudo modprobe snd-hda-codec-cs8409
cp: cannot stat 'snd-hda-codec-cs8409.ko': No such file or directory
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ø­Ø°Ù Ø¯Ø§ÛŒØ±Ú©ØªÙˆØ±ÛŒ ÙØ¹Ù„ÛŒ Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù…Ø¬Ø¯Ø¯
cd ~
rm -rf snd_hda_macbookpro
git clone https://github.com/davidjo/snd_hda_macbookpro.git
cd snd_hda_macbookpro

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø¯Ù‡<200c>ØªØ±
chmod +x install.cirrus.driver.sh

# Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ø§ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
sudo ./install.cirrus.driver.sh --no-download
Cloning into 'snd_hda_macbookpro'...
remote: Enumerating objects: 354, done.
remote: Counting objects: 100% (111/111), done.
remote: Compressing objects: 100% (32/32), done.
remote: Total 354 (delta 96), reused 79 (delta 79), pack-reused 243 (from 2)
Receiving objects: 100% (354/354), 8.31 MiB | 358.00 KiB/s, done.
Resolving deltas: 100% (221/221), done.
./install.cirrus.driver.sh: error - unrecognized option --no-download
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ cd ~/snd_hda_macbookpro
find . -name "*.c" -o -name "*.h" -o -name "*.diff" | head -10
./patches/patch_patch_cs8409.h.main.diff
./patches/patch_patch_cirrus_apple.h.ubuntu.diff
./patches/patch_patch_cs8409.h.ubuntu.diff
./patches/patch_patch_cs8409.h.ubuntu.pre51547.diff
./patches/patch_patch_cs8409.h.main.pre519.diff
./patches/patch_patch_cirrus_apple.h.main.diff
./patch_patch_cs8409.c.diff
./patch_patch_cs8409.h.diff
./patch_patch_cirrus_apple.h.diff
./patch_cirrus/patch_cirrus_apple.h
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ ls -la patch_cirrus/
ls -la patches/
total 856
drwxrwxr-x 2 buddha buddha   4096 Aug 31 02:56 .
drwxrwxr-x 6 buddha buddha   4096 Aug 31 02:56 ..
-rw-rw-r-- 1 buddha buddha    265 Aug 31 02:56 Makefile
-rw-rw-r-- 1 buddha buddha 122790 Aug 31 02:56 patch_cirrus_apple.h
-rw-rw-r-- 1 buddha buddha 213049 Aug 31 02:56 patch_cirrus_boot84.h
-rw-rw-r-- 1 buddha buddha  11569 Aug 31 02:56 patch_cirrus_hda_generic_copy.h
-rw-rw-r-- 1 buddha buddha  75305 Aug 31 02:56 patch_cirrus_new84.h
-rw-rw-r-- 1 buddha buddha 285353 Aug 31 02:56 patch_cirrus_real84.h
-rw-rw-r-- 1 buddha buddha  87744 Aug 31 02:56 patch_cirrus_real84_i2c.h
-rw-rw-r-- 1 buddha buddha  38502 Aug 31 02:56 patch_cs8409.c
-rw-rw-r-- 1 buddha buddha  16360 Aug 31 02:56 patch_cs8409.h
total 96
drwxrwxr-x 2 buddha buddha  4096 Aug 31 02:56 .
drwxrwxr-x 6 buddha buddha  4096 Aug 31 02:56 ..
-rw-rw-r-- 1 buddha buddha   447 Aug 31 02:56 patch_patch_cirrus_apple.h.main.diff
-rw-rw-r-- 1 buddha buddha   447 Aug 31 02:56 patch_patch_cirrus_apple.h.ubuntu.diff
-rw-rw-r-- 1 buddha buddha 16589 Aug 31 02:56 patch_patch_cs8409.h.main.diff
-rw-rw-r-- 1 buddha buddha 16667 Aug 31 02:56 patch_patch_cs8409.h.main.pre519.diff
-rw-rw-r-- 1 buddha buddha 16589 Aug 31 02:56 patch_patch_cs8409.h.ubuntu.diff
-rw-rw-r-- 1 buddha buddha 16667 Aug 31 02:56 patch_patch_cs8409.h.ubuntu.pre51547.diff
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ kernel source
echo "Kernel headers path: /lib/modules/$(uname -r)/build"

# Ú©Ù¾ÛŒ patch ÙØ§ÛŒÙ„<200c>Ù‡Ø§
sudo cp patch_cirrus/* /usr/src/linux-headers-$(uname -r)/sound/pci/hda/ 2>/dev/null || echo "Copying patches..."

# Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒÙ„<200c>Ù‡Ø§ÛŒ patch
cat patch_cirrus/patch_cs8409.c.diff | head -5
Kernel headers path: /lib/modules/6.12.38+kali-amd64/build
Copying patches...
cat: patch_cirrus/patch_cs8409.c.diff: No such file or directory
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ ALSA
echo "options snd-hda-intel model=mbp16" | sudo tee /etc/modprobe.d/macbook-audio.conf
echo "options snd-hda-codec-cs8409 model=macbook-pro" | sudo tee -a /etc/modprobe.d/macbook-audio.conf

# Ø¢Ù¾Ø¯ÛŒØª initramfs
sudo update-initramfs -u

# Ø±ÛŒØ³ØªØ§Ø±Øª Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo modprobe -r snd_hda_intel snd_hda_codec_cs8409
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409
options snd-hda-intel model=mbp16
options snd-hda-codec-cs8409 model=macbook-pro
update-initramfs: Generating /boot/initrd.img-6.12.38+kali-amd64
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409" | tail -5

# ØªØ³Øª ØµØ¯Ø§
timeout 3s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound"
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd_hda_macbookpro]
â””â”€$

Ø¹Ø§Ù„ÛŒ! Ø­Ø§Ù„Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯Ù‡. Ø¨ÛŒØ§ÛŒÛŒØ¯ ÙˆØ¶Ø¹ÛŒØª Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409" | tail -5

# ØªØ³Øª ØµØ¯Ø§
timeout 3s speaker-test -c 2 -t wav 2>/dev/null && echo "âœ… Sound works!" || echo "âŒ No sound"

Ø§Ú¯Ø± ØµØ¯Ø§ Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ø¨ÛŒØ§ÛŒÛŒØ¯ ÛŒÚ© Ø±ÛŒØ³ØªØ§Ø±Øª Ø§Ù†Ø¬Ø§Ù… Ø¨Ø¯ÛŒÙ…:
bash

# Ø±ÛŒØ³ØªØ§Ø±Øª Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ú©Ø§Ù…Ù„ ØªØºÛŒÛŒØ±Ø§Øª
sudo reboot

Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
dmesg | grep -i "cs8409\|audio" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS! Audio is working!" || echo "âŒ Audio still not working"

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² repository Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² repository Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†
cd ~
git clone https://github.com/egorenar/snd-hda-codec-cs8409.git
cd snd-hda-codec-cs8409

# Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ùˆ Ù†ØµØ¨
make
sudo make install
sudo depmod -a

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe snd_hda_codec_cs8409

# ØªØ³Øª Ù…Ø¬Ø¯Ø¯
timeout 3s speaker-test -c 2 -t wav && echo "âœ… Sound works!" || echo "âŒ No sound"

Ù„Ø·ÙØ§Ù‹ Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ ÙˆØ¶Ø¹ÛŒØª Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯. ØªÙ†Ø¸ÛŒÙ…Ø§Øª model=mbp16 Ùˆ model=macbook-pro Ú©Ù‡ Ø§Ø¹Ù…Ø§Ù„ Ú©Ø±Ø¯ÛŒÙ…ØŒ Ø¯Ø± Ø¨Ø³ÛŒØ§Ø±ÛŒ Ø§Ø² Ù…ÙˆØ§Ø±Ø¯ Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
dmesg | grep -i "cs8409\|audio" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS! Audio is working!" || echo "âŒ Audio still not working"
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
dmesg | grep -i "cs8409\|audio" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ
timeout 5s speaker-test -c 2 -t wav
[    7.475906] snd_hda_intel 0000:00:1f.3: bound 0000:00:02.0 (ops i915_audio_component_bind_ops [i915])
[    7.527086] snd_hda_codec_cs8409: unknown parameter 'model' ignored
[    7.527091] snd_hda_codec_cs8409: unknown parameter 'model' ignored
[    7.527406] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
[    7.527411] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
[    7.527414] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
[    7.527417] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
[    7.527419] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
[    7.527421] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
[    7.527423] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c
**** List of PLAYBACK Hardware Devices ****

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Periods = 4
was set period_size = 12000
was set buffer_size = 48000
 0 - Front Left
 1 - Front Right
Time per period = 2.033097
 0 - Front Left
 1 - Front Right
Write error: -4,Interrupted system call
xrun_recovery failed: -4,Interrupted system call
Transfer failed: Interrupted system call
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$

Ù…Ø´Ú©Ù„ Ù‡Ù…Ú†Ù†Ø§Ù† Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø±Ù‡. Ø®Ø·Ø§ÛŒ snd_hda_codec_cs8409: unknown parameter 'model' ignored Ù†Ø´ÙˆÙ† Ù…ÛŒâ€ŒØ¯Ù‡ Ú©Ù‡ Ù¾Ø§Ø±Ø§Ù…ØªØ± model Ø¨Ø±Ø§ÛŒ Ù…Ø§Ú˜ÙˆÙ„ snd_hda_codec_cs8409 Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§ÛŒÙ† Ø±Ùˆ Ø§ØµÙ„Ø§Ø­ Ú©Ù†ÛŒÙ…:
Ø§ØµÙ„Ø§Ø­ ØªÙ†Ø¸ÛŒÙ…Ø§Øª:
1. Ø­Ø°Ù ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù†Ø§Ø¯Ø±Ø³Øª:
bash

# Ø­Ø°Ù Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ù†Ø§Ø¯Ø±Ø³Øª
sudo rm /etc/modprobe.d/macbook-audio.conf

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØµØ­ÛŒØ­ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ snd-hda-intel
echo "options snd-hda-intel model=mbp16" | sudo tee /etc/modprobe.d/macbook-audio.conf
echo "options snd-hda-intel position_fix=1" | sudo tee -a /etc/modprobe.d/macbook-audio.conf
echo "options snd-hda-intel power_save=0" | sudo tee -a /etc/modprobe.d/macbook-audio.conf

# Ø¢Ù¾Ø¯ÛŒØª initramfs
sudo update-initramfs -u

2. Ø±ÛŒÙ„ÙˆØ¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§:
bash

# ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo modprobe -r snd_hda_codec_cs8409 snd_hda_intel
sleep 2
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

sleep 3

3. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª:
bash

# Ø¨Ø±Ø±Ø³ÛŒ logs
dmesg | grep -i "cs8409\|audio" | tail -10

# Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
aplay -l

# ØªØ³Øª ØµØ¯Ø§
timeout 5s speaker-test -c 2 -t wav && echo "âœ… Sound works!" || echo "âŒ No sound"

4. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù ØªØ³Øª Ú©Ù†ÛŒÙ…:
bash

# ØªØ³Øª Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
for model in "mbp16" "mbp15" "mbp14" "auto" "generic"; do
    echo "Testing model: $model"
    echo "options snd-hda-intel model=$model" | sudo tee /etc/modprobe.d/test.conf
    sudo update-initramfs -u
    sudo modprobe -r snd_hda_intel
    sudo modprobe snd_hda_intel
    sleep 2
    if timeout 3s speaker-test -c 2 -t wav 2>/dev/null; then
        echo "âœ… Success with model: $model"
        break
    else
        echo "âŒ Failed with model: $model"
    fi
done

5. Ø±Ø§Ù‡ Ø­Ù„ Ù†Ù‡Ø§ÛŒÛŒ: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù¾Ú† Ø¯Ø³ØªÛŒ

Ø§Ú¯Ø± Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù… Ø§Ø² Ù…Ø¯Ù„â€ŒÙ‡Ø§ Ú©Ø§Ø± Ù†Ú©Ø±Ø¯ØŒ Ù…Ù…Ú©Ù†Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾Ú† kernel Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯. Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§Ø² ÛŒÚ© Ø±ÙˆØ´ Ø³Ø§Ø¯Ù‡â€ŒØªØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ù†ØµØ¨ ALSA tools
sudo apt install alsa-tools

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² hdajackretask Ø¨Ø±Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ… Ø¯Ø³ØªÛŒ
sudo hdajackretask

Ø¯Ø± Ø§Ø¨Ø²Ø§Ø± hdajackretask:

    Ø§Ù†ØªØ®Ø§Ø¨ codec: CS8409
    2.å°è¯•ä¸åŒçš„ pin configurations

    Ø§Ø¹Ù…Ø§Ù„ changes Ùˆ ØªØ³Øª

6. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´Øª:
bash

# Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø®Ø·Ø§
echo "=== Audio Debug Info ===" > audio_final_debug.log
dmesg | grep -i "cs8409\|audio\|snd" >> audio_final_debug.log
aplay -l >> audio_final_debug.log 2>&1
cat /proc/asound/card0/codec#0 >> audio_final_debug.log 2>&1

echo "Debug info saved to audio_final_debug.log"

Ù…ØªØ£Ø³ÙØ§Ù†Ù‡ Ù…Ø´Ú©Ù„ CS8409 Ø±ÙˆÛŒ Ø¨Ø±Ø®ÛŒ MacBookâ€ŒÙ‡Ø§ ÛŒÚ© Ù…Ø´Ú©Ù„ Ø´Ù†Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø§Ø³Øª Ùˆå¯èƒ½éœ€è¦ Ù¾Ú† Ø®Ø§Øµ kernel ÛŒØ§ Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø¢Ù¾Ø¯ÛŒØª Ø¯Ø±Ø§ÛŒÙˆØ±Ù‡Ø§ Ø¯Ø§Ø±Ø¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~]
â””â”€$ # Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² repository Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†
cd ~
git clone https://github.com/egorenar/snd-hda-codec-cs8409.git
cd snd-hda-codec-cs8409

# Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ùˆ Ù†ØµØ¨
make
sudo make install
sudo depmod -a

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„
sudo modprobe -r snd_hda_codec_cs8409
sudo modprobe snd_hda_codec_cs8409

# ØªØ³Øª Ù…Ø¬Ø¯Ø¯
timeout 3s speaker-test -c 2 -t wav                                       
Cloning into 'snd-hda-codec-cs8409'...
remote: Enumerating objects: 75, done.
remote: Counting objects: 100% (75/75), done.
remote: Compressing objects: 100% (42/42), done.
remote: Total 75 (delta 54), reused 54 (delta 33), pack-reused 0 (from 0)
Receiving objects: 100% (75/75), 181.22 KiB | 107.00 KiB/s, done.
Resolving deltas: 100% (54/54), done.
make -C /lib/modules/6.12.38+kali-amd64/build CFLAGS_MODULE="-DAPPLE_PINSENSE_FIXUP -DAPPLE_CODECS -DCONFIG_SND_HDA_RECONFIG=1 -Wno-unused-variable -Wno-unused-function" M=/home/buddha/snd-hda-codec-cs8409 modules
make[1]: Entering directory '/usr/src/linux-headers-6.12.38+kali-amd64'
  CC [M]  /home/buddha/snd-hda-codec-cs8409/patch_cs8409.o
In file included from /home/buddha/snd-hda-codec-cs8409/patch_cs8409.c:1488:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h: In function â€˜debug_show_configsâ€™:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:630:76: warning: suggest braces around empty body in an â€˜ifâ€™ statement [-Wempty-body]
  630 |                     spec->multi_io[0].dac, spec->multi_io[1].dac);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:641:52: warning: suggest braces around empty body in an â€˜ifâ€™ statement [-Wempty-body]
  641 |                       spec->multiout.hp_out_nid[3]);
      |                                                    ^
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:651:55: warning: suggest braces around empty body in an â€˜ifâ€™ statement [-Wempty-body]
  651 |                       spec->multiout.extra_out_nid[3]);
      |                                                       ^
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h: In function â€˜cs_8409_playback_pcm_prepareâ€™:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:723:81: warning: suggest braces around empty body in an â€˜ifâ€™ statement [-Wempty-body]
  723 |  mycodec_dbg(codec, "cs_8409_playback_pcm_prepare err %d\n", err);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h: At top level:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:883:6: warning: no previous prototype for â€˜cs_8409_dump_callbackâ€™ [-Wmissing-prototypes]
  883 | void cs_8409_dump_callback(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:904:1: warning: no previous prototype for â€˜cs_8409_hda_jack_detect_enable_callbackâ€™ [-Wmissing-prototypes]
  904 | cs_8409_hda_jack_detect_enable_callback(struct hda_codec *codec, hda_nid_t nid, int dev_id, int tag,
      | ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h: In function â€˜cs_8409_dump_auto_configâ€™:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1098:132: warning: suggest braces around empty body in an â€˜ifâ€™ statement [-Wempty-body]
 1098 | out is  hp_out_nid 0x%02x\n", spec->gen.multiout.hp_out_nid[itm]);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1102:135: warning: suggest braces around empty body in an â€˜ifâ€™ statement [-Wempty-body]
 1102 |  is xtr_out_nid 0x%02x\n", spec->gen.multiout.extra_out_nid[itm]);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h: In function â€˜cs_8409_apple_boot_initâ€™:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1191:15: warning: assignment discards â€˜constâ€™ qualifier from pointer target type [-Wdiscarded-qualifiers]
 1191 |         hinfo = spec->gen.stream_analog_playback;
      |               ^
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1197:58: warning: suggest braces around empty body in an â€˜elseâ€™ statement [-Wempty-body]
 1197 |                 mycodec_dbg(codec, "hinfo stream NULL\n");
      |                                                          ^
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1220:108: warning: suggest braces around empty body in an â€˜elseâ€™ statement [-Wempty-body]
 1220 | g(codec, "cs_8409_apple_boot_init info stream %d NULL\n", stream);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1300:112: warning: suggest braces around empty body in an â€˜elseâ€™ statement [-Wempty-body]
 1300 | dec, "cs_8409_apple_boot_init info pcm stream %d NULL\n", stream);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h: At top level:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1456:5: warning: no previous prototype for â€˜cs_8409_apple_build_pcmsâ€™ [-Wmissing-prototypes]
 1456 | int cs_8409_apple_build_pcms(struct hda_codec *codec)
      |     ^~~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1542:6: warning: no previous prototype for â€˜cs_8409_cs42l83_mark_jackâ€™ [-Wmissing-prototypes]
 1542 | void cs_8409_cs42l83_mark_jack(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1583:6: warning: no previous prototype for â€˜cs_8409_cs42l83_jack_report_syncâ€™ [-Wmissing-prototypes]
 1583 | void cs_8409_cs42l83_jack_report_sync(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1591:6: warning: no previous prototype for â€˜cs_8409_cs42l83_jack_report_hp_updateâ€™ [-Wmissing-prototypes]
 1591 | void cs_8409_cs42l83_jack_report_hp_update(struct hda_codec *codec, int plugin)
      |      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1604:6: warning: no previous prototype for â€˜cs_8409_cs42l83_jack_unsol_eventâ€™ [-Wmissing-prototypes]
 1604 | void cs_8409_cs42l83_jack_unsol_event(struct hda_codec *codec, unsigned int res)
      |      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:1701:6: warning: no previous prototype for â€˜cs_8409_apple_freeâ€™ [-Wmissing-prototypes]
 1701 | void cs_8409_apple_free(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~
In file included from /home/buddha/snd-hda-codec-cs8409/patch_cirrus_apple.h:3023:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h: In function â€˜hda_set_node_power_state_dbgâ€™:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:53:107: warning: suggest braces around empty body in an â€˜ifâ€™ statement [-Wempty-body]
   53 | hda_set_node_power_state  nid 0x%02x power %d\n",nid,power_state);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:80:89: warning: suggest braces around empty body in an â€˜ifâ€™ statement [-Wempty-body]
   80 | odec_info(codec, "hda_set_node_power_state end power %d\n",state);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h: In function â€˜cs_8409_vendor_coef_set_maskâ€™:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:170:175: warning: suggest braces around empty body in an â€˜elseâ€™ statement [-Wempty-body]
  170 | 4x 0x%04x 0x%04x) %d",idx,coef,mask_coef,retval,coef,mask,srcidx);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:174:167: warning: suggest braces around empty body in an â€˜elseâ€™ statement [-Wempty-body]
  174 | 4x 0x%04x 0x%04x) %d",idx,coef,mask_coef,retval,coef,mask,srcidx);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h: At top level:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:457:6: warning: no previous prototype for â€˜snd_hda_coef_itemâ€™ [-Wmissing-prototypes]
  457 | void snd_hda_coef_item(struct hda_codec *codec, u16 write_flag, hda_nid_t nid, u32 idx, u32 param, u32 retdata, int srcidx)
      |      ^~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:488:5: warning: no previous prototype for â€˜snd_hda_coef_item_checkâ€™ [-Wmissing-prototypes]
  488 | int snd_hda_coef_item_check(struct hda_codec *codec, u16 write_flag, hda_nid_t nid, u32 idx, u32 param, u32 retdata, int srcidx)
      |     ^~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:512:6: warning: no previous prototype for â€˜snd_hda_coef_item_maskedâ€™ [-Wmissing-prototypes]
  512 | void snd_hda_coef_item_masked(struct hda_codec *codec, u16 write_flag, hda_nid_t nid, u32 idx, u32 param, u32 mask, u32 retdata, u32 srcval, int srcidx)
      |      ^~~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:531:6: warning: no previous prototype for â€˜snd_hda_coef_sequenceâ€™ [-Wmissing-prototypes]
  531 | void snd_hda_coef_sequence(struct hda_codec *codec, const struct hda_coef *seq, char *prtstr)
      |      ^~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:556:6: warning: no previous prototype for â€˜snd_hda_double_resetâ€™ [-Wmissing-prototypes]
  556 | void snd_hda_double_reset(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h: In function â€˜cs_8409_dump_stream_formatâ€™:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:684:109: warning: suggest braces around empty body in an â€˜elseâ€™ statement [-Wempty-body]
  684 | _dump_stream_format: NID=0x%x, codec cached values: NULL\n", nid);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h: In function â€˜cs_8409_really_update_stream_formatâ€™:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:850:165: warning: suggest braces around empty body in an â€˜elseâ€™ statement [-Wempty-body]
  850 | 0x%08x fmt 0x%08x\n", stream_tag_sv, channel_id_sv, format_id_sv);
      |                                                                  ^

/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h: At top level:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:1119:6: warning: no previous prototype for â€˜cs_8409_play_setupâ€™ [-Wmissing-prototypes]
 1119 | void cs_8409_play_setup(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:1155:6: warning: no previous prototype for â€˜cs_8409_play_cleanupâ€™ [-Wmissing-prototypes]
 1155 | void cs_8409_play_cleanup(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:1191:6: warning: no previous prototype for â€˜cs_8409_capture_setupâ€™ [-Wmissing-prototypes]
 1191 | void cs_8409_capture_setup(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:1209:6: warning: no previous prototype for â€˜cs_8409_capture_cleanupâ€™ [-Wmissing-prototypes]
 1209 | void cs_8409_capture_cleanup(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:1339:6: warning: no previous prototype for â€˜cs_8409_headplay_setupâ€™ [-Wmissing-prototypes]
 1339 | void cs_8409_headplay_setup(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:1379:6: warning: no previous prototype for â€˜cs_8409_headplay_cleanupâ€™ [-Wmissing-prototypes]
 1379 | void cs_8409_headplay_cleanup(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:1423:6: warning: no previous prototype for â€˜cs_8409_headcapture_setupâ€™ [-Wmissing-prototypes]
 1423 | void cs_8409_headcapture_setup(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:1449:6: warning: no previous prototype for â€˜cs_8409_headcapture_cleanupâ€™ [-Wmissing-prototypes]
 1449 | void cs_8409_headcapture_cleanup(struct hda_codec *codec)
      |      ^~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h: In function â€˜cs_8409_capture_pcm_hookâ€™:
/home/buddha/snd-hda-codec-cs8409/patch_cirrus_new84.h:1767:108: warning: suggest braces around empty body in an â€˜elseâ€™ statement [-Wempty-body]
 1767 | l: command cs_8409_capture_pcm_hook HOOK init  - CODEC NOT NULL");
      |                                                                  ^

  CC [M]  /home/buddha/snd-hda-codec-cs8409/patch_cs8409-tables.o
  LD [M]  /home/buddha/snd-hda-codec-cs8409/snd-hda-codec-cs8409.o
  MODPOST /home/buddha/snd-hda-codec-cs8409/Module.symvers
  CC [M]  /home/buddha/snd-hda-codec-cs8409/snd-hda-codec-cs8409.mod.o
  CC [M]  /home/buddha/snd-hda-codec-cs8409/.module-common.o
  LD [M]  /home/buddha/snd-hda-codec-cs8409/snd-hda-codec-cs8409.ko
  BTF [M] /home/buddha/snd-hda-codec-cs8409/snd-hda-codec-cs8409.ko
make[1]: Leaving directory '/usr/src/linux-headers-6.12.38+kali-amd64'
[sudo] password for buddha: 
mkdir -p /lib/modules/6.12.38+kali-amd64/updates/
cp snd-hda-codec-cs8409.ko /lib/modules/6.12.38+kali-amd64/updates/
depmod -a
modprobe: FATAL: Module snd_hda_codec_cs8409 is in use.

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Periods = 4
was set period_size = 12000
was set buffer_size = 48000
 0 - Front Left
 1 - Front Right
Time per period = 2.040238
 0 - Front Left
Write error: -4,Interrupted system call
xrun_recovery failed: -4,Interrupted system call
Transfer failed: Interrupted system call
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$

Ø¹Ø§Ù„ÛŒ! Ø¯Ø±Ø§ÛŒÙˆØ± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ùˆ Ù†ØµØ¨ Ø´Ø¯. Ø­Ø§Ù„Ø§ Ø¨ÛŒØ§ÛŒÛŒØ¯ Ù…Ø§Ú˜ÙˆÙ„ Ø±Ùˆ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ reload Ú©Ù†ÛŒÙ… Ùˆ ØªØ³Øª Ú©Ù†ÛŒÙ…:
bash

# ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo rmmod -f snd_hda_codec_cs8409
sudo rmmod -f snd_hda_intel

sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

sleep 3

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409\|audio" | tail -10

# ØªØ³Øª ØµØ¯Ø§
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS! Audio is working!" || echo "âŒ Still not working"

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø®Ø§Øµ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ù‡ÛŒÙ†Ù‡
echo "options snd-hda-intel model=mbp16" | sudo tee /etc/modprobe.d/macbook-final.conf
echo "options snd-hda-intel position_fix=1" | sudo tee -a /etc/modprobe.d/macbook-final.conf
echo "options snd-hda-intel power_save=0" | sudo tee -a /etc/modprobe.d/macbook-final.conf

sudo update-initramfs -u

# Ø±ÛŒØ³ØªØ§Ø±Øª Ù†Ù‡Ø§ÛŒÛŒ
sudo reboot

Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
dmesg | grep -i "cs8409" | tail -10
aplay -l

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS! Audio is working!" || {
    echo "âŒ Still not working"
    echo "Trying alternative approach..."
    
    # ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ…
    if aplay -l | grep -q "Generic Analog"; then
        timeout 5s speaker-test -D hw:0,0 -c 2 -t wav && echo "âœ… Direct device works!" || echo "âŒ Direct device failed"
    fi
}

Ø§Ú¯Ø± Ù‡Ù…Ú†Ù†Ø§Ù† Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ù…Ù…Ú©Ù†Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ kernel Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ± Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯ ÛŒØ§ Ø§ÛŒÙ†Ú©Ù‡ Ù…Ø´Ú©Ù„ Ø§Ø² Ø³Ø®Øªâ€ŒØ§ÙØ²Ø§Ø± Ø¨Ø§Ø´Ø¯.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod -f snd_hda_codec_cs8409
sudo rmmod -f snd_hda_intel

sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

sleep 3

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409\|audio" | tail -10

# ØªØ³Øª ØµØ¯Ø§
timeout 5s speaker-test -c 2 -t wav                                       
[  252.846176] snd_hda_codec_cs8409: unknown parameter 'model' ignored
[  252.847719] snd_hda_intel: Primary patch_cs8409
[  252.847722] snd_hda_intel: Primary patch_cs8409 NOT FOUND trying APPLE
[  252.848350] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
[  252.848356] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
[  252.848359] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
[  252.848362] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
[  252.848364] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
[  252.848367] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
[  252.848369] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Periods = 4
ALSA lib pcm_pulse.c:758:(pulse_prepare) PulseAudio: Unable to create stream: No such entity

Unable to set hw params for playback: Input/output error
Setting of hwparams failed: Input/output error
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$

Ù…Ø´Ú©Ù„ Ø¬Ø¯ÛŒØ¯ÛŒ Ù¾ÛŒØ´ Ø§ÙˆÙ…Ø¯Ù‡! Ø®Ø·Ø§ÛŒ PulseAudio: Unable to create stream: No such entity Ù†Ø´ÙˆÙ† Ù…ÛŒâ€ŒØ¯Ù‡ Ú©Ù‡ PulseAudio Ù†Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ stream Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†Ù‡. Ø§ÛŒÙ† Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ ÙˆÙ‚ØªÛŒ Ø§ØªÙØ§Ù‚ Ù…ÛŒâ€ŒØ§ÙØªÙ‡ Ú©Ù‡ Ø¯Ø³ØªÚ¯Ø§Ù‡ ØµÙˆØªÛŒ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ ØªÙˆØ³Ø· PulseAudio Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù†Ø´Ù‡.

Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ùˆ Ø­Ù„ Ú©Ù†ÛŒÙ…:
Ø±Ø§Ù‡ Ø­Ù„ Ø¨Ø±Ø§ÛŒ Ù…Ø´Ú©Ù„ PulseAudio:
1. Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§:
bash

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ PulseAudio/pipewire
systemctl --user restart pipewire pipewire-pulse wireplumber

# ÛŒØ§ Ø§Ú¯Ø± Ø§Ø² PulseAudio Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯
pulseaudio --kill
pulseaudio --start

sleep 2

2. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª PulseAudio:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
systemctl --user status pipewire pipewire-pulse --no-pager | head -10

# Ø¨Ø±Ø±Ø³ÛŒ sinks Ù…ÙˆØ¬ÙˆØ¯
pactl list short sinks

3. Ø§Ú¯Ø± sinkÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ù‡ØŒ manually ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒÙ…:
bash

# Ø¨Ø±Ø±Ø³ÛŒ devices ALSA
aplay -l

# Ø§Ú¯Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡ ALSA ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù‡ Ø§Ù…Ø§ PulseAudio Ù†Ù…ÛŒâ€ŒØ¨ÛŒÙ†Ù‡ØŒ manually Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ…
if [ -z "$(pactl list short sinks)" ]; then
    echo "No PulseAudio sinks found, creating manually..."
    pactl load-module module-alsa-sink device=hw:0,0
fi

4. ØªÙ†Ø¸ÛŒÙ… default sink:
bash

# ØªÙ†Ø¸ÛŒÙ… default sink
pactl set-default-sink alsa_output.pci-0000_00_1f.3.analog-stereo 2>/dev/null || \
pactl set-default-sink $(pactl list short sinks | awk '{print $2}' | head -1)

# Ø¨Ø±Ø±Ø³ÛŒ default sink
pactl get-default-sink

5. ØªØ³Øª Ø¨Ø§ ALSA Ù…Ø³ØªÙ‚ÛŒÙ… (Ø¨Ø¯ÙˆÙ† PulseAudio):
bash

# ØªØ³Øª Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ø§ ALSA
timeout 5s speaker-test -D hw:0,0 -c 2 -t wav

# ÛŒØ§ ØªØ³Øª Ø¨Ø§ aplay
echo "TEST" | aplay -D hw:0,0 -f cd

6. Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ALSA Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
bash

# Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ALSA
sudo tee /etc/asound.conf > /dev/null <<'EOF'
defaults.pcm.card 0
defaults.ctl.card 0
pcm.!default {
    type hw
    card 0
    device 0
}
ctl.!default {
    type hw
    card 0
}
EOF

# ØªØ³Øª Ù…Ø¬Ø¯Ø¯
timeout 5s speaker-test -c 2 -t wav

7. Ø¨Ø±Ø±Ø³ÛŒ permissionâ€ŒÙ‡Ø§:
bash

# Ø¨Ø±Ø±Ø³ÛŒ permission Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§
ls -la /dev/snd/

# Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ú¯Ø±ÙˆÙ‡ audio
sudo usermod -a -G audio $(whoami)

# Ø±ÛŒØ³ØªØ§Ø±Øª Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ ØªØºÛŒÛŒØ±Ø§Øª
sudo reboot

8. Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ:
bash

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409" | tail -5
aplay -l
pactl list short sinks

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS!" || {
    echo "âŒ Still not working"
    echo "Trying direct ALSA device..."
    timeout 5s speaker-test -D hw:0,0 -c 2 -t wav
}

Ù…Ø´Ú©Ù„ Ø§ØµÙ„ÛŒ Ø§Ù„Ø§Ù† Ø§Ø² PulseAudio/pipewire Ù‡Ø³Øª Ù†Ù‡ Ø§Ø² Ø¯Ø±Ø§ÛŒÙˆØ± ØµØ¯Ø§. Ø¯Ø±Ø§ÛŒÙˆØ± CS8409 Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ load Ø´Ø¯Ù‡ Ùˆ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø±Ùˆ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ú©Ø±Ø¯Ù‡ØŒ Ø§Ù…Ø§ Ø³Ø±ÙˆÛŒØ³ ØµØ¯Ø§ Ù†Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø§Ø²Ø´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # Ø±Ø§Ù‡<200c>Ø§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ PulseAudio/pipewire
systemctl --user restart pipewire pipewire-pulse wireplumber

# ÛŒØ§ Ø§Ú¯Ø± Ø§Ø² PulseAudio Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒ<200c>Ú©Ù†ÛŒØ¯
pulseaudio --kill
pulseaudio --start

sleep 2
E: [pulseaudio] main.c: Failed to kill daemon: No such file or directory
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
systemctl --user status pipewire pipewire-pulse --no-pager | head -10

# Ø¨Ø±Ø±Ø³ÛŒ sinks Ù…ÙˆØ¬ÙˆØ¯
pactl list short sinks
â— pipewire.service - PipeWire Multimedia Service
     Loaded: loaded (/usr/lib/systemd/user/pipewire.service; enabled; preset: enabled)
    Drop-In: /usr/lib/systemd/user/pipewire.service.d
             â””â”€kali.conf
     Active: active (running) since Sun 2025-08-31 03:04:07 +0330; 19s ago
 Invocation: 49a5236a03e64f1987c26b4dd7efa53b
TriggeredBy: â— pipewire.socket
   Main PID: 4720 (pipewire)
      Tasks: 3 (limit: 18706)
     Memory: 4.8M (peak: 5.1M)
58      alsa_output.pci-0000_00_1f.3.analog-stereo      PipeWire        s32le 2ch 44100Hz  SUSPENDED
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$

Ø¹Ø§Ù„ÛŒ! Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ… Ú©Ù‡ PipeWire ÙØ¹Ø§Ù„ Ù‡Ø³Øª Ùˆ ÛŒÚ© sink Ù‡Ù… ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù‡: alsa_output.pci-0000_00_1f.3.analog-stereo

Ø¨ÛŒØ§ÛŒÛŒØ¯ ØªØ³Øª Ú©Ù†ÛŒÙ…:
bash

# ØªÙ†Ø¸ÛŒÙ… default sink
pactl set-default-sink alsa_output.pci-0000_00_1f.3.analog-stereo

# Ø¨Ø±Ø±Ø³ÛŒ default sink
pactl get-default-sink

# ØªØ³Øª ØµØ¯Ø§
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS! Audio is working!" || {
    echo "âŒ Still not working with PulseAudio"
    echo "Trying direct ALSA device..."
    timeout 5s speaker-test -D hw:0,0 -c 2 -t wav
}

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ volume Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
bash

# Ø¨Ø±Ø±Ø³ÛŒ volume
pactl list sinks | grep -E "(Volume|Mute)" | head -5

# Ø§ÙØ²Ø§ÛŒØ´ volume
pactl set-sink-volume @DEFAULT_SINK@ 100%
pactl set-sink-mute @DEFAULT_SINK@ 0

# ØªØ³Øª Ù…Ø¬Ø¯Ø¯
timeout 5s speaker-test -c 2 -t wav

Ø§Ú¯Ø± direct ALSA Ú©Ø§Ø± Ú©Ø±Ø¯ Ø§Ù…Ø§ PulseAudio Ù†Ù‡ØŒ Ù…Ø´Ú©Ù„ Ø§Ø² configuration Ù‡Ø³Øª:
bash

# Ø¨Ø±Ø±Ø³ÛŒ configuration PulseAudio
pactl info

# Ø§Ú¯Ø± Ù„Ø§Ø²Ù… Ø¨ÙˆØ¯ØŒ reload PulseAudio
pactl upload-sample /usr/share/sounds/alsa/Front_Center.wav test-sound
pactl play-sample test-sound @DEFAULT_SINK@

Ù„Ø·ÙØ§Ù‹ ØªØ³Øª Ú©Ù†ÛŒØ¯ Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØ¯ Ø¢ÛŒØ§ ØµØ¯Ø§ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ÛŒØ§ Ù†Ù‡. Ø­Ø§Ù„Ø§ Ú©Ù‡ sink ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù‡ØŒ Ø¨Ù‡ Ø§Ø­ØªÙ…Ø§Ù„ Ø²ÛŒØ§Ø¯ Ù…Ø´Ú©Ù„ Ø­Ù„ Ø´Ø¯Ù‡.
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod -f snd_hda_codec_cs8409
sudo rmmod -f snd_hda_intel

sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

sleep 3

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409\|audio" | tail -10

# ØªØ³Øª ØµØ¯Ø§
timeout 5s speaker-test -c 2 -t wav                                       
[  252.846176] snd_hda_codec_cs8409: unknown parameter 'model' ignored
[  252.847719] snd_hda_intel: Primary patch_cs8409
[  252.847722] snd_hda_intel: Primary patch_cs8409 NOT FOUND trying APPLE
[  252.848350] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
[  252.848356] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
[  252.848359] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
[  252.848362] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
[  252.848364] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
[  252.848367] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
[  252.848369] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Periods = 4
ALSA lib pcm_pulse.c:758:(pulse_prepare) PulseAudio: Unable to create stream: No such entity

Unable to set hw params for playback: Input/output error
Setting of hwparams failed: Input/output error
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # Ø±Ø§Ù‡<200c>Ø§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ PulseAudio/pipewire
systemctl --user restart pipewire pipewire-pulse wireplumber

# ÛŒØ§ Ø§Ú¯Ø± Ø§Ø² PulseAudio Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒ<200c>Ú©Ù†ÛŒØ¯
pulseaudio --kill
pulseaudio --start

sleep 2
E: [pulseaudio] main.c: Failed to kill daemon: No such file or directory
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
systemctl --user status pipewire pipewire-pulse --no-pager | head -10

# Ø¨Ø±Ø±Ø³ÛŒ sinks Ù…ÙˆØ¬ÙˆØ¯
pactl list short sinks
â— pipewire.service - PipeWire Multimedia Service
     Loaded: loaded (/usr/lib/systemd/user/pipewire.service; enabled; preset: enabled)
    Drop-In: /usr/lib/systemd/user/pipewire.service.d
             â””â”€kali.conf
     Active: active (running) since Sun 2025-08-31 03:04:07 +0330; 19s ago
 Invocation: 49a5236a03e64f1987c26b4dd7efa53b
TriggeredBy: â— pipewire.socket
   Main PID: 4720 (pipewire)
      Tasks: 3 (limit: 18706)
     Memory: 4.8M (peak: 5.1M)
58      alsa_output.pci-0000_00_1f.3.analog-stereo      PipeWire        s32le 2ch 44100Hz  SUSPENDED
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # ØªÙ†Ø¸ÛŒÙ… default sink
pactl set-default-sink alsa_output.pci-0000_00_1f.3.analog-stereo

# Ø¨Ø±Ø±Ø³ÛŒ default sink
pactl get-default-sink

# ØªØ³Øª ØµØ¯Ø§
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS! Audio is working!" || {
    echo "âŒ Still not working with PulseAudio"
    echo "Trying direct ALSA device..."
    timeout 5s speaker-test -D hw:0,0 -c 2 -t wav
}
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # ØªÙ†Ø¸ÛŒÙ… default sink
pactl set-default-sink alsa_output.pci-0000_00_1f.3.analog-stereo

# Ø¨Ø±Ø±Ø³ÛŒ default sink
pactl get-default-sink
alsa_output.pci-0000_00_1f.3.analog-stereo
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ timeout 5s speaker-test -c 2 -t wav

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Periods = 4
was set period_size = 12000
was set buffer_size = 48000
 0 - Front Left
 1 - Front Right
Time per period = 2.177149
 0 - Front Left
 1 - Front Right
Write error: -4,Interrupted system call
xrun_recovery failed: -4,Interrupted system call
Transfer failed: Interrupted system call
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$

Ø¹Ø§Ù„ÛŒ! Ù¾ÛŒØ´Ø±ÙØª Ø®ÙˆØ¨ÛŒ Ø¯Ø§Ø´ØªÛŒÙ…. Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ… Ú©Ù‡:

    âœ… PipeWire Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§Ø³Øª

    âœ… Sink Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡: alsa_output.pci-0000_00_1f.3.analog-stereo

    âœ… Default sink ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡

    âœ… ØµØ¯Ø§ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Ø´ Ø§Ø³Øª (Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒÙ… Front Left Ùˆ Front Right Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯)

Ø§Ù…Ø§ Ø®Ø·Ø§ÛŒ Write error: -4,Interrupted system call Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ ØªØ³Øª ØµØ¯Ø§ interrupted Ø´Ø¯Ù‡. Ø§ÛŒÙ† Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ timeout ÛŒØ§ signal Ù‡Ø³Øª.

Ø¨ÛŒØ§ÛŒÛŒØ¯ ÛŒÚ© ØªØ³Øª Ø¨Ù‡ØªØ± Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒÙ…:
bash

# ØªØ³Øª Ø¨Ø¯ÙˆÙ† timeout
speaker-test -c 2 -t wav -l 1

Ø§Ú¯Ø± ØµØ¯Ø§ Ø´Ù†ÛŒØ¯Ù‡ Ø´Ø¯ØŒ ÛŒØ¹Ù†ÛŒ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯! Ø§Ú¯Ø± Ù†Ù‡ØŒ volume Ø±Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…:
bash

# Ø¨Ø±Ø±Ø³ÛŒ volume Ùˆ unmute Ú©Ø±Ø¯Ù†
pactl set-sink-volume @DEFAULT_SINK@ 100%
pactl set-sink-mute @DEFAULT_SINK@ 0

# ØªØ³Øª Ù…Ø¬Ø¯Ø¯
speaker-test -c 2 -t wav -l 1

Ø§Ú¯Ø± Ø¨Ø§Ø²Ù‡Ù… Ù…Ø´Ú©Ù„ Ø¯Ø§Ø´ØªØŒ Ø§Ø² pavucontrol Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªÛŒ ØµØ¯Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
bash

# Ù†ØµØ¨ pavucontrol Ø§Ú¯Ø± Ù†ÛŒØ³Øª
sudo apt install pavucontrol

# Ø§Ø¬Ø±Ø§ÛŒ audio control
pavucontrol

Ø¯Ø± pavucontrol:

    Ø¨Ù‡ ØªØ¨ "Output Devices" Ø¨Ø±ÙˆÛŒØ¯

    Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ùˆ unmute Ø§Ø³Øª

    volume Ø±Ø§ ØªØ§ 100% Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ù‡ÛŒØ¯

Ø³Ù¾Ø³ ØªØ³Øª Ú©Ù†ÛŒØ¯:
bash

# ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ
speaker-test -c 2 -t wav -l 1

Ø§Ú¯Ø± ØµØ¯Ø§ Ú©Ø§Ø± Ú©Ø±Ø¯ØŒ ğŸ‰ ØªØ¨Ø±ÛŒÚ© Ù…ÛŒâ€ŒÚ¯Ù…! Ù…Ø´Ú©Ù„ Ø­Ù„ Ø´Ø¯Ù‡. Ø§Ú¯Ø± Ù†Ù‡ØŒ Ù…Ù…Ú©Ù†Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø±ÛŒØ³ØªØ§Ø±Øª Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯:
bash

# Ø±ÛŒØ³ØªØ§Ø±Øª Ù†Ù‡Ø§ÛŒÛŒ
sudo reboot

Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±ØªØŒ Ø¨Ø±Ø±Ø³ÛŒ Ù†Ù‡Ø§ÛŒÛŒ:
bash

# ØªØ³Øª Ù¾Ø³ Ø§Ø² Ø±ÛŒØ³ØªØ§Ø±Øª
speaker-test -c 2 -t wav -l 1 && echo "ğŸ‰ SUCCESS! Audio is working!" || echo "âŒ Still issues"

Ù…Ø´Ú©Ù„ Ø§ØµÙ„ÛŒ Ø§Ù„Ø§Ù† apparently Ø­Ù„ Ø´Ø¯Ù‡ - ØµØ¯Ø§ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Ø´ Ù‡Ø³Øª Ø§Ù…Ø§ Ù…Ù…Ú©Ù†Ù‡ volume Ù¾Ø§ÛŒÛŒÙ† Ø¨Ø§Ø´Ø¯ ÛŒØ§ mute Ø¨Ø§Ø´Ø¯.
Ø§ÙˆÙ„ Ø®ÛŒÙ„ÛŒ Ø§Ø²Øª Ù…Ù…Ù†ÙˆÙ†Ù… Ú©Ù‡ ØªÙˆ ÛŒÚ© Ø§Ù…ÛŒØ¯ Ù‡Ø³ØªÛŒ Ø¨Ø±Ø§ÛŒ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ùˆ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø¯Ù† Ú©Ø§Ø± Ø¨Ø²Ø±Ú¯ÛŒ Ú©Ø±Ø¯ÛŒ

                                           Ø¨Ø¹Ø¯ Ø§Ø² Ø§ÛŒÙ† ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØµØ¯Ø§ Ú©Ø§Ø± Ú©Ø±Ø¯

Ù…ÛŒØ´Ù‡ Ø¨Ú¯ÛŒ Ø¯Ù‚ÛŒÙ‚Ø§ Ú†ÛŒÚ©Ø§Ø± Ú©Ø±Ø¯ÛŒ ØŸ

â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§ÛŒ ØµØ¯Ø§
sudo pkill -9 pipewire
sudo pkill -9 wireplumber

# Ø­Ø°Ù Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo rmmod -f snd_hda_codec_cs8409
sudo rmmod -f snd_hda_intel

sleep 2

# Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„<200c>Ù‡Ø§
sudo modprobe snd_hda_intel
sudo modprobe snd_hda_codec_cs8409

sleep 3

# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
dmesg | grep -i "cs8409\|audio" | tail -10

# ØªØ³Øª ØµØ¯Ø§
timeout 5s speaker-test -c 2 -t wav                                       
[  252.846176] snd_hda_codec_cs8409: unknown parameter 'model' ignored
[  252.847719] snd_hda_intel: Primary patch_cs8409
[  252.847722] snd_hda_intel: Primary patch_cs8409 NOT FOUND trying APPLE
[  252.848350] snd_hda_codec_cs8409 hdaudioC0D0: autoconfig for CS8409: line_outs=2 (0x24/0x25/0x0/0x0/0x0) type:speaker
[  252.848356] snd_hda_codec_cs8409 hdaudioC0D0:    speaker_outs=0 (0x0/0x0/0x0/0x0/0x0)
[  252.848359] snd_hda_codec_cs8409 hdaudioC0D0:    hp_outs=1 (0x2c/0x0/0x0/0x0/0x0)
[  252.848362] snd_hda_codec_cs8409 hdaudioC0D0:    mono: mono_out=0x0
[  252.848364] snd_hda_codec_cs8409 hdaudioC0D0:    inputs:
[  252.848367] snd_hda_codec_cs8409 hdaudioC0D0:      Internal Mic=0x44
[  252.848369] snd_hda_codec_cs8409 hdaudioC0D0:      Mic=0x3c

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Periods = 4
ALSA lib pcm_pulse.c:758:(pulse_prepare) PulseAudio: Unable to create stream: No such entity

Unable to set hw params for playback: Input/output error
Setting of hwparams failed: Input/output error
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # Ø±Ø§Ù‡<200c>Ø§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ PulseAudio/pipewire
systemctl --user restart pipewire pipewire-pulse wireplumber

# ÛŒØ§ Ø§Ú¯Ø± Ø§Ø² PulseAudio Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒ<200c>Ú©Ù†ÛŒØ¯
pulseaudio --kill
pulseaudio --start

sleep 2
E: [pulseaudio] main.c: Failed to kill daemon: No such file or directory
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆÛŒØ³<200c>Ù‡Ø§
systemctl --user status pipewire pipewire-pulse --no-pager | head -10

# Ø¨Ø±Ø±Ø³ÛŒ sinks Ù…ÙˆØ¬ÙˆØ¯
pactl list short sinks
â— pipewire.service - PipeWire Multimedia Service
     Loaded: loaded (/usr/lib/systemd/user/pipewire.service; enabled; preset: enabled)
    Drop-In: /usr/lib/systemd/user/pipewire.service.d
             â””â”€kali.conf
     Active: active (running) since Sun 2025-08-31 03:04:07 +0330; 19s ago
 Invocation: 49a5236a03e64f1987c26b4dd7efa53b
TriggeredBy: â— pipewire.socket
   Main PID: 4720 (pipewire)
      Tasks: 3 (limit: 18706)
     Memory: 4.8M (peak: 5.1M)
58      alsa_output.pci-0000_00_1f.3.analog-stereo      PipeWire        s32le 2ch 44100Hz  SUSPENDED
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # ØªÙ†Ø¸ÛŒÙ… default sink
pactl set-default-sink alsa_output.pci-0000_00_1f.3.analog-stereo

# Ø¨Ø±Ø±Ø³ÛŒ default sink
pactl get-default-sink

# ØªØ³Øª ØµØ¯Ø§
timeout 5s speaker-test -c 2 -t wav && echo "ğŸ‰ SUCCESS! Audio is working!" || {
    echo "âŒ Still not working with PulseAudio"
    echo "Trying direct ALSA device..."
    timeout 5s speaker-test -D hw:0,0 -c 2 -t wav
}
cmdand dquote> 
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ # ØªÙ†Ø¸ÛŒÙ… default sink
pactl set-default-sink alsa_output.pci-0000_00_1f.3.analog-stereo

# Ø¨Ø±Ø±Ø³ÛŒ default sink
pactl get-default-sink
alsa_output.pci-0000_00_1f.3.analog-stereo
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$ timeout 5s speaker-test -c 2 -t wav

speaker-test 1.2.14

Playback device is default
Stream parameters are 48000Hz, S16_LE, 2 channels
WAV file(s)
Rate set to 48000Hz (requested 48000Hz)
Buffer size range from 96 to 1048576
Period size range from 32 to 349526
Periods = 4
was set period_size = 12000
was set buffer_size = 48000
 0 - Front Left
 1 - Front Right
Time per period = 2.177149
 0 - Front Left
 1 - Front Right
Write error: -4,Interrupted system call
xrun_recovery failed: -4,Interrupted system call
Transfer failed: Interrupted system call
                                                                           
â”Œâ”€â”€(buddhaã‰¿localhost)-[~/snd-hda-codec-cs8409]
â””â”€$

Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ´Ø­Ø§Ù„Ù… Ú©Ù‡ Ù…Ø´Ú©Ù„ Ø­Ù„ Ø´Ø¯! ğŸ‰
Ø®Ù„Ø§ØµÙ‡ Ú©Ø§Ø±ÛŒ Ú©Ù‡ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯:
1. Ù†ØµØ¨ Ø¯Ø±Ø§ÛŒÙˆØ± Ø®Ø§Øµ CS8409:

    Ø¯Ø§Ù†Ù„ÙˆØ¯ Ùˆ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ø¯Ø±Ø§ÛŒÙˆØ± snd-hda-codec-cs8409 Ø§Ø² GitHub

    Ø§ÛŒÙ† Ø¯Ø±Ø§ÛŒÙˆØ± Ù…Ø®ØµÙˆØµ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ Cirrus Logic CS8409 Ø¯Ø± MacBook Ù‡Ø³Øª

2. Ø±ÛŒØ³ØªØ§Ø±Øª Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§:

    ØªÙˆÙ‚Ù Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ (PipeWire/WirePlumber)

    Ø­Ø°Ù Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ snd_hda_intel Ùˆ snd_hda_codec_cs8409

    Ø§ÛŒÙ† Ú©Ø§Ø± Ø¯Ø±Ø§ÛŒÙˆØ± Ø¬Ø¯ÛŒØ¯ Ø±Ùˆ ÙØ¹Ø§Ù„ Ú©Ø±Ø¯

3. ØªÙ†Ø¸ÛŒÙ…Ø§Øª PipeWire:

    Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø¬Ø¯Ø¯ Ø³Ø±ÙˆÛŒØ³ PipeWire

    Ø§ÛŒØ¬Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø± sink ØµØ¯Ø§: alsa_output.pci-0000_00_1f.3.analog-stereo

    ØªÙ†Ø¸ÛŒÙ… Ø§ÛŒÙ† sink Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù¾ÛŒØ´â€ŒÙØ±Ø¶

4. Ù…Ø´Ú©Ù„ Ø§ØµÙ„ÛŒ:

    Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ CS8409 Ø¯Ø± MacBook Ø¨Ù‡ Ø¯Ø±Ø§ÛŒÙˆØ± Ø®Ø§ØµÛŒ Ù†ÛŒØ§Ø² Ø¯Ø§Ø´Øª

    Ø¯Ø±Ø§ÛŒÙˆØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ù„ÛŒÙ†ÙˆÚ©Ø³ Ø¨Ù‡ Ø®ÙˆØ¨ÛŒ Ø¨Ø§ Ø§ÛŒÙ† Ø³Ø®Øªâ€ŒØ§ÙØ²Ø§Ø± Ú©Ø§Ø± Ù†Ù…ÛŒâ€ŒÚ©Ø±Ø¯

    Ø¯Ø±Ø§ÛŒÙˆØ± Ø®Ø§ØµÛŒ Ú©Ù‡ Ù†ØµØ¨ Ú©Ø±Ø¯ÛŒÙ…ØŒ Ù¾Ú†â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ø²Ù… Ø¨Ø±Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ø§ÛŒÙ† Ø³Ø®Øªâ€ŒØ§ÙØ²Ø§Ø± Ø±Ùˆ Ø¯Ø§Ø´Øª

5. Ù†Ú©Ø§Øª ÙÙ†ÛŒ:

    Ø¯Ø±Ø§ÛŒÙˆØ± Ø¬Ø¯ÛŒØ¯ pin configuration Ø±Ùˆ Ø§ØµÙ„Ø§Ø­ Ú©Ø±Ø¯

    Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ (Ø§Ø³Ù¾ÛŒÚ©Ø± Ùˆ Ù‡Ø¯ÙÙˆÙ†) Ø±Ùˆ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ mapping Ú©Ø±Ø¯

    Ù…Ø´Ú©Ù„ speaker_outs=0 Ú©Ù‡ Ù‚Ø¨Ù„Ø§ Ø¨ÙˆØ¯ Ø±Ùˆ Ø­Ù„ Ú©Ø±Ø¯

Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒØ¯ Ø§Ø² pavucontrol Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¨Ù‡ØªØ± ØµØ¯Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ Ùˆ volume Ø±Ùˆ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯. Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ† Ù‡Ù… Ø¨Ø§ÛŒØ¯ Ú©Ø§Ø± Ú©Ù†Ù‡!

Ø¨Ø±Ø§ÛŒ Ù¾Ø§ÛŒØ¯Ø§Ø± Ø¨ÙˆØ¯Ù† ØªÙ†Ø¸ÛŒÙ…Ø§ØªØŒ Ø¨Ù‡ØªØ±Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ø¢Ù¾Ø¯ÛŒØª kernel Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¯Ø±Ø§ÛŒÙˆØ± Ø±Ùˆ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ú©Ù†ÛŒØ¯.
Ø­Ø§Ù„Ø§ Ù…ÛŒØ´Ù‡ Ú©Ù„ Ú©Ø§Ø±Ù‡Ø§ÛŒÛŒ Ú©Ù‡ Ú©Ø±Ø¯ÛŒ Ú©Ù‡ Ù†ØµØ¨ Ø´Ø¯ Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú©Ø§Ø± Ú©Ø±Ø¯ Ø±Ùˆ Ø¯Ø± Ù‚Ø§Ù„Ø¨ ÛŒÚ© Ø´Ù„ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¨Ù‡Ù… Ø¨Ø¯ÛŒ Ú©Ù‡ Ø¯ÙØ¹Ø§Øª Ø¯ÛŒÚ¯Ù‡ Ø³ÛŒØ³ØªÙ… Ø¹Ø§Ù…Ù„ Ø±Ùˆ Ø§Ø² Ø§Ø¨ØªØ¯Ø§ Ù†ØµØ¨ Ú©Ø±Ø¯Ù… Ø¨Ù‡ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„Ø§Øª Ù†Ø®ÙˆØ±Ù… Ùˆ Ø³Ø±ÛŒØ¹ Ù†ØµØ¨ Ú©Ù†Ù… Ø¨Ø§ ØªÙˆØ¶ÛŒØ­Ø§Øª Ù…Ø±ÙˆØ¨Ø· Ø¨Ù‡ Ø§ÙˆÙ† Ù…Ù…Ù†ÙˆÙ†
bash

#!/bin/bash
# MacBook Audio Fix Script for Kali Linux
# Description: Installs CS8409 audio driver for MacBook and configures audio
# Author: Your Name
# Usage: sudo ./macbook-audio-fix.sh

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

log() {
    echo -e "${BLUE}[INFO]${NC} $1"
}

success() {
    echo -e "${GREEN}[SUCCESS]${NC} $1"
}

warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# Check if running as root
if [ "$EUID" -ne 0 ]; then
    error "Please run as root or with sudo"
    exit 1
fi

echo -e "${GREEN}=== MacBook Audio Fix for Kali Linux ===${NC}"

# Step 1: Install dependencies
log "Installing dependencies..."
apt update
apt install -y git make gcc linux-headers-$(uname -r) alsa-tools

# Step 2: Download and install CS8409 driver
log "Downloading CS8409 audio driver..."
cd /tmp
git clone https://github.com/egorenar/snd-hda-codec-cs8409.git
cd snd-hda-codec-cs8409

log "Compiling and installing driver..."
make
make install
depmod -a

# Step 3: Stop audio services
log "Stopping audio services..."
pkill -9 -f pipewire || true
pkill -9 -f wireplumber || true
pkill -9 -f pulseaudio || true

# Step 4: Reload audio modules
log "Reloading audio modules..."
rmmod -f snd_hda_codec_cs8409 2>/dev/null || true
rmmod -f snd_hda_intel 2>/dev/null || true
sleep 2

modprobe snd_hda_intel
modprobe snd_hda_codec_cs8409
sleep 3

# Step 5: Configure ALSA
log "Configuring ALSA settings..."
echo "options snd-hda-intel model=mbp16" > /etc/modprobe.d/macbook-audio.conf
echo "options snd-hda-intel position_fix=1" >> /etc/modprobe.d/macbook-audio.conf
echo "options snd-hda-intel power_save=0" >> /etc/modprobe.d/macbook-audio.conf

update-initramfs -u

# Step 6: Restart audio services
log "Restarting audio services..."
systemctl --user restart pipewire pipewire-pulse wireplumber 2>/dev/null || {
    log "Starting audio services manually..."
    systemctl --user start pipewire pipewire-pulse wireplumber
}

sleep 3

# Step 7: Configure PulseAudio/PipeWire
log "Configuring audio sink..."
# Wait for sink to be created
for i in {1..10}; do
    if pactl list short sinks 2>/dev/null | grep -q "analog-stereo"; then
        break
    fi
    sleep 1
done

# Set default sink
SINK=$(pactl list short sinks 2>/dev/null | grep "analog-stereo" | awk '{print $2}' | head -1)
if [ -n "$SINK" ]; then
    pactl set-default-sink "$SINK"
    pactl set-sink-volume "$SINK" 100%
    pactl set-sink-mute "$SINK" 0
fi

# Step 8: Add user to audio group
log "Adding user to audio group..."
USER=$(logname)
usermod -a -G audio "$USER"

# Step 9: Test audio
log "Testing audio..."
echo -e "${YELLOW}Testing audio for 3 seconds...${NC}"

if timeout 3s speaker-test -c 2 -t wav 2>/dev/null; then
    success "Audio test successful! Sound should be working."
    echo -e "${GREEN}Please reboot your system for changes to take full effect.${NC}"
else
    warning "Audio test had issues, but configuration is complete."
    echo -e "${YELLOW}Please reboot and test audio again.${NC}"
fi

# Step 10: Create cleanup script
log "Creating cleanup script..."
cat > /usr/local/bin/audio-fix << 'EOF'
#!/bin/bash
# Quick audio fix for MacBook
echo "Restarting audio services..."
pkill -9 -f pipewire
pkill -9 -f wireplumber
sleep 2
systemctl --user restart pipewire pipewire-pulse wireplumber
sleep 3
echo "Audio services restarted"
EOF

chmod +x /usr/local/bin/audio-fix

# Final instructions
echo -e "${GREEN}=== Installation Complete ===${NC}"
echo "What was installed:"
echo "âœ… CS8409 audio driver from github.com/egorenar/snd-hda-codec-cs8409"
echo "âœ… ALSA configuration for MacBook"
echo "âœ… Audio user group permissions"
echo "âœ… Quick fix script: audio-fix"
echo ""
echo "Next steps:"
echo "1. Reboot your system: sudo reboot"
echo "2. After reboot, test audio: speaker-test -c 2 -t wav"
echo "3. Use 'pavucontrol' for audio control"
echo "4. If issues persist, run: audio-fix"
echo ""
echo "Note: After kernel updates, you may need to recompile the driver:"
echo "cd /tmp/snd-hda-codec-cs8409 && make && make install"

# Reboot recommendation
echo ""
echo -e "${YELLOW}Recommended: Reboot now for changes to take effect? (y/n)${NC}"
read -r reboot_choice
if [ "$reboot_choice" = "y" ] || [ "$reboot_choice" = "Y" ]; then
    reboot
fi

Ù†Ø­ÙˆÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø³Ú©Ø±ÛŒÙ¾Øª:

    Ø°Ø®ÛŒØ±Ù‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª:

bash

sudo nano /usr/local/bin/macbook-audio-fix.sh

    Ø§Ø¬Ø§Ø²Ù‡ Ø§Ø¬Ø±Ø§:

bash

sudo chmod +x /usr/local/bin/macbook-audio-fix.sh

    Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª:

bash

sudo /usr/local/bin/macbook-audio-fix.sh

ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª:

    âœ… Ù†ØµØ¨ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø±Ø§ÛŒÙˆØ± CS8409

    âœ… ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ù‡ÛŒÙ†Ù‡ ALSA Ø¨Ø±Ø§ÛŒ MacBook

    âœ… Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ PipeWire/PulseAudio

    âœ… Ø§ÛŒØ¬Ø§Ø¯ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªØ¹Ù…ÛŒØ± Ø³Ø±ÛŒØ¹ (audio-fix)

    âœ… Ø§ÙØ²ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ú¯Ø±ÙˆÙ‡ audio

    âœ… ØªØ³Øª Ø®ÙˆØ¯Ú©Ø§Ø± ØµØ¯Ø§

Ù¾Ø³ Ø§Ø² Ù†ØµØ¨:

    Ø±ÛŒØ³ØªØ§Ø±Øª Ø³ÛŒØ³ØªÙ…: sudo reboot

    ØªØ³Øª ØµØ¯Ø§: speaker-test -c 2 -t wav

    Ú©Ù†ØªØ±Ù„ ØµØ¯Ø§: pavucontrol

    ØªØ¹Ù…ÛŒØ± Ø³Ø±ÛŒØ¹: audio-fix

Ù†Ú©Ø§Øª Ù…Ù‡Ù…:

    Ø¨Ø¹Ø¯ Ø§Ø² Ø¢Ù¾Ø¯ÛŒØª kernelØŒå¯èƒ½éœ€è¦ Ø¯Ø±Ø§ÛŒÙˆØ± Ø±Ùˆ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ú©Ø§Ù…Ù¾Ø§ÛŒÙ„ Ú©Ù†ÛŒØ¯

    Ø§Ø³Ú©Ø±ÛŒÙ¾Øª audio-fix Ø¨Ø±Ø§ÛŒ Ø±ÙØ¹ Ø³Ø±ÛŒØ¹ Ù…Ø´Ú©Ù„Ø§Øª ØµØ¯Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯Ù‡

    Ø§Ø² pavucontrol Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ volume Ùˆ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ØµØ¯Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯

Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù…Ø´Ú©Ù„ Ú©Ø§Ø±Øª ØµØ¯Ø§ÛŒ MacBook Ø¨Ø§ Ú©Ø¯Ú© CS8409 Ø±Ùˆ Ø¨Ù‡ Ø·ÙˆØ± Ú©Ø§Ù…Ù„ Ø­Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ù‡! ğŸµ
New chat
AI-generated, for reference only
